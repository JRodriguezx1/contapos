<<<<<<< HEAD
{"version":3,"sources":["bundle.ts.js","app.ts","clientes.ts","dashboard.ts","menumovil.ts","perfil.ts","almacen/ajustarcostos.ts","almacen/almacen.ts","almacen/categoria.ts","almacen/compras.ts","almacen/ensamblaje.ts","almacen/gestionproveedores.ts","almacen/productos.ts","almacen/subproductos.ts","almacen/unidadesmedida.ts","caja/caja.ts","caja/cerrarcaja.ts","caja/detallecierrecaja.ts","caja/fechazetadiario.ts","caja/ordenresumen.ts","caja/pedidosguardados.ts","ventas/paginadorventas.ts","ventas/ventas.ts","configuracion/empleados.ts","configuracion/gestionbancos.ts","configuracion/gestioncajas.ts","configuracion/gestiondian.ts","configuracion/gestionfacturadores.ts","reportes/inventarioxproducto.ts","reportes/reportes.ts","reportes/ventastransaccion.ts","reportes/ventasxcliente.ts","configuracion/ajustesdelsistema/configparametros.ts"],"names":["mobilemenu","document","querySelector","sidebar","btnmenux","barra","nametop","addEventListener","classList","toggle","e","$","toggleClass","configdatatables","paging","lengthChange","searching","ordering","info","autoWidth","responsive","deferRender","retrieve","processing","language","search","emptyTable","zeroRecords","lengthMenu","infoEmpty","infoFiltered","paginate","first","last","next","previous","configdatatablesstockrapido","layout","topStart","buttons","extend","text","exportOptions","columns","title","pageLength","configdatatablesajustarcostos","configdatatablescaja","order","msjAlert","tipo","msj","divmsjalerta","insertAdjacentHTML","borrarMsjAlert","divmsj","setTimeout","firstChild","removeChild","msjalertToast","icono","Swal","fire","icon","toast","position","showConfirmButton","timer","querySelectorAll","forEach","element","_a","textContent","parseInt","dataset","num","previousElementSibling","value","length","toString","target","cadena","slice","renderid","nextElementSibling","id","style","display","btns_navtabs","paginas","Element","pagina","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","done","then","apply","_b","_c","btncrearCliente","btncrearDireccion","miDialogoCliente","miDialogoCrearDireccion","miDialogoUpDireccion","selectdirecciones","btnCerrarUpDireccion","tablaClientes","uncliente","indiceFila","control","direcciones","clientes","cerrarDialogoExterno","event","close","removeEventListener","url","respuesta","fetch","json","console","log","error","DataTable","reset","limpiarformdialog","showModal","select2","dropdownParent","placeholder","maximumSelectionLength","_d","contains","parentElement","_e","_f","_g","_h","_j","idcliente","tagName","find","x","nombre","apellido","val","tipodocumento","identificacion","telefono","email","fecha_nacimiento","editarClientes","page","row","closest","index","customClass","confirmButton","cancelButton","showCancelButton","confirmButtonText","cancelButtonText","isConfirmed","datos","FormData","append","method","body","resultado","undefined","exito","start","remove","draw","eliminarClientes","addrs","dir","option","createElement","direccion","idtarifa","appendChild","departamento","ciudad","addDireccionSelect","upRemoveDir","preventDefault","a","Object","assign","cliente","datosActuales","data","select","idDir","options","selectedIndex","objDireccion","resumen","usuarioNombre","ultimaActualizacion","Date","toLocaleString","efectivoFacturado","totalIngresosFacturados","productosVendidos","facturasEmitidas","facturasEliminadas","gastosHoy","gastoPromedio","descuentosAplicados","productoMasVendido","unidadesPMV","ventasHoySummary","ingresos7diasTotal","ventasPorHoras","labels","ingresosDias","gastosTransaccion","historicoVG","ventas","gastos","topProductos","unidades","ingresos","porcentaje","stockMinimo","actual","minimo","getElementById","innerText","Number","tbodyTop","innerHTML","p","tr","className","ulStock","item","li","levelClass","formatCOP","ctxHoras","getContext","Chart","type","datasets","label","borderColor","backgroundColor","fill","tension","pointRadius","scales","y","beginAtZero","plugins","tooltip","callbacks","ctx","parsed","legend","ctxIngresosDias","ticks","callback","v","ctxGastos","ctxVG","yAxisID","y1","grid","drawOnChartArea","mobilemenu1","miDialogomenumovil","setAttribute","removeAttribute","btnCambiarEmail","miDialogoUpEmail","tablaAjustarCostos","allConversionUnidades","subUnd","idsubproducto","children","idproducto","nombreunidaddestino","factor","factorconversion","input","tipoelemento","idelemento","selectUnidad","trx","previousSibling","costo","color","fontWeight","actualizarcostos","btntrasladoinvnetario","btnXCerrarTrasladoInvnetario","miDialogoTrasladoInvnetario","reinciarinv","miDialogoStock","modalStock","selectStockRapidoUndmedida","amount","miDialogoIngresarProduccion","selectitemAproducir","btnsproduccion","selectIngresarProduccionUnidadmedida","amountProduccion","tablaStockRapido","tablaInventarioSedes","cantidadactual","endponit","factorC","sedes","allproductsXsucursal","mostrarInfoItem","producto","stock","precio_compra","precio_venta","actualizarStockRapido","insumosProductos","tipoItem","rows","every","rowNode","node","id_element","subproductoid","idAttr","getAttribute","productoid","cell","td","stockminimo","firstElementChild","add","window","location","reload","checked","sucursales","Set","map","d","sucursal","productos","nombreproducto","stocks","columnas","s","push","values","prod","fila","destroy","printstockXsucursal","filter","u","descontarStock","aumentarStock","ajustarStock","AmountItem","on","selectedOption","prodund","und","mostrarSelectUnidades","btnproduccion","AmountItemProduccion","insumos","crearCategoria","miDialogoCategoria","tablaCategorias","action","idcategoria","categoria","editarCategoria","eliminarCategoria","proveedor","impuesto","nfactura","fecha","origenPago","origenCaja","origenBanco","formapago","observacion","btnvaciar","miDialogoVaciar","miDialogoRegistrarcompra","tablaCompras","filteredData","carrito","reduce","total","valorcompra","vaciarcompra","f","some","isNaN","estado","cantidad","JSON","stringify","idsx","procesarpedido","tipoproducto","sku","unidadmedida","activarselect2","findIndex","iditem","itemselected","idpx","nombreitem","unidad","cantidadcomprado","valorunidad","subtotal","unItem","printItemTable","elementItem","tipoitem","itemCarrito","unit","listaSubproductos","selectUnidadMedida","calcularFactor","idConversionUnidad","reg","idsub","subund","inputRendimiendoEstandar","subproducto","AmountSubpx","sub","validarSubproducto","trigger","btn","desasociarSubproducto","crearProveedor","miDialogoProveedor","tablaProveedores","unproveedor","proveedores","idproveedor","nit","editarProveedor","eliminarProveedor","urlApi","count","created_at","crearProducto","miDialogoProducto","inputupImage","btncustomUpImage","imginputfile","tablaProductos","unproducto","products","divAlert","targetDom","preciocompra","habtipoproduccion","src","_k","_l","_m","_o","idunidadmedida","tipoproduccion","foto","editarProductos","s1","bloquearProductos","eliminarProductos","imgFile","includes","elements","namedItem","files","size","click","file","reader","FileReader","onload","resrult","readAsDataURL","crearSubProducto","miDialogoSubProducto","tablaSubProductos","unsubproducto","subproducts","id_unidadmedida","editarSubProductos","eliminarSubProductos","btnCrearUnidadMedida","miDialogoUnidadMedida","tablaUnidadesMedida","editarUnidadMedida","form","submit","eliminarUnidadMedida","modalGastosIngresos","modalcambioMedioPago","btnGastosingresos","operacion","origengasto","mediosPago","totalPagado","numfactura","tablaListaPedidos","estadofactura","contentMP","mediospagoDB","idfactura","nuevosMediosPago","setMediosPagoDB","mapMediospago","Map","showCajasBancos","selectorigen","tipodegasto","totalpagado","idmediopago","mediopago","i","valor","set","facturamediospago","cambiomediopago","open","printPOS","cotizacion","urlprintPDF","ventana","focus","print","printPDF","mp","totalmediospago","replace","has","get","totalotrosmedios","setNuevosMediosPago","mediospagocompartidos","nuevosMediosPagoNoEnDB","mediosPagoDBNoEnNuevos","mediosPagoUpdate","btnMP","button","updateMP","actualizarMediosPago","modalArqueocaja","Modalcerrarcaja","modalCambiarCaja","btnArqueocaja","btnCerrarcaja","btnImprimirDetalleCaja","btnCambiarCaja","inputsmediospago","formArqueocaja","formCambiarCaja","href","ultimocierre","confirmarcierre","ef","sum","Array","from","denominaicon","moneda","eventInput","Event","dispatchEvent","sumatoriaDenominaciones","m","inputmediopago","valormediopagodeclarado","name","valordeclarado","coldeclarado","coldif","useGrouping","colsistem","cuerpoanalisis","actualizarAnalisis","array","tbodyMediosPago","printdiscriminarmediospago","discriminarmediospagos","obj","basecaja","ventasenefectivo","gastoscaja","domicilios","ingresoventas","totaldescuentos","totalfacturas","totalcotizaciones","basegravable","valorimpuestototal","gastosbanco","facturaselectronicas","facturaspos","printindicadores","sobranteFaltante","nombremediopago","valorsistema","id_mediopago","printsobrantesfaltantes","sobrantefaltante","ventasxusuarios","Nombre","N_ventas","printventasxusuarios","tablaVentas","fechapago","mediosdepago","join","printventas","facturas","btnsmultiselect","selectedcajas","consultarZDiario","base","valorImpuestoTotal","ingresoVentas","totalDescuentos","realVentas","cantidadElectronicas","cantidadPOS","valorElectronicas","valorPOS","fechainicio","fechafin","cajas_seleccionadas","inputscaja","cajastext","inputcaja","btnmultiselect","cerrarlosmultiselect","c","daterangepicker","timePicker","startDate","moment","hour","minute","second","endDate","locale","format","ev","picker","cajas","facturadores","valuecajas","valuefacturadores","reiniciarTablas","datosmediospago","datosventa","subtotalventa","totalventa","ELECTRONICAS","POS","total_ELECTRONICAS","total_POS","miDialogoFacturar","miDialogoEliminarOrden","btnfacturar","btneliminarorden","btnCaja","btnTipoFacturador","mediospago","btnsdevolverinv","inputsInv","printcarta","printcotizacion","valorTotal","dctox100","descuento","valortarifa","selectFacturadorSegunCaja","z","idfacturador","calcularCambio","recibido","inputinv","rendimientoestandar","idorden","eliminarorden","URLSearchParams","clear","delete","subirModalPagar","inv","qty","calcularmediospago","imprimir","id_factura","ordenpagada","tablaPedidosGuardados","idpedidoguardado","eliminarPedidoGuardado","filtrocategorias","hackerList","List","valueNames","pagination","btnCarritoMovil","contenidocarrito","contenedorDesktop","miDialogoCarritoMovil","btnCerrarCarritoMovil","innerWidth","btnAddCliente","btnAddDir","selectCliente","dirEntrega","facturarA","contentproducts","btnotros","btndescuento","btnEntrega","modalidadEntrega","totalunidades","tablaventa","btnguardar","miDialogoAddCliente","miDialogoAddDir","miDialogoOtrosProductos","miDialogoFacturarA","miDialogoDescuento","miDialogoGuardar","tipoDescts","inputDescuento","tarifas","nombretarifa","valorMax","constImp","excluido","0","5","8","16","19","factimpuestos","otrosproductos","setTarifas","tarifa","printTarifaEnvio","valorCarritoTotal","selectDir","objtarifa","printProduct","uncarrito","actualizarCarrito","stateinput","valorimp","parseFloat","toFixed","productovalorimp","productototal","idimpuesto","objbase","mapImpuesto","impValor","Obj","id_impuesto","facturaid","valorimpuesto","valorTotalImp","valorImp","minimumFractionDigits","maximumFractionDigits","vaciarventa","datosfactura","history","replaceState","key","ctz","idvendedor","clienteID","identidad","addClienteSelect","nextID","idcli","formelements","cantidadotros","preciootros","marca","codigo","descripcion","peso","medidas","funcion","uso","fabricante","garantia","fecha_ingreso","visible","elementProduct","popup","requestAnimationFrame","popupx","t","idProduct","productoCarrito","partes","split","startsWith","desc","valorInput","Math","round","factura","num_orden","crearempleado","dialogoEmpleado","dialogoContraseña","btnupImage","inputNombre","inputApellido","inputnickname","inputcedula","inputpassword","inputpassword2","inputMovil","inputEmail","inputDepartamento","inputCiudad","inputDireccion","inputPerfil","tablaempleados","unempleado","empleadosapi","_p","_q","idempleado","img","nickname","cedula","movil","perfil","leave","permisos","checkbox","editarEmpleado","updatePassword","eliminarEmpleado","arraypermisos","rutaimg","crearBanco","miDialogoBanco","tablaBancos","unbanco","bancos","idbanco","numerocuenta","editarBanco","eliminarBanco","banco","crearCaja","miDialogoCaja","tablaCajas","unacaja","idcaja","idtipoconsecutivo","editarCaja","eliminarCaja","caja","nombreconsecutivo","negocio","crearCompañia","obtenerresolucion","setpruebas","miDialogoCompañia","miDialogoGetResolucion","miDialogosetpruebas","crearFacturador","miDialogoFacturador","tablaFacturadores","unfacturador","idtipofacturador","rangoinicial","rangofinal","siguientevalor","resolucion","prefijo","editarFacturador","eliminarFacturador","facturador","graficaventa","chartventas","chartutilidad","chartVentasInstance","callapiventasgrafica","borderWidth","graficaVentas","btngrafica","valorventa","costoinv","hoverOffset","generateLabels","chart","fillStyle","btnmensual","btndiario","miDialogoMes","miDialogoDiario","tablaTransaccioneXVenta","datatransacciones","printTableTranscciones","render","inputselectaño","inputselectmesyaño","consultarFechaPersonalizada","btnmesactual","btnmesanterior","btnhoy","btnayer","tablaVentasXCliente","datosVentaXCliente","formatoFecha","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","callApiVentasXCliente","dateinicio","datefin","printTableVentasXCliente","hoy","primerDia","ultimoDia","toISOString","primerDiaMesAnterior","ultimoDiaMesAnterior","inicioDia","finDia","ayer","inicioAyer","finAyer","radios","claves","porcentaje_de_impuesto","radio","grupo","seleccionado","clave","cambiarparametro","inputClave","valorClave"],"mappings":"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","file":"bundle.ts.js","sourcesContent":[null,"const mobilemenu = document.querySelector('#mobile-menu');  //seleccion por id\r\nconst sidebar = document.querySelector('.sidebar') as HTMLElement|null;  //seleccion por calses\r\nconst btnmenux = document.querySelector('#mobile-menux');\r\nconst barra = document.querySelector('.barra-mobile') as HTMLElement|null;\r\nconst nametop:HTMLElement|null = document.querySelector('.nametop');\r\ndeclare let Chart:any; //declare le indica a typescript que la variable chart viene de manera externa\r\ndeclare const Swal: any;\r\ndeclare var moment: any;\r\ndeclare let List: any; \r\n\r\nif(mobilemenu){\r\n    mobilemenu.addEventListener('click', function(){\r\n      if (sidebar && barra) {\r\n        sidebar.classList.toggle('mostrar');\r\n        barra.classList.toggle('ocultarmenu');\r\n      }\r\n    });\r\n}\r\nif(btnmenux){\r\n    btnmenux.addEventListener('click', function(){\r\n      if (sidebar && barra) {\r\n        sidebar.classList.toggle('mostrar');\r\n        barra.classList.toggle('ocultarmenu');\r\n      }\r\n    });\r\n}\r\n/////////////////////// animacion del sidebar toggle ///////////////////////////\r\ndocument.querySelector('.sidebartoggle')!.addEventListener('click', (e)=>{\r\n  if(sidebar)sidebar?.classList.toggle('minsidebar');\r\n  if(nametop)nametop.classList.toggle('noneElement');\r\n  $('.btnav').toggleClass('noneElement');\r\n});\r\n\r\n//------------------------------------------------------------------------------------------------------------------//\r\n///////////////////// OBJETO DE CONFIGURACION DEL PLUGIN DATATABLES /////////////////////\r\nconst configdatatables = {\r\n  \"paging\": true,\r\n  \"lengthChange\": true,\r\n  \"searching\": true,\r\n  \"ordering\": true,\r\n  \"info\": true,\r\n  \"autoWidth\": true,\r\n  \"responsive\": true,\r\n  \"deferRender\": true,\r\n  \"retrieve\": true,\r\n  \"processing\": true,\r\n  language: {\r\n      search: 'Busqueda',\r\n      emptyTable: 'No Hay datos disponibles',\r\n      zeroRecords:    \"No se encontraron registros coincidentes\",\r\n      lengthMenu: '_MENU_ Entradas por pagina',\r\n      info: 'Mostrando pagina _PAGE_ de _PAGES_',\r\n      infoEmpty: 'No hay entradas a mostrar',\r\n      infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n      paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n  }\r\n}\r\n\r\n///////////////////// OBJETO DE CONFIGURACION DEL PLUGIN DATATABLES PARA STOCK RAPIDO /////////////////////\r\nconst configdatatablesstockrapido = {\r\n  layout: {\r\n        topStart: {\r\n            buttons: [\r\n              {extend: 'copyHtml5', text: 'Copia'}, \r\n              {extend: 'excelHtml5', exportOptions: {columns: [1, 2, 3, 4, 5]}, title: 'Stock-inventario'}, \r\n              {extend: 'csvHtml5', exportOptions: {columns: [1, 2, 3, 4, 5]}, title: 'Stock-inventario'}, \r\n              {extend: 'pdfHtml5', exportOptions: {columns: [1, 2, 3, 4, 5]}, title: 'Stock-inventario'}, \r\n              {extend: 'print', exportOptions: {columns: [1, 3, 4]}, title: 'Stock-inventario', text: 'Imprimir'},\r\n              'colvis'\r\n            ],\r\n            pageLength: 'pageLength'\r\n        }\r\n  },\r\n  pageLength: 25,\r\n  \"paging\": true,\r\n  \"lengthChange\": true,\r\n  \"searching\": true,\r\n  \"ordering\": true,\r\n  \"info\": true,\r\n  \"autoWidth\": true,\r\n  \"responsive\": true,\r\n  \"deferRender\": true,\r\n  \"retrieve\": true,\r\n  \"processing\": true,\r\n  language: {\r\n      search: 'Busqueda',\r\n      emptyTable: 'No Hay datos disponibles',\r\n      zeroRecords:    \"No se encontraron registros coincidentes\",\r\n      lengthMenu: '_MENU_ Entradas por pagina',\r\n      info: 'Mostrando pagina _PAGE_ de _PAGES_',\r\n      infoEmpty: 'No hay entradas a mostrar',\r\n      infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n      paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n  }\r\n}\r\n\r\n///////////////////// OBJETO DE CONFIGURACION DEL PLUGIN DATATABLES PARA AJUSTAR COSTOS /////////////////////\r\nconst configdatatablesajustarcostos = {\r\n  layout: {\r\n        topStart: {\r\n            buttons: [\r\n              {extend: 'copyHtml5', text: 'Copia'}, \r\n              {extend: 'excelHtml5', exportOptions: {columns: [1, 3, 4, 5, 6]}, title: 'costo por producto'}, \r\n              {extend: 'csvHtml5', exportOptions: {columns: [1, 3, 4, 5, 6]}, title: 'costo por producto'}, \r\n              {extend: 'pdfHtml5', exportOptions: {columns: [1, 3, 4, 5, 6]}, title: 'costo por producto'}, \r\n              {extend: 'print', exportOptions: {columns: [1, 3, 4, 5, 6]}, title: 'costo por producto', text: 'Imprimir'},\r\n              'colvis'\r\n            ],\r\n            pageLength: 'pageLength'\r\n        }\r\n  },\r\n  pageLength: 25,\r\n  \"paging\": true,\r\n  \"lengthChange\": true,\r\n  \"searching\": true,\r\n  \"ordering\": true,\r\n  \"info\": true,\r\n  \"autoWidth\": true,\r\n  \"responsive\": true,\r\n  \"deferRender\": true,\r\n  \"retrieve\": true,\r\n  \"processing\": true,\r\n  language: {\r\n      search: 'Busqueda',\r\n      emptyTable: 'No Hay datos disponibles',\r\n      zeroRecords:    \"No se encontraron registros coincidentes\",\r\n      lengthMenu: '_MENU_ Entradas por pagina',\r\n      info: 'Mostrando pagina _PAGE_ de _PAGES_',\r\n      infoEmpty: 'No hay entradas a mostrar',\r\n      infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n      paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n  }\r\n}\r\n\r\n///////////////////// CONFIGURACION DEL PLUGIN DATATABLES PARA CAJA/////////////////////\r\nconst configdatatablescaja = {\r\n  \"paging\": false,\r\n  \"order\": [[ 3, 'desc' ]],\r\n  \"searching\": true,\r\n  \"ordering\": true,\r\n  \"info\": true,\r\n  \"autoWidth\": true,\r\n  \"responsive\": true,\r\n  \"deferRender\": true,\r\n  \"retrieve\": true,\r\n  \"processing\": true,\r\n  language: {\r\n      search: 'Busqueda',\r\n      emptyTable: 'No Hay datos disponibles',\r\n      zeroRecords:    \"No se encontraron registros coincidentes\",\r\n      lengthMenu: '_MENU_ Entradas por pagina',\r\n      info: 'Mostrando 1 de _MAX_ registros',\r\n      infoEmpty: 'No hay entradas a mostrar',\r\n      infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n      paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n  }\r\n}\r\n\r\n///////////////////// FUNCION QUE IMPRIME MENSAJE TIPO ALERTA /////////////////////\r\nfunction msjAlert(tipo:string, msj:string, divmsjalerta:HTMLElement):void{\r\n  divmsjalerta.insertAdjacentHTML('beforeend', `<div class=\"alerta alerta__${tipo}\">\r\n      <p><i class=\"fa-solid fa-circle-exclamation\"></i> ${msj}</p></div>`\r\n  );\r\n  borrarMsjAlert(divmsjalerta);\r\n}\r\n//////////////////// BORRAR MENSAJES TIPO ALERTA /////////////////////\r\n/*(borrarMsjAlert =()=>{  //se aplica de manera global\r\n  const msj = document.querySelector('#divmsjalerta');\r\n  if(document.querySelector('.alerta'))setTimeout(()=>{ while(msj.firstChild)msj.removeChild(msj.firstChild);}, 5000);\r\n})();*/\r\nfunction borrarMsjAlert(divmsj:HTMLElement):void{  //se aplica de manera global\r\n  //const msj = document.querySelector('#divmsjalerta')!;\r\n  if(document.querySelector('.alerta'))setTimeout(()=>{ while(divmsj.firstChild)divmsj.removeChild(divmsj.firstChild);}, 5000);\r\n}\r\n//////////////////// FUNCION QUE IMPRIME UN MENSAJE FORMATO TOAST ////////////////////\r\n//msjalertToast('error', '¡Error!', 'debe seleccionar una imagen')\r\nfunction msjalertToast(icono:string, tipo:string, msj:string){\r\n    Swal.fire({\r\n    icon: icono,  // Puedes cambiar el ícono (success, error, warning, info, etc.)\r\n    title: tipo,\r\n    text: msj,\r\n    toast: true,\r\n    position: 'top-end',  \r\n    showConfirmButton: false,  \r\n    timer: 2700  \r\n    });\r\n}\r\n\r\n/////////////////// FUNCION CONTADOR DE CARACTERES ////////////////////\r\n(function countchars():void{\r\n  const numinput = document.querySelectorAll('.count-charts') as NodeListOf<HTMLElement>;  \r\n  numinput.forEach(element =>{ //element es cada label\r\n      element.textContent = (parseInt(element.dataset.num!)-(element.previousElementSibling as HTMLInputElement).value.length).toString();\r\n      element.previousElementSibling?.addEventListener('input', (e)=>{ //seleccionamos el input o el textarea en donde se escribe y se le da el evento de teclas\r\n          element.textContent = parseInt(element.dataset.num!)-(e.target as HTMLInputElement).value.length+\"\";\r\n            \r\n          if(parseInt(element.dataset.num!)-(e.target as HTMLInputElement).value.length <= 0){\r\n              let cadena = (e.target as HTMLInputElement).value.slice(0, parseInt(element.dataset.num!));\r\n              (e.target as HTMLInputElement).value = cadena;\r\n              element.textContent =`${0}`;\r\n          }\r\n      });\r\n  });\r\n})();\r\n\r\n/////////////////// paginacion de negocio empleado, malla, config //////////////////\r\nif(document.querySelector('#tabulacion')){ // view/admin/adminconfig/index.php\r\n  const renderid = document.querySelector('#tabulacion input[type=\"radio\"]:checked')!.nextElementSibling as HTMLElement; //se selecciona el input cheked y luego su span q contiene el id de la pagina a mostrar\r\n  document.querySelector<HTMLElement>(`.${renderid.id}`)!.style.display = \"block\"; //mostramos la primera seccion\r\n  const btns_navtabs = document.querySelectorAll('.tabs span');\r\n  const paginas = document.querySelectorAll<HTMLElement>('.paginas'); //seleccionamos las secciones o paginas a mostrar\r\n  btns_navtabs.forEach(Element => {\r\n      Element.addEventListener('click', (e)=>{ //cada btn o enlace\r\n          const target = e.target as HTMLElement;\r\n          paginas.forEach(pagina =>pagina.style.display = \"none\"); ////quitamos la class mostrarseccion a todas las secciones\r\n          document.querySelector<HTMLElement>(`.${target.id}`)!.style.display = \"block\"; //añadimos la class mostrarseccion a la la seccion o pagina correspondiente\r\n      });\r\n  });\r\n}\r\n\r\n/*\r\n// PROCESO SOLICITUD DE INVENTARIO A OTRAS SEDES\r\nlet currentStep = 1;\r\nconst totalSteps = 3;\r\n\r\nconst btnAnterior = document.getElementById(\"btnAnteriorSolicitudInv\") as HTMLButtonElement;\r\nconst btnSiguiente = document.getElementById(\"btnSiguienteSolicitudInv\") as HTMLButtonElement;\r\nconst steps = document.querySelectorAll<HTMLDivElement>(\".step-circle\");\r\nconst stepSections = document.querySelectorAll<HTMLElement>(\".step-section\");\r\n\r\nfunction actualizarProgreso() {\r\n  // Actualizar barra de progreso\r\n  steps.forEach((step, index) => {\r\n    const stepNumber = index + 1;\r\n    if (stepNumber < currentStep) {\r\n      step.className =\r\n        \"step-circle w-10 h-10 rounded-full bg-green-500 text-white font-semibold flex items-center justify-center\";\r\n    } else if (stepNumber === currentStep) {\r\n      step.className =\r\n        \"step-circle w-10 h-10 rounded-full bg-indigo-600 text-white font-semibold flex items-center justify-center\";\r\n    } else {\r\n      step.className =\r\n        \"step-circle w-10 h-10 rounded-full border-2 border-gray-300 text-gray-400 font-semibold flex items-center justify-center\";\r\n    }\r\n  });\r\n\r\n  // Mostrar solo la sección actual\r\n  stepSections.forEach((section, index) => {\r\n    if (index + 1 === currentStep) {\r\n      section.style.display = \"block\";\r\n    } else {\r\n      section.style.display = \"none\";\r\n    }\r\n  });\r\n\r\n  // Deshabilitar/activar botones si es necesario\r\n  btnAnterior.disabled = currentStep === 1;\r\n  btnSiguiente.disabled = currentStep === totalSteps;\r\n}\r\n\r\n// Inicializar vista\r\nactualizarProgreso();\r\n\r\n// Eventos de navegación\r\nbtnSiguiente.addEventListener(\"click\", () => {\r\n  if (currentStep < totalSteps) {\r\n    currentStep++;\r\n    actualizarProgreso();\r\n  }\r\n});\r\n\r\nbtnAnterior.addEventListener(\"click\", () => {\r\n  if (currentStep > 1) {\r\n    currentStep--;\r\n    actualizarProgreso();\r\n  }\r\n});*/\r\n\r\n","(()=>{\r\n    if(document.querySelector('.clientes')){\r\n      const btncrearCliente = document.querySelector('#crearCliente');\r\n      const btncrearDireccion = document.querySelector('#crearDireccion');\r\n      const miDialogoCliente = document.querySelector('#miDialogoCliente') as any;\r\n      const miDialogoCrearDireccion = document.querySelector('#miDialogoCrearDireccion') as any;\r\n      const miDialogoUpDireccion = document.querySelector('#miDialogoUpDireccion') as any;\r\n      const selectdirecciones = document.querySelector('#selectdirecciones') as HTMLSelectElement;\r\n      const btnCerrarUpDireccion = document.querySelector('#btnCerrarUpDireccion') as HTMLButtonElement;\r\n      let indiceFila=0, control=0, tablaClientes:HTMLElement;\r\n      \r\n      type direccionesapi = {\r\n        id:string,\r\n        idcliente:string,\r\n        idtarifa:string,\r\n        tarifa:{id:string, idcliente:string, nombre:string, valor:string},\r\n        direccion:string,\r\n        ciudad:string,\r\n        departamento:string\r\n      };\r\n      let direcciones:direccionesapi[]=[];\r\n  \r\n      type clientesapi = {\r\n        id:string,\r\n        nombre: string,\r\n        apellido: string,\r\n        tipodocumento: string,\r\n        identificacion: string,\r\n        telefono: string,\r\n        email: string,\r\n        fecha_nacimiento: string,\r\n        total_compras: string,\r\n        ultima_compra: string;\r\n        data1: string,\r\n        //idservicios:{idempleado:string, idservicio:string}[]\r\n      };\r\n  \r\n      let clientes:clientesapi[]=[], uncliente:clientesapi;\r\n  \r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allclientes\"; //llamado a la API REST y se trae todos los productos\r\n            const respuesta = await fetch(url); \r\n            clientes = await respuesta.json(); \r\n            console.log(clientes);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n  \r\n      \r\n  \r\n      //////////////////  TABLA //////////////////////\r\n      tablaClientes = ($('#tablaClientes') as any).DataTable(configdatatables);\r\n  \r\n      btncrearCliente?.addEventListener('click', (e):void=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalCliente')!.textContent = \"Crear cliente\";\r\n        (document.querySelector('#btnEditarCrearCliente') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoCliente.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n\r\n\r\n      btncrearDireccion?.addEventListener('click', (e):void=>{\r\n        control = 0;\r\n        document.querySelector('#modalDireccion')!.textContent = \"Crear direccion\";\r\n        (document.querySelector('#btnEditarCrearDireccion') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoCrearDireccion.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        ($('#selectcliente') as any).select2({\r\n          dropdownParent: $('#miDialogoCrearDireccion'),\r\n          placeholder: \"Seleccionar el cliente\",\r\n          maximumSelectionLength: 1\r\n        });\r\n      });\r\n  \r\n      document.querySelector('#tablaClientes')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n        const target = e.target as HTMLElement;\r\n        if((e.target as HTMLElement)?.classList.contains(\"editarClientes\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarClientes\"))editarClientes(e);\r\n        if(target?.classList.contains(\"eliminarClientes\")||target.parentElement?.classList.contains(\"eliminarClientes\"))eliminarClientes(e);\r\n        if(target?.classList.contains(\"editarEliminarDireccion\")||target.parentElement?.classList.contains(\"editarEliminarDireccion\"))upRemoveDir(e);\r\n      });\r\n  \r\n      function editarClientes(e:Event){\r\n        let idcliente = (e.target as HTMLElement).parentElement?.id!;\r\n        if((e.target as HTMLElement)?.tagName === 'I')idcliente = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n        control = 1;\r\n        document.querySelector('#modalCliente')!.textContent = \"Actualizar cliente\";\r\n        (document.querySelector('#btnEditarCrearCliente') as HTMLInputElement)!.value = \"Actualizar\";\r\n        uncliente = clientes.find(x=>x.id === idcliente)!;\r\n        (document.querySelector('#nombre')as HTMLInputElement).value = uncliente?.nombre!;\r\n        (document.querySelector('#apellido')as HTMLInputElement).value = uncliente?.apellido!;\r\n        $('#tipodocumento').val(uncliente?.tipodocumento??'');\r\n        (document.querySelector('#identificacion')as HTMLInputElement).value = uncliente?.identificacion??'';\r\n        (document.querySelector('#telefono')as HTMLInputElement).value = uncliente?.telefono??'';\r\n        (document.querySelector('#email')as HTMLInputElement).value = uncliente?.email??'';\r\n        (document.querySelector('#fecha_nacimiento')as HTMLInputElement).value = uncliente?.fecha_nacimiento??'';\r\n        \r\n        miDialogoCliente.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n  \r\n      ////////////////////  Actualizar/Editar clientes  //////////////////////\r\n      document.querySelector('#formCrearUpdateCliente')?.addEventListener('submit', e=>{\r\n        if(control){\r\n          e.preventDefault();\r\n          var info = (tablaClientes as any).page.info();\r\n          \r\n          (async ()=>{ \r\n            const datos = new FormData();\r\n            datos.append('id', uncliente!.id);\r\n            datos.append('nombre', $('#nombre').val()as string);\r\n            datos.append('apellido', $('#apellido').val()as string);\r\n            datos.append('tipodocumento', $('#tipodocumento').val()as string);\r\n            datos.append('identificacion', $('#identificacion').val()as string);\r\n            datos.append('telefono', $('#telefono').val()as string);\r\n            datos.append('email', $('#email').val()as string);\r\n            datos.append('fecha_nacimiento', $('#fecha_nacimiento').val()as string);\r\n            try {\r\n                const url = \"/admin/api/actualizarCliente\";\r\n                const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                const resultado = await respuesta.json(); \r\n                console.log(resultado); \r\n                if(resultado.exito !== undefined){\r\n                  msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                  /// actualizar el arregle de clientes ///\r\n                  clientes.forEach(a=>{if(a.id == uncliente.id)a = Object.assign(a, resultado.cliente[0]);});\r\n                  ///////// cambiar la fila completa, su contenido //////////\r\n                  const datosActuales = (tablaClientes as any).row(indiceFila).data();\r\n                  /*NOMBRE*/datosActuales[1] = $('#nombre').val();\r\n                  /*APELLIDO*/datosActuales[2] = $('#apellido').val();\r\n                  /*TELEFONO*/datosActuales[3] = $('#telefono').val();\r\n                  /*EMAIL*/datosActuales[4] = $('#email').val();\r\n                  \r\n                  (tablaClientes as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaClientes as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }else{\r\n                  msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                }\r\n                miDialogoCliente.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n          })();//cierre de async()\r\n        } //fin if(control)\r\n      });\r\n  \r\n\r\n      function upRemoveDir(e:Event){ //actualizar o eliminar direccion\r\n        let idcliente = (e.target as HTMLElement).parentElement!.id, info = (tablaClientes as any).page.info();\r\n        if((e.target as HTMLElement).tagName === 'I')idcliente = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n        (async ()=>{\r\n          try {\r\n            const url = \"/admin/api/direccionesXcliente?id=\"+idcliente; //llamado a la API REST y se trae las direcciones segun cliente elegido\r\n            const respuesta = await fetch(url); \r\n            const resultado = await respuesta.json(); \r\n            direcciones = resultado;\r\n            addDireccionSelect(resultado);\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();\r\n        miDialogoUpDireccion.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n\r\n\r\n       ////// añade direccion al select de direcciones al miDialogoUpDireccion, cuando se desea actualizar o eliminar la direccion de un cliente\r\n      function addDireccionSelect<T extends {id:string, idcliente:string, idtarifa:string, tarifa:{id:string, idcliente:string, nombre:string, valor:string}, direccion:string, ciudad:string, departamento:string}>(addrs: T[]):void{\r\n        while(selectdirecciones?.firstChild)selectdirecciones.removeChild(selectdirecciones?.firstChild);\r\n        addrs.forEach(dir =>{\r\n          const option = document.createElement('option');\r\n          option.textContent = dir.direccion;\r\n          option.value = dir.id;\r\n          option.dataset.idcliente = dir.idcliente;\r\n          option.dataset.idtarifa = dir.idtarifa;\r\n          selectdirecciones.appendChild(option);\r\n        });\r\n        $('#uptarifa').val(addrs[0].idtarifa);\r\n        (document.querySelector('#updepartamento') as HTMLInputElement).value = addrs[0].departamento;\r\n        (document.querySelector('#upciudad') as HTMLInputElement).value = addrs[0].ciudad;\r\n        (document.querySelector('#updireccion') as HTMLInputElement).value = addrs[0].direccion;\r\n      }\r\n\r\n\r\n      ///////// Evento al select de direcciones en el modal actualizar direciones de cada cliente ////////////\r\n      selectdirecciones?.addEventListener('change', (e)=>{\r\n        const select = (e.target as HTMLSelectElement);\r\n        const idDir:string = select.options[select.selectedIndex].value;\r\n        const objDireccion = direcciones.find(x=>x.id == idDir)!;\r\n        $('#uptarifa').val(objDireccion?.idtarifa??1);\r\n        (document.querySelector('#updepartamento') as HTMLInputElement).value = objDireccion.departamento;\r\n        (document.querySelector('#upciudad') as HTMLInputElement).value = objDireccion.ciudad;\r\n        (document.querySelector('#updireccion') as HTMLInputElement).value = objDireccion.direccion;\r\n      });\r\n\r\n\r\n      document.querySelector('#formUpDireccion')?.addEventListener('submit', e=>{\r\n          e.preventDefault();\r\n          // verificar si se oprimio el btn eliminar o actualizar del modal actualizar direccion\r\n        });\r\n        \r\n\r\n      function eliminarClientes(e:Event){\r\n        let idcliente = (e.target as HTMLElement).parentElement!.id, info = (tablaClientes as any).page.info();\r\n        if((e.target as HTMLElement).tagName === 'I')idcliente = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n        indiceFila = (tablaClientes as any).row((e.target as HTMLElement).closest('tr')).index();\r\n        Swal.fire({\r\n            customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n            icon: 'question',\r\n            title: 'Desea eliminar el cliente?',\r\n            text: \"El cliente sera eliminado por completo.\",\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Si',\r\n            cancelButtonText: 'No',\r\n        }).then((result:any) => {\r\n            if (result.isConfirmed) {\r\n                (async ()=>{ \r\n                    const datos = new FormData();\r\n                    datos.append('id', idcliente);\r\n                    try {\r\n                        const url = \"/admin/api/eliminarCliente\";\r\n                        const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                        const resultado = await respuesta.json();  \r\n                        if(resultado.exito !== undefined){\r\n                          (tablaClientes as any).row(indiceFila+info.start).remove().draw(); \r\n                          (tablaClientes as any).page(info.page).draw('page');\r\n                          Swal.fire(resultado.exito[0], '', 'success') \r\n                        }else{\r\n                            Swal.fire(resultado.error[0], '', 'error')\r\n                        }\r\n                    } catch (error) {\r\n                        console.log(error);\r\n                    }\r\n                })();//cierre de async()\r\n            }\r\n        });\r\n      }\r\n\r\n\r\n      btnCerrarUpDireccion.addEventListener('click', ()=>miDialogoUpDireccion.close());\r\n  \r\n  \r\n      function limpiarformdialog(){\r\n        (document.querySelector('#formCrearUpdateCliente') as HTMLFormElement)?.reset();\r\n      }\r\n      function cerrarDialogoExterno(event:Event) {\r\n        if (event.target === miDialogoCliente || event.target === miDialogoCrearDireccion || event.target === miDialogoUpDireccion || (event.target as HTMLInputElement).value === 'salir') {\r\n          miDialogoCliente.close();\r\n          miDialogoCrearDireccion.close();\r\n          miDialogoUpDireccion.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n    }\r\n  \r\n  })();","(function():void{\r\n  if(document.querySelector('.inicio')){\r\n    \r\n    const resumen = {\r\n      usuarioNombre: \"\",\r\n      ultimaActualizacion: new Date().toLocaleString(),\r\n      efectivoFacturado: 450000,\r\n      totalIngresosFacturados: 8200000,\r\n      productosVendidos: 320,\r\n      facturasEmitidas: 58,\r\n      facturasEliminadas: 1,\r\n      gastosHoy: 120000,\r\n      gastoPromedio: 3500,\r\n      descuentosAplicados: 8000,\r\n      productoMasVendido: \"Pollo broaster\",\r\n      unidadesPMV: 120,\r\n      ventasHoySummary: \"$450.000\",\r\n      ingresos7diasTotal: \"$8.200.000\"\r\n    };\r\n\r\n    // Ventas por horas (hoy) - ejemplo 24 horas o por horas de apertura (aquí 10 valores)\r\n    const ventasPorHoras = {\r\n      labels: [\"08:00\",\"09:00\",\"10:00\",\"11:00\",\"12:00\",\"13:00\",\"14:00\",\"15:00\",\"16:00\",\"17:00\"],\r\n      data:    [5, 12, 20, 35, 60, 48, 30, 22, 15, 10]\r\n    };\r\n\r\n    // Ingresos últimos 7 días\r\n    const ingresosDias = {\r\n      labels: [\"Lun\",\"Mar\",\"Mié\",\"Jue\",\"Vie\",\"Sáb\",\"Dom\"],\r\n      data:   [120000, 150000, 180000, 90000, 200000, 170000, 220000]\r\n    };\r\n\r\n    // Gastos por transacción (gráfico doughnut)\r\n    const gastosTransaccion = {\r\n      labels: [\"Comisiones\", \"Materia Primas\", \"Servicios\", \"Otros\"],\r\n      data:   [15, 50, 25, 10] // porcentajes o montos relativos\r\n    };\r\n\r\n    // Histórico Ventas vs Gastos (últimos 6 meses)\r\n    const historicoVG = {\r\n      labels: [\"Abr\",\"May\",\"Jun\",\"Jul\",\"Ago\",\"Sep\"],\r\n      ventas: [1200000, 1500000, 1800000, 1400000, 2000000, 2200000],\r\n      gastos: [700000, 800000, 850000, 780000, 900000, 980000]\r\n    };\r\n\r\n    // Top productos (tabla) - ejemplo\r\n    const topProductos = [\r\n      { nombre: \"Taladro percutor BLACK AND DECKER 550W 1/2\", unidades: 120, ingresos: 1200000, porcentaje: \"25%\" },\r\n      { nombre: \"Aspiradorax\", unidades: 90, ingresos: 810000, porcentaje: \"17%\" },\r\n      { nombre: \"Bi-Pro Vainilla 5kg\", unidades: 70, ingresos: 700000, porcentaje: \"14%\" }\r\n    ];\r\n\r\n    // Stock minimo - ejemplo\r\n    const stockMinimo = [\r\n      { nombre: \"Vitamina women Blend\", actual: 2, minimo: 5 },\r\n      { nombre: \"Aspiradorax\", actual: 3, minimo: 4 },\r\n      { nombre: \"Bi-Pro Vainilla 5kg\", actual: 6, minimo: 8 }\r\n    ];\r\n\r\n    // ---------- Rellenar valores en DOM ----------\r\n    document.getElementById('usuarioNombre')!.innerText = resumen.usuarioNombre;\r\n    document.getElementById('ultimaActualizacion')!.innerText = resumen.ultimaActualizacion;\r\n    document.getElementById('efectivoFacturado')!.innerText = `$${Number(resumen.efectivoFacturado).toLocaleString('es-CO')}`;\r\n    document.getElementById('totalIngresosFacturados')!.innerText = `$${Number(resumen.totalIngresosFacturados).toLocaleString('es-CO')}`;\r\n    document.getElementById('productosVendidos')!.innerText = resumen.productosVendidos+'';\r\n    document.getElementById('facturasEmitidas')!.innerText = resumen.facturasEmitidas+'';\r\n    document.getElementById('facturasEliminadas')!.innerText = resumen.facturasEliminadas+'';\r\n    document.getElementById('gastosHoy')!.innerText = `$${Number(resumen.gastosHoy).toLocaleString('es-CO')}`;\r\n    document.getElementById('gastoPromedio')!.innerText = `$${Number(resumen.gastoPromedio).toLocaleString('es-CO')}`;\r\n    document.getElementById('descuentosAplicados')!.innerText = `$${Number(resumen.descuentosAplicados).toLocaleString('es-CO')}`;\r\n    document.getElementById('productoMasVendido')!.innerText = resumen.productoMasVendido;\r\n    document.getElementById('unidadesPMV')!.innerText = resumen.unidadesPMV+'';\r\n    document.getElementById('ventasHoySummary')!.innerText = resumen.ventasHoySummary;\r\n    document.getElementById('ingresos7diasTotal')!.innerText = resumen.ingresos7diasTotal;\r\n\r\n    // Rellenar tabla top productos\r\n    const tbodyTop = document.getElementById('tablaTopProductos')!;\r\n    tbodyTop.innerHTML = \"\"; // limpiar\r\n    topProductos.forEach(p => {\r\n      const tr = document.createElement('tr');\r\n      tr.className = 'border-b';\r\n      tr.innerHTML = `\r\n        <td class=\"py-2\">${p.nombre}</td>\r\n        <td class=\"py-2\">${p.unidades}</td>\r\n        <td class=\"py-2\">$${Number(p.ingresos).toLocaleString('es-CO')}</td>\r\n        <td class=\"py-2\">${p.porcentaje}</td>\r\n      `;\r\n      tbodyTop.appendChild(tr);\r\n    });\r\n\r\n    // Rellenar lista stock minimo\r\n    const ulStock = document.getElementById('listaStockMinimo')!;\r\n    ulStock.innerHTML = \"\";\r\n    stockMinimo.forEach(item => {\r\n      const li = document.createElement('li');\r\n      const levelClass = item.actual <= item.minimo ? 'text-red-500 font-bold text-xl' : 'text-yellow-600 font-semibold';\r\n      li.className = 'flex items-center justify-between';\r\n      li.innerHTML = `\r\n        <div>\r\n          <p class=\"font-medium\">${item.nombre}</p>\r\n          <p class=\"text-xs text-gray-400\">Min: ${item.minimo}</p>\r\n        </div>\r\n        <div class=\"text-right\">\r\n          <p class=\"${levelClass}\">${item.actual}</p>\r\n          <p class=\"text-xs text-gray-400\">uds</p>\r\n        </div>\r\n      `;\r\n      ulStock.appendChild(li);\r\n    });\r\n\r\n    // ---------- Charts ----------\r\n\r\n    // Helper to format currency in tooltips\r\n    const formatCOP = (value:number) => {\r\n      if (typeof value === 'number') return `$${value.toLocaleString('es-CO')}`;\r\n      return value;\r\n    };\r\n\r\n    // Ventas por horas (line)\r\n    const ctxHoras = (document.getElementById('chartVentasHoras') as HTMLCanvasElement).getContext('2d');\r\n    new Chart(ctxHoras, {\r\n      type: 'line',\r\n      data: {\r\n        labels: ventasPorHoras.labels,\r\n        datasets: [{\r\n          label: 'Ventas (unidades)',\r\n          data: ventasPorHoras.data,\r\n          borderColor: '#6366F1',\r\n          backgroundColor: 'rgba(99,102,241,0.12)',\r\n          fill: true,\r\n          tension: 0.35,\r\n          pointRadius: 3\r\n        }]\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        scales: {\r\n          y: { beginAtZero: true }\r\n        },\r\n        plugins: {\r\n          tooltip: {\r\n            callbacks: {\r\n              label: (ctx:any) => ` ${ctx.parsed.y} unidades`\r\n            }\r\n          },\r\n          legend: { display: false }\r\n        }\r\n      }\r\n    });\r\n\r\n    // Ingresos por día (bar)\r\n    const ctxIngresosDias = (document.getElementById('chartIngresosDias') as HTMLCanvasElement).getContext('2d');\r\n    new Chart(ctxIngresosDias, {\r\n      type: 'bar',\r\n      data: {\r\n        labels: ingresosDias.labels,\r\n        datasets: [{\r\n          label: 'Ingresos',\r\n          data: ingresosDias.data,\r\n          backgroundColor: '#10B981'\r\n        }]\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        plugins: {\r\n          tooltip: {\r\n            callbacks: {\r\n              label: (ctx:any) => formatCOP(ctx.parsed.y)\r\n            }\r\n          },\r\n          legend: { display: false }\r\n        },\r\n        scales: {\r\n          y: {\r\n            beginAtZero: true,\r\n            ticks: { callback: (v:any) => (v >= 1000 ? `$${(v/1000)}k` : `$${v}`) }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    // Gastos por transacción (doughnut)\r\n    const ctxGastos = (document.getElementById('chartGastosTransaccion') as HTMLCanvasElement).getContext('2d');\r\n    new Chart(ctxGastos, {\r\n      type: 'doughnut',\r\n      data: {\r\n        labels: gastosTransaccion.labels,\r\n        datasets: [{\r\n          data: gastosTransaccion.data,\r\n          backgroundColor: ['#EF4444','#F59E0B','#3B82F6','#6B7280']\r\n        }]\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        plugins: {\r\n          legend: { position: 'bottom' }\r\n        }\r\n      }\r\n    });\r\n\r\n    // Ventas vs Gastos (combinado: barras gastos + línea ventas)\r\n    const ctxVG = (document.getElementById('chartVentasGastos') as HTMLCanvasElement).getContext('2d');\r\n    new Chart(ctxVG, {\r\n      data: {\r\n        labels: historicoVG.labels,\r\n        datasets: [\r\n          {\r\n            type: 'bar',\r\n            label: 'Gastos',\r\n            data: historicoVG.gastos,\r\n            backgroundColor: 'rgba(239,68,68,0.8)'\r\n          },\r\n          {\r\n            type: 'line',\r\n            label: 'Ventas',\r\n            data: historicoVG.ventas,\r\n            borderColor: '#4F46E5',\r\n            backgroundColor: 'rgba(79,70,229,0.15)',\r\n            tension: 0.3,\r\n            fill: true,\r\n            yAxisID: 'y1'\r\n          }\r\n        ]\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        plugins: { legend: { position: 'bottom' } },\r\n        scales: {\r\n          y: {\r\n            beginAtZero: true,\r\n            position: 'left',\r\n            title: { display: true, text: 'Gastos (COP)' }\r\n          },\r\n          y1: {\r\n            beginAtZero: true,\r\n            position: 'right',\r\n            grid: { drawOnChartArea: false },\r\n            title: { display: true, text: 'Ventas (COP)' }\r\n          }\r\n        },\r\n      }\r\n    });\r\n  }\r\n})();","\r\n\r\n// const mobilemenu1 = document.querySelector('#mobile-menu1')as HTMLButtonElement;\r\n// const miDialogomenumovil = document.querySelector('#miDialogomenumovil') as any;\r\n\r\n// mobilemenu1.addEventListener('click', ()=>{\r\n//     miDialogomenumovil.showModal();\r\n//     document.addEventListener('click', cerrarDialogoExterno);\r\n// });\r\n\r\n\r\n// function cerrarDialogoExterno(event:Event){\r\n//  const f = event.target;\r\n//  if(f === miDialogomenumovil){\r\n//     miDialogomenumovil.close();\r\n//  }\r\n// }\r\nconst mobilemenu1 = document.querySelector('#mobile-menu1') as HTMLButtonElement;\r\nconst miDialogomenumovil = document.querySelector('#miDialogomenumovil') as HTMLDialogElement;\r\n\r\n// aseguramos que al cargar la página el modal esté cerrado y oculto\r\nmiDialogomenumovil.close();\r\nmiDialogomenumovil.setAttribute('hidden', 'true');\r\n\r\nmobilemenu1.addEventListener('click', () => {\r\n  miDialogomenumovil.showModal();\r\n  miDialogomenumovil.removeAttribute('hidden');\r\n  document.addEventListener('click', cerrarDialogoExterno);\r\n});\r\n\r\nfunction cerrarDialogoExterno(event: Event) {\r\n  const f = event.target;\r\n  if (f === miDialogomenumovil) {\r\n    miDialogomenumovil.close();\r\n    miDialogomenumovil.setAttribute('hidden', 'true');\r\n    document.removeEventListener('click', cerrarDialogoExterno);\r\n  }\r\n}\r\n\r\n\r\n","(()=>{\r\n    if(document.querySelector('.perfil')){\r\n      const btnCambiarEmail = document.querySelector('#btnCambiarEmail');\r\n      const miDialogoUpEmail = document.querySelector('#miDialogoUpEmail') as any;\r\n      //const btnCerrarUpDireccion = document.querySelector('#btnCerrarUpDireccion') as HTMLButtonElement;\r\n      \r\n  \r\n      btnCambiarEmail?.addEventListener('click', (e):void=>{\r\n        miDialogoUpEmail.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }); \r\n\r\n      //btnCerrarUpDireccion.addEventListener('click', ()=>miDialogoUpDireccion.close());\r\n\r\n  \r\n      function cerrarDialogoExterno(event:Event) {\r\n        if (event.target === miDialogoUpEmail || (event.target as HTMLInputElement).value === 'salir') {\r\n          miDialogoUpEmail.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n    }\r\n  \r\n  })();","(()=>{\r\n    if(document.querySelector('.ajustarcostos')){\r\n        let tablaAjustarCostos:HTMLElement;\r\n\r\n        type conversionunidadesapi = {\r\n            id:string,\r\n            idproducto: string,\r\n            idsubproducto: string,\r\n            idunidadmedidabase: string,\r\n            idunidadmedidadestino: string,\r\n            nombreunidadbase: string,\r\n            nombreunidaddestino: string,\r\n            factorconversion: string,\r\n            //idservicios:{idempleado:string, idservicio:string}[]\r\n          };\r\n\r\n        let allConversionUnidades:conversionunidadesapi[] = [];\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/allConversionesUnidades\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas las conversiones de unidades\r\n                const respuesta = await fetch(url); \r\n                allConversionUnidades = await respuesta.json();\r\n                console.log(allConversionUnidades);\r\n                pirntUnidades();\r\n                tablaAjustarCostos = ($('#tablaAjustarCostos') as any).DataTable(configdatatablesajustarcostos);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n        //tablaAjustarCostos = ($('#tablaAjustarCostos') as any).DataTable(configdatatables);\r\n        //indiceFila = (tablaAjustarCostos as any).row(1).data();\r\n\r\n        function pirntUnidades():void{\r\n            allConversionUnidades.forEach(subUnd =>{\r\n                let select = document.querySelector(`tr[data-idsubproducto=\"${subUnd.idsubproducto}\"]`)?.children[5].children[0];\r\n                if(select == undefined)select = document.querySelector(`tr[data-idproducto=\"${subUnd.idproducto}\"]`)?.children[5].children[0];\r\n                const option = document.createElement('option');\r\n                option.textContent = subUnd.nombreunidaddestino;\r\n                option.dataset.factor = subUnd.factorconversion;\r\n                select?.appendChild(option);\r\n            });\r\n        }\r\n \r\n\r\n        /*const fila = (tablaAjustarCostos as any).row((idx:number, data:any, node:HTMLElement)=>{\r\n            return node.dataset.idproducto === subUnd.idsubproducto;\r\n        }).data();*/\r\n        //console.log(fila[4]);\r\n      /*fila[4] = `<select class=\"formulario__select\" required>\r\n                        <option value=\"\" disabled selected>-Seleccionar-</option>\r\n                        <option value=\"\"> Unidad </option>\r\n                    </select>`;\r\n        (tablaAjustarCostos as any).row(2).data(fila).draw();*/\r\n\r\n        //tablaAjustarCostos = ($('#tablaAjustarCostos') as any).DataTable(configdatatables);\r\n        \r\n        document.querySelector('#tablaAjustarCostos')?.addEventListener('input', (e:Event)=>{\r\n            var input = e.target as HTMLInputElement;\r\n            let tipoelemento:string = '', idelemento:string = '';\r\n            if((input as HTMLInputElement).classList.contains('inputAjustarCosto')){\r\n                \r\n                var tr = input.closest('tr');\r\n                const selectUnidad = tr?.querySelector('.formulario__select') as HTMLSelectElement;\r\n                const factor:number = Number(selectUnidad.options[selectUnidad.selectedIndex].dataset.factor);\r\n                \r\n                var trx = input.closest('.fila') as HTMLElement;\r\n                if(!trx)trx = input.closest('tr')?.previousSibling as HTMLElement;\r\n\r\n                if(trx.classList.contains('producto')){\r\n                    idelemento = trx.dataset.idproducto!;\r\n                    tipoelemento = '0'; //si es producto\r\n                }\r\n                else{\r\n                    idelemento = trx.dataset.idsubproducto!;\r\n                    tipoelemento = '1';  // si es un subproducto\r\n                }\r\n\r\n                ////////////// enviar datos por api para actualizar costos /////////////\r\n                actualizarcostos(tipoelemento, idelemento, factor, input);\r\n            }\r\n        });\r\n\r\n\r\n        function actualizarcostos(tipoelemento:string, idelemento:string, factor:number, input:HTMLInputElement){\r\n            if(input.value=='')input.value = '0';\r\n            const costo = Number(input.value)/factor;\r\n            console.log(costo);\r\n            (async ()=>{ \r\n                const datos = new FormData();\r\n                datos.append('tipoelemento', tipoelemento); //1 = subproducto\r\n                datos.append('idelemento', idelemento);\r\n                datos.append('precio_compra', costo+'');\r\n                try {\r\n                    const url = \"/admin/api/actualizarcostos\";  //asocia el producto con el sub producto en la tabla productos_sub\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                        input.style.color = \"#02db02\";\r\n                        input.style.fontWeight = \"500\";\r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            })();\r\n        }\r\n    }\r\n\r\n})();","(()=>{\r\n    if(document.querySelector('.almacen')){\r\n        const btntrasladoinvnetario = document.querySelector('#btntrasladoinvnetario') as HTMLInputElement;\r\n        const btnXCerrarTrasladoInvnetario = document.querySelector('#btnXCerrarTrasladoInvnetario') as HTMLButtonElement;\r\n        const miDialogoTrasladoInvnetario = document.querySelector('#miDialogoTrasladoInvnetario') as any;\r\n        const reinciarinv = document.querySelector('#reinciarinv') as HTMLButtonElement;\r\n        const miDialogoStock = document.querySelector('#miDialogoStock') as any;\r\n        const modalStock = document.querySelector('#modalStock') as HTMLElement;\r\n        const selectStockRapidoUndmedida = document.querySelector('#selectStockRapidoUndmedida') as HTMLSelectElement;\r\n        let amount = document.querySelector('#cantidadStockRapido') as HTMLInputElement; //input cantidad de modal de stock rapido\r\n\r\n        const miDialogoIngresarProduccion = document.querySelector('#miDialogoIngresarProduccion') as any;\r\n        const selectitemAproducir = document.querySelector('#itemAproducir') as HTMLSelectElement;\r\n        const btnsproduccion = document.querySelectorAll<HTMLButtonElement>('.btnproduccion');  //btns ingresar descontar ajustar produccion\r\n        const selectIngresarProduccionUnidadmedida = document.querySelector('#selectIngresarProduccionUnidadmedida') as HTMLSelectElement;\r\n        const amountProduccion = document.querySelector('#stockIngresarProduccion') as HTMLInputElement;  //input cantidad cuando se ingresa orden de produccion\r\n        let cantidadactual = 0, indiceFila=0, endponit:string='', factorC = 0, tipoelemento:string = '', idelemento:string = '', tablaStockRapido:HTMLElement, tablaInventarioSedes:HTMLTableElement;\r\n    \r\n        const sedes = document.querySelector('#sedes');\r\n\r\n        interface datosProducto { stock: string, precio_compra: string, precio_venta: string }\r\n\r\n        type conversionunidadesapi = {\r\n            id:string,\r\n            idproducto:string,\r\n            idsubproducto: string,\r\n            idunidadmedidabase: string,\r\n            idunidadmedidadestino: string,\r\n            nombreunidadbase: string,\r\n            nombreunidaddestino: string,\r\n            factorconversion: string,\r\n          };\r\n\r\n          type productosXsucursal = {\r\n            productoid:string,\r\n            subproductoid: string,\r\n            nombreproducto:string,\r\n            sucursalid: string,\r\n            sucursal: string,\r\n            stock: string,\r\n          };\r\n\r\n        let allproductsXsucursal:productosXsucursal[]=[], allConversionUnidades:conversionunidadesapi[] = [];\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/allConversionesUnidades\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas las conversiones de unidades\r\n                const respuesta = await fetch(url); \r\n                allConversionUnidades = await respuesta.json();\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n        //apertura de la venta modal para las opcionesde traslado de inventario\r\n        btntrasladoinvnetario.addEventListener('click', ()=>{\r\n            miDialogoTrasladoInvnetario.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        });\r\n\r\n        btnXCerrarTrasladoInvnetario.addEventListener('click', (e)=>{\r\n            miDialogoTrasladoInvnetario.close();\r\n            document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        });\r\n\r\n        reinciarinv.addEventListener('click', (e)=>{\r\n            Swal.fire({\r\n                customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n                icon: 'question',\r\n                title: 'Desea reiniciar el inventario a cero?',\r\n                text: \"Todos los productos e insumos del inventario se reiniciaran a cero.\",\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Si',\r\n                cancelButtonText: 'No',\r\n            }).then((result:any) => {\r\n                if (result.isConfirmed) {\r\n                    (async ()=>{\r\n                        try {\r\n                        const url = \"/admin/api/reiniciarinv\"; //llamado a la API REST y se trae las direcciones segun cliente elegido\r\n                        const respuesta = await fetch(url); \r\n                        const resultado = await respuesta.json();\r\n                        msjalertToast('success', '¡Éxito!', resultado);\r\n                        setTimeout(() => {\r\n                          window.location.reload();  \r\n                        }, 1200);\r\n                        } catch (error) {\r\n                            console.log(error);\r\n                        }\r\n                    })();\r\n                }\r\n            });\r\n        });\r\n\r\n\r\n        sedes?.addEventListener('change', (e:Event)=>{\r\n            if((e.target as HTMLInputElement).checked){\r\n                (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"grid\";\r\n                (async ()=>{\r\n                    try {\r\n                        const url = \"/admin/api/getStockproductosXsucursal\"; //llamado a la API REST en el controlador almacencontrolador para treaer todos los productos con su respectiva sucursal y stock\r\n                        const respuesta = await fetch(url); \r\n                        allproductsXsucursal = await respuesta.json();\r\n                        printstockXsucursal();\r\n                        (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n                    } catch (error) {\r\n                        console.log(error);\r\n                    }\r\n                })();\r\n            }\r\n        });\r\n\r\n\r\n        /////////////////////////////////////  SOTCK RAPIDO ////////////////////////////////////////\r\n        /*document.querySelector('#stockproducto')?.addEventListener('click', (e)=>{\r\n            if((e.target as HTMLInputElement).checked){\r\n                 tablaStockRapido = ($('#tablaStockRapido') as any).DataTable(configdatatables);\r\n            }\r\n        })*/\r\n        tablaStockRapido = ($('#tablaStockRapido') as any).DataTable(configdatatablesstockrapido);\r\n\r\n        document.querySelector('#tablaStockRapido')?.addEventListener(\"click\", (e:Event)=>{ //evento click sobre toda la tabla\r\n            let options:string = '';\r\n            const target = e.target as HTMLElement;\r\n\r\n           if(target.closest('.btnsproducto')){\r\n                idelemento = target.closest('.btnsproducto')!.id;\r\n                tipoelemento = '0'; //si es producto\r\n                cantidadactual = Number((target.closest('.btnsproducto') as HTMLElement).dataset.stock);\r\n                document.querySelector('#nombreItemstockrapido')!.textContent = (target.closest('.btnsproducto') as HTMLElement).dataset.nombre!;\r\n            }\r\n            if(target.closest('.btnssubproducto')){\r\n                idelemento = target.closest('.btnssubproducto')!.id;\r\n                tipoelemento = '1'; //si es un subproducto\r\n                cantidadactual = Number((target.closest('.btnssubproducto') as HTMLElement).dataset.stock);\r\n                document.querySelector('#nombreItemstockrapido')!.textContent = (target.closest('.btnssubproducto') as HTMLElement).dataset.nombre!;\r\n            }\r\n\r\n            while(selectStockRapidoUndmedida.firstChild)selectStockRapidoUndmedida.removeChild(selectStockRapidoUndmedida.firstChild);\r\n            if(tipoelemento == '0'){\r\n                const productounidades = allConversionUnidades.filter(x => x.idproducto == idelemento); \r\n                productounidades.forEach(u=>options+=`<option data-factor=\"${u.factorconversion}\" value=\"${u.idproducto}\" >${u.nombreunidaddestino}</option>`);\r\n                selectStockRapidoUndmedida.insertAdjacentHTML('afterbegin', options);\r\n            }\r\n            if(tipoelemento == '1'){\r\n                const subproductounidades = allConversionUnidades.filter(x => x.idsubproducto == idelemento); \r\n                subproductounidades.forEach(u=>options+=`<option data-factor=\"${u.factorconversion}\" value=\"${u.idsubproducto}\" >${u.nombreunidaddestino}</option>`);\r\n                selectStockRapidoUndmedida.insertAdjacentHTML('afterbegin', options);\r\n            }\r\n            \r\n            if((e.target as HTMLElement)?.classList.contains(\"descontarStock\")||(e.target as HTMLElement).parentElement?.classList.contains(\"descontarStock\"))descontarStock(e);\r\n            if((e.target as HTMLElement)?.classList.contains(\"aumentarStock\")||(e.target as HTMLElement).parentElement?.classList.contains(\"aumentarStock\"))aumentarStock(e);\r\n            if((e.target as HTMLElement)?.classList.contains(\"ajustarStock\")||(e.target as HTMLElement).parentElement?.classList.contains(\"ajustarStock\"))ajustarStock(e);\r\n        });\r\n\r\n        //EDITAR STOCK\r\n        function descontarStock(e:Event){\r\n            modalStock.textContent = \"Descontar cantidad a inventario\"\r\n            endponit = \"descontarstock\";\r\n            indiceFila = (tablaStockRapido as any).row((e.target as HTMLElement).closest('tr')).index();\r\n            miDialogoStock.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n\r\n        function aumentarStock(e:Event){\r\n            modalStock.textContent = \"Ingreasar cantidad a inventario\"\r\n            endponit = \"aumentarstock\";\r\n            indiceFila = (tablaStockRapido as any).row((e.target as HTMLElement).closest('tr')).index();\r\n            miDialogoStock.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n\r\n        function ajustarStock(e:Event){\r\n            modalStock.textContent = \"Ajustar cantidad a inventario\"\r\n            endponit = \"ajustarstock\";\r\n            indiceFila = (tablaStockRapido as any).row((e.target as HTMLElement).closest('tr')).index();\r\n            miDialogoStock.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n\r\n\r\n        document.querySelector('#formStock')?.addEventListener('submit', (e)=>{\r\n            e.preventDefault();\r\n            factorC = Number(selectStockRapidoUndmedida.options[selectStockRapidoUndmedida.selectedIndex].dataset.factor);\r\n            let info = (tablaStockRapido as any).page.info(), AmountItem:number = factorC*Number(amount.value);\r\n            \r\n            if(endponit == \"descontarstock\")cantidadactual = cantidadactual-AmountItem;\r\n            if(endponit == \"aumentarstock\")cantidadactual = cantidadactual+AmountItem;\r\n            if(endponit == \"ajustarstock\")cantidadactual = AmountItem;\r\n\r\n            (async ()=>{\r\n                const datos = new FormData();\r\n                datos.append('tipoitem', tipoelemento);\r\n                datos.append('iditem', idelemento);\r\n                datos.append('cantidad', AmountItem.toString());\r\n                try{\r\n                    const url = \"/admin/api/\"+endponit;  //asocia el producto con el sub producto en la tabla productos_sub\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                        msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                        ////// reset form ///////\r\n                        (document.querySelector('#formStock') as HTMLFormElement)?.reset();\r\n                        //actualizar fila\r\n                        //(tablaStockRapido as any).cell(indiceFila, 3).data(cantidadactual).draw();\r\n                        //(tablaStockRapido as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                        //actualiza tabla stock rapido\r\n                        actualizarStockRapido([resultado.item[0]], tipoelemento);\r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                    miDialogoStock.close();\r\n                    document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                }catch(error){\r\n                    console.log(error);\r\n                }\r\n            })();//cierre de async()\r\n        });\r\n\r\n\r\n    //////////////////////////// SOTCK POR SUCURSAL //////////////////////\r\n    function printstockXsucursal(){\r\n        const sucursales = [...new Set(allproductsXsucursal.map(d => d.sucursal))]; //lista unica de sucursales\r\n        \r\n        // 2. Reorganizar por producto\r\n        const productos: Record<string, { nombreproducto: string; stocks: Record<string, string> }> = {};\r\n        allproductsXsucursal.forEach(d => {\r\n            if(d.productoid){\r\n                if (!productos['p'+d.productoid]) { //si el obj no es creado se crea con el nombre del producto pero el stock vacio\r\n                    productos['p'+d.productoid] = { nombreproducto: d.nombreproducto, stocks: {} };\r\n                }\r\n                productos['p'+d.productoid].stocks[d.sucursal] = d.stock; //aqui se llena el stock, que es un obj y sus propiedades son las sedes\r\n            }\r\n            if(d.subproductoid){\r\n                if (!productos['s'+d.subproductoid]) { //si el obj no es creado se crea con el nombre del producto pero el stock vacio\r\n                    productos['s'+d.subproductoid] = { nombreproducto: 'S-'+d.nombreproducto, stocks: {} };\r\n                }\r\n                productos['s'+d.subproductoid].stocks[d.sucursal] = d.stock; //aqui se llena el stock, que es un obj y sus propiedades son las sedes\r\n            }\r\n        });\r\n\r\n        // 3. Columnas dinámicas\r\n        const columnas = [{ title: \"Producto\", data: \"nombreproducto\" }];\r\n        sucursales.forEach(s => {\r\n            columnas.push({ title: s, data: s });\r\n        });\r\n\r\n        // 4. Dataset\r\n        const dataset = Object.values(productos).map(prod => {\r\n            const fila: any = { nombreproducto: prod.nombreproducto };\r\n            sucursales.forEach(s => {\r\n                fila[s] = prod.stocks[s] ?? 0; //fila es un obj, se crea la propieadad con el nombre de la sucursal y se iguala al objeto stock copn propiedad sucursal.\r\n            });\r\n            return fila;\r\n        });\r\n\r\n        tablaInventarioSedes = ($('#tablaInventarioSedes') as any).DataTable({\r\n            data: dataset,\r\n            columns: columnas,\r\n            layout: {\r\n                topStart: {\r\n                    buttons: [\r\n                    {extend: 'copyHtml5', text: 'Copia'}, \r\n                    {extend: 'excelHtml5', title: 'InventarioXsede'}, \r\n                    {extend: 'pdfHtml5', title: 'InventarioXsede'}, \r\n                    {extend: 'print', title: 'InventarioXsede', text: 'Imprimir'},\r\n                    'colvis'\r\n                    ],\r\n                    pageLength: 'pageLength'\r\n                }\r\n            },\r\n            pageLength: 25,\r\n            paging: true,\r\n            lengthChange: true,\r\n            searching: true,\r\n            ordering: true,\r\n            info: true,\r\n            autoWidth: true,\r\n            responsive: true,\r\n            deferRender: true,\r\n            //retrieve: true,\r\n            processing: true,\r\n            language: {\r\n                search: 'Busqueda',\r\n                emptyTable: 'No Hay datos disponibles',\r\n                zeroRecords:    \"No se encontraron registros coincidentes\",\r\n                lengthMenu: '_MENU_ Entradas por pagina',\r\n                info: 'Mostrando 1 de _MAX_ registros',\r\n                infoEmpty: 'No hay entradas a mostrar',\r\n                infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n                paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n            },\r\n            destroy: true, // importante si recargas la tabla\r\n        });\r\n\r\n    }\r\n\r\n\r\n    ///////////////////////////// INGRESAR ORDEN DE PRODUCCION /////////////////////////////////\r\n        \r\n        //SELECT2 DE itemAproducir\r\n        ($('#itemAproducir') as any).select2({\r\n            maximumSelectionLength: 1,\r\n        });\r\n\r\n        ////// evento al select del producto a producir ////// \r\n        $(\"#itemAproducir\").on('change', (e)=>{\r\n            const idproducto = (e.target as HTMLOptionElement).value;\r\n            const selectedOption = $(\"#itemAproducir option:selected\");\r\n            if(idproducto){\r\n                const prodund = allConversionUnidades.filter(x =>x.idproducto == idproducto);\r\n                mostrarSelectUnidades(prodund);\r\n                let producto: datosProducto; //inicializamos el objeto de tipo interfaz \r\n                producto = {\r\n                    stock: selectedOption.data('stock'),\r\n                    precio_compra: selectedOption.data('precio_compra'),\r\n                    precio_venta: selectedOption.data('precio_venta')\r\n                }\r\n                mostrarInfoItem(producto);\r\n            }\r\n        });\r\n\r\n        /////////// CARGAR LAS UNIDADES DE MEDIDA EN EL SELECT unidadmedida  ////////////\r\n        function mostrarSelectUnidades(prodund:conversionunidadesapi[]):void{\r\n            while(selectIngresarProduccionUnidadmedida?.firstChild)selectIngresarProduccionUnidadmedida.removeChild(selectIngresarProduccionUnidadmedida?.firstChild);\r\n            prodund.forEach(und =>{\r\n              const option = document.createElement('option');\r\n              option.textContent = und.nombreunidaddestino;\r\n              option.value = und.id;  //und.id  =  es el id de la tabla conversionunidades\r\n              option.dataset.factor = und.factorconversion;\r\n              selectIngresarProduccionUnidadmedida.appendChild(option);\r\n            });\r\n        }\r\n\r\n        btnsproduccion.forEach((btnproduccion, index) =>{\r\n            btnproduccion.addEventListener('click', (e)=>{\r\n               if(selectitemAproducir.value){    \r\n                    document.querySelector('#nombreItemAProducir')!.textContent = selectitemAproducir.options[selectitemAproducir.selectedIndex].textContent;\r\n                    if(index === 0){\r\n                        endponit = \"aumentarstock\";\r\n                        document.querySelector('#modalIngresarProduccion')!.textContent = \"Ingreasar produccion a inventario\";\r\n                    }\r\n                    if(index === 1){\r\n                        endponit = \"descontarstock\";\r\n                        document.querySelector('#modalIngresarProduccion')!.textContent = \"Descontar catnidad de inventario\";\r\n                    }\r\n                    if(index === 2){\r\n                        endponit = \"ajustarstock\";\r\n                        document.querySelector('#modalIngresarProduccion')!.textContent = \"Ajustar cantidad de inventario\";\r\n                    }\r\n                    miDialogoIngresarProduccion.showModal();\r\n                    document.addEventListener(\"click\", cerrarDialogoExterno);\r\n                }\r\n            });\r\n        });\r\n\r\n\r\n        document.querySelector('#formIngresarProduccion')?.addEventListener('submit', (e)=>{\r\n            e.preventDefault();\r\n            factorC = Number(selectIngresarProduccionUnidadmedida.options[selectIngresarProduccionUnidadmedida.selectedIndex].dataset.factor);\r\n            let AmountItemProduccion:number = factorC*Number(amountProduccion.value);\r\n\r\n            (async ()=>{\r\n                const datos = new FormData();\r\n                datos.append('tipoitem', '0'); //0 = producto,  1 = subproducto\r\n                datos.append('iditem', selectitemAproducir.value);\r\n                datos.append('cantidad', AmountItemProduccion.toString());\r\n                datos.append('construccion', '1');  //se indica al backend que es construccion y se debe descontar sus insumos\r\n                try{\r\n                    const url = \"/admin/api/\"+endponit;  //endpoint = aumentarstock para produccion, asocia el producto con el sub producto en la tabla productos_sub\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                        msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                        ////// reset form ///////\r\n                        (document.querySelector('#formIngresarProduccion') as HTMLFormElement)?.reset();\r\n                        //mostrar contaidad actual\r\n                        mostrarInfoItem(resultado.item[0]); //producto\r\n                        //actualizar tabla stock rapido\r\n                        if(resultado.insumos !== undefined)actualizarStockRapido(resultado.insumos[0], '1'); //subproductos\r\n                        //actualizar el selecto de los productos/insumos a producir\r\n                        $(\"#itemAproducir option:selected\").data('stock', resultado.item[0].stock);\r\n                        \r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                    miDialogoIngresarProduccion.close();\r\n                    document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                }catch(error){\r\n                    console.log(error);\r\n                }\r\n            })();//cierre de async()\r\n        });\r\n\r\n\r\n        function mostrarInfoItem(producto:{stock:string, precio_compra:string, precio_venta:string}){\r\n            document.querySelector('#stock')!.textContent = Number(producto.stock).toLocaleString();\r\n            document.querySelector('#costoProduccion')!.textContent = \"$\"+Number(producto.precio_compra).toLocaleString();\r\n            document.querySelector('#precioVenta')!.textContent = \"$\"+Number(producto.precio_venta).toLocaleString();\r\n        }\r\n\r\n\r\n        function actualizarStockRapido(insumosProductos:{id:string, productoid:string, subproductoid:string, sucursalid:string, stock:string, stockminimo:string}[], tipoItem:string){\r\n            insumosProductos.forEach(element => {\r\n                (tablaStockRapido as any).rows().every(function (this: any){\r\n                    const rowNode = this.node() as HTMLTableRowElement;\r\n                    let id_element = element.subproductoid, idAttr = rowNode.getAttribute('data-idsubproducto');\r\n                    if(tipoItem == '0'){\r\n                        idAttr = rowNode.getAttribute('data-idproducto');\r\n                        id_element = element.productoid;\r\n                    }\r\n                    if (idAttr && idAttr === id_element){\r\n                        this.cell(this.index(), 3).data(`<div class=\"text-center px-3 py-4 rounded-lg\">${element.stock}</div>`);\r\n\r\n                        // Obtén el <td> real\r\n                        const td = (tablaStockRapido as any).cell(this.index(), 3).node() as HTMLTableCellElement;\r\n                        if(Number(element.stock) <= Number(element.stockminimo)){\r\n                            td.firstElementChild?.classList.remove('bg-cyan-50', 'text-cyan-600');\r\n                            td.firstElementChild?.classList.add('bg-red-50', 'text-red-800');\r\n                        }else{\r\n                            td.firstElementChild?.classList.remove('bg-red-50', 'text-red-800');\r\n                            td.firstElementChild?.classList.add('bg-cyan-50', 'text-cyan-600');\r\n                        }\r\n                    } \r\n                });\r\n            })\r\n        }\r\n\r\n\r\n        function cerrarDialogoExterno(event:Event) {\r\n            \r\n            if (event.target === miDialogoTrasladoInvnetario || event.target === btnXCerrarTrasladoInvnetario || event.target === miDialogoStock || event.target === miDialogoIngresarProduccion || (event.target as HTMLInputElement).value === 'salir') {\r\n                miDialogoStock.close();\r\n                miDialogoIngresarProduccion.close();\r\n                miDialogoTrasladoInvnetario.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();","(()=>{\r\n  if(document.querySelector('.categorias')){\r\n    const crearCategoria = document.querySelector('#crearCategoria');\r\n    const miDialogoCategoria = document.querySelector('#miDialogoCategoria') as any;\r\n    let indiceFila=0, control=0, tablaCategorias:HTMLElement;\r\n\r\n    type productsapi = {\r\n      id:string,\r\n      idcategoria: string,\r\n      nombre: string,\r\n      foto: string,\r\n      marca: string,\r\n      codigo: string,\r\n      descripcion: string,\r\n      peso: string,\r\n      medidas: string,\r\n      color: string,\r\n      funcion: string,\r\n      uso:string,\r\n      fabricante: string,\r\n      garantia: string,\r\n      stock: string,\r\n      categoria: string,\r\n      precio_compra: string,\r\n      precio_venta: string,\r\n      fecha_ingreso: string,\r\n      //idservicios:{idempleado:string, idservicio:string}[]\r\n    };\r\n\r\n    let products:productsapi[]=[], unproducto:productsapi;\r\n\r\n    //////////////////  TABLA //////////////////////\r\n    tablaCategorias = ($('#tablaCategorias') as any).DataTable(configdatatables);\r\n\r\n    crearCategoria?.addEventListener('click', (e):void=>{\r\n      control = 0;\r\n      limpiarformdialog();\r\n      document.querySelector('#modalCategoria')!.textContent = \"Crear categoria\";\r\n      (document.querySelector('#btnEditarCrearCategoria') as HTMLInputElement).value = \"Crear\";\r\n      miDialogoCategoria.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    document.querySelector('#tablaCategorias')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarCategoria\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarCategoria\"))editarCategoria(e);\r\n      if(target?.classList.contains(\"eliminarCategoria\")||target.parentElement?.classList.contains(\"eliminarCategoria\"))eliminarCategoria(e);\r\n    });\r\n\r\n    function editarCategoria(e:Event){\r\n      control = 1;\r\n      let idcategoria = (e.target as HTMLElement).parentElement?.id!;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idcategoria = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n      //(document.querySelector('#formCrearUpdateCategoria') as HTMLFormElement).action = \"/admin/almacen/actualizar_categoria\";\r\n      document.querySelector('#modalCategoria')!.textContent = \"Actualizar categoria\";\r\n      (document.querySelector('#btnEditarCrearCategoria') as HTMLInputElement)!.value = \"Actualizar\";\r\n      (document.querySelector('#idcategoria') as HTMLInputElement).value = idcategoria;\r\n      (document.querySelector('#categoria') as HTMLInputElement).value = ((e.target as HTMLElement).closest('.acciones-btns') as HTMLElement)?.dataset.categoria!; \r\n      indiceFila = (tablaCategorias as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoCategoria.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar categoria  //////////////////////\r\n    document.querySelector('#formCrearUpdateCategoria')?.addEventListener('submit', e=>{\r\n      if(control){\r\n        e.preventDefault();\r\n        var info = (tablaCategorias as any).page.info();\r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', $('#idcategoria').val() as string);\r\n          datos.append('nombre', $('#categoria').val()as string);\r\n          try {\r\n              const url = \"/admin/api/actualizar_categoria\";\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json(); \r\n              console.log(resultado); \r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                ///////// cambiar la fila completa, su contenido //////////\r\n                const datosActuales = (tablaCategorias as any).row(indiceFila+=info.start).data();\r\n                /*Nombre categoria*/datosActuales[1] = $('#categoria').val();\r\n                /*data-categoria*/datosActuales[3] = `<div class=\"acciones-btns\" id=\"${$('#idcategoria').val()}\" data-categoria=\"${$('#categoria').val()}\"><button class=\"btn-md btn-turquoise editarCategoria\"><i class=\"fa-solid fa-pen-to-square\"></i></button><button class=\"btn-md btn-red eliminarCategoria\"><i class=\"fa-solid fa-trash-can\"></i></button></div>`;//$('#categoria').val();\r\n                \r\n                (tablaCategorias as any).row(indiceFila).data(datosActuales).draw();\r\n                (tablaCategorias as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n              document.addEventListener(\"click\", cerrarDialogoExterno);\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n      } //fin if(control)\r\n    });\r\n\r\n    function eliminarCategoria(e:Event){\r\n      let idcategoria = (e.target as HTMLElement).parentElement!.id, info = (tablaCategorias as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idcategoria = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaCategorias as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar la categoria?',\r\n          text: \"La categoria sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idcategoria);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarCategoria\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();\r\n                      if(resultado.length || resultado.exito !== undefined){\r\n                        (tablaCategorias as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaCategorias as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateCategoria') as HTMLFormElement)?.reset();\r\n      (document.querySelector('#formCrearUpdateCategoria') as HTMLFormElement).action = \"/admin/almacen/crear_categoria\";\r\n      (document.querySelector('#idcategoria') as HTMLInputElement).value = '0';\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoCategoria || (event.target as HTMLInputElement).value === 'Salir' || (event.target as HTMLInputElement).value === 'Actualizar') {\r\n        miDialogoCategoria.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n  }\r\n\r\n})();","\r\n(()=>{\r\n    if(document.querySelector('.compras')){\r\n        const proveedor = document.querySelector('#proveedor') as HTMLSelectElement;\r\n        const impuesto = document.querySelector('#inputimpuesto') as HTMLInputElement;\r\n        const nfactura = document.querySelector('#nfactura') as HTMLInputElement;\r\n        const fecha = document.querySelector('#fecha') as HTMLDataElement;\r\n        const origenPago = document.querySelector('#origenPago') as HTMLSelectElement;\r\n        const origenCaja = document.querySelector('#origenCaja') as HTMLSelectElement;\r\n        const origenBanco = document.querySelector('#origenBanco') as HTMLSelectElement;\r\n        const formapago = document.querySelector('#formapago') as HTMLSelectElement;\r\n        const observacion = document.querySelector('#observacion') as HTMLInputElement;\r\n        const btnvaciar = document.querySelector('#btnvaciar');\r\n        const miDialogoVaciar = document.querySelector('#miDialogoVaciar') as any;\r\n        const miDialogoRegistrarcompra = document.querySelector('#miDialogoRegistrarcompra') as any;\r\n        const tablaCompras = document.querySelector('#tablaCompras tbody');\r\n\r\n        type conversionunidadesapi = {\r\n            id:string,\r\n            idproducto: string,\r\n            idsubproducto: string,\r\n            idunidadmedidabase: string,\r\n            idunidadmedidadestino: string,\r\n            nombreunidadbase: string,\r\n            nombreunidaddestino: string,\r\n            factorconversion: string,\r\n            //idservicios:{idempleado:string, idservicio:string}[]\r\n          };\r\n\r\n        let carrito:{iditem:string, idpx:string, idsx:string, tipo: string, nombreitem:string, unidad:string, cantidad: number, cantidadcomprado: number, factor: number, impuesto: number, valorunidad: number, subtotal: number, precio_compra: number, valorcompra: number}[]=[];\r\n        let allConversionUnidades:conversionunidadesapi[] = [];\r\n        let filteredData: {id:string, text:string, tipo:string, sku:string, unidadmedida:string}[];   //tipo = 0 es producto simple,  1 = subproducto\r\n\r\n\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/allConversionesUnidades\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas las conversiones de unidades\r\n                const respuesta = await fetch(url); \r\n                allConversionUnidades = await respuesta.json();\r\n                console.log(allConversionUnidades);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/totalitems\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas los productos simples y subproductos\r\n                const respuesta = await fetch(url); \r\n                const resultado:{id:string, nombre:string, tipoproducto:string, sku:string, unidadmedida:string}[] = await respuesta.json(); \r\n                filteredData = resultado.map(item => ({ id: item.id, text: item.nombre, tipo: item.tipoproducto??'1', sku: item.sku, unidadmedida: item.unidadmedida }));\r\n                activarselect2(filteredData);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n\r\n        impuesto?.addEventListener('input', ()=>resumen());\r\n\r\n        function activarselect2(filteredData:{id:string, text:string, tipo:string, sku:string, unidadmedida:string}[]){\r\n            ($('#articulo') as any).select2({ \r\n                data: filteredData,\r\n                placeholder: \"Selecciona un item\",\r\n                maximumSelectionLength: 1,\r\n                /*\r\n                templateResult: function (data:{id:string, text:string, tipo:string}) {\r\n                    // Personalizar cómo se muestra cada opción en el dropdown\r\n                    if (!data.id) { return data.text; }  // Si no hay id, solo mostrar el texto\r\n                    const html = `\r\n                        <div class=\"custom-option\">\r\n                            <span class=\"item-name\">${data.text}</span> \r\n                            <span class=\"item-type\">${data.tipo}</span>  <!-- Mostrar tipo adicional -->\r\n                        </div>`;\r\n                    return $(html);  // Devolver el HTML personalizado\r\n                }*/\r\n            });\r\n        }\r\n\r\n\r\n        //////////  ELEGIR ORIGEN DEL PAGO DE LA COMPRA, CAJA O BANCO ///////////\r\n        origenPago.addEventListener('change', (e:Event)=>{\r\n            if((e.target as HTMLOptionElement).value == '0'){ //0 = origen caja\r\n                document.querySelector('#divBanco')?.classList.add('hidden');\r\n                document.querySelector('#divBanco')?.removeAttribute(\"required\");\r\n            }else{  //1 = origen banco\r\n                document.querySelector('#divBanco')?.classList.remove('hidden');\r\n                document.querySelector('#divBanco')?.setAttribute(\"required\", \"\");\r\n            }\r\n        });\r\n\r\n\r\n        ////// EVENTO AL SELECT ARTICULOS O ITEMS PARA SELECCIONAR EL ITEM Y AÑADIR AL CARRITO ////// \r\n        $(\"#articulo\").on('change', (e)=>{\r\n            let datos = ($('#articulo') as any).select2('data')[0];\r\n            if(datos){\r\n                const index = carrito.findIndex(x=>x.iditem==datos.id&&x.tipo==datos.tipo);\r\n                if(index == -1){  //si el item seleccionado no existe en el carrito, agregarlo.\r\n                    const itemselected = filteredData.find(x=>x.id==datos.id&&x.tipo==datos.tipo)!; //products es el arreglo de todos los productos traido por api\r\n                    const item:{iditem: string, idpx: string, idsx: string, tipo: string, nombreitem: string, unidad: string, cantidad: number, cantidadcomprado: number, factor: number, impuesto: number, valorunidad: number, subtotal: number, precio_compra:number, valorcompra: number} = {\r\n                        iditem: itemselected?.id!,\r\n                        idpx: itemselected.tipo=='0'?itemselected.id:'NULL',\r\n                        idsx: itemselected.tipo=='1'?itemselected.id:'NULL',\r\n                        tipo: itemselected.tipo,  ////tipo = 0 es producto simple,  1 = subproducto\r\n                        nombreitem: itemselected.text,\r\n                        unidad: itemselected.unidadmedida,\r\n                        cantidad: 1,\r\n                        cantidadcomprado: 1,\r\n                        factor: 1,\r\n                        impuesto: 0,\r\n                        valorunidad: 0,\r\n                        subtotal: 0,\r\n                        precio_compra: 0,\r\n                        valorcompra: 0,\r\n                    }\r\n                    carrito = [...carrito, item];\r\n                    printItemTable(datos.id, datos.tipo, datos.unidadmedida);\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        function printItemTable(id:string, tipo:string, unidadmedida:string){\r\n            let options = `<option data-factor=\"1\" value=\"\" >${unidadmedida}</option>`;\r\n            const unItem = filteredData.find(x=>x.id==id&&x.tipo==tipo)!;\r\n            if(tipo=='1'){   //si es un subproducto\r\n                options = \"\";\r\n                const subproductounidades = allConversionUnidades.filter(x => x.idsubproducto == id); \r\n                subproductounidades.forEach(u=>options+=`<option data-factor=\"${u.factorconversion}\" value=\"${u.idsubproducto}\" >${u.nombreunidaddestino}</option>`);\r\n            }\r\n            if(tipo=='0'){\r\n                options = \"\";\r\n                const productounidades = allConversionUnidades.filter(x => x.idproducto == id); \r\n                productounidades.forEach(u=>options+=`<option data-factor=\"${u.factorconversion}\" value=\"${u.idproducto}\" >${u.nombreunidaddestino}</option>`);\r\n            }\r\n            const tr = document.createElement('TR');\r\n            tr.classList.add('itemselect');\r\n            tr.dataset.id = `${id}`;\r\n            tr.dataset.tipo = `${tipo}`;\r\n            tr.insertAdjacentHTML('afterbegin', `<td class=\"!px-0 !py-2 text-xl text-gray-500 leading-5\">${unItem?.text}</td> \r\n            <td class=\"!p-2 text-xl text-gray-500 leading-5\">\r\n                <select class=\"formulario__select selectunidad\">\r\n                    ${options}  \r\n                </select>\r\n            </td>\r\n            <td class=\"!px-0 !py-2\"><div class=\"flex\"><button type=\"button\"><span class=\"menos material-symbols-outlined\">remove</span></button><input type=\"text\" class=\"inputcantidad w-20 px-2 text-center\" value=\"1\" oninput=\"this.value = parseInt(this.value.replace(/[,.]/g, '')||1)\"><button type=\"button\"><span class=\"mas material-symbols-outlined\">add</span></button></div></td>\r\n            <td class=\"!p-2 text-xl text-gray-500 leading-5\"><input type=\"text\" placeholder=\"Ingresa Valor Total Producto\" class=\"inputcompra text-base sm:text-lg md:text-xl lg:text-2xl placeholder:text-sm sm:placeholder:text-base md:placeholder:text-lg lg:placeholder:text-xl bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:border-indigo-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white h-14 focus:outline-none focus:ring-1\" value=\"\" oninput=\"this.value = parseInt(this.value.replace(/[,.]/g, '')||0)\"></td>\r\n            <td class=\"accionestd\"><div class=\"acciones-btns\"><button class=\"btn-md btn-red eliminarItem\"><i class=\"fa-solid fa-trash-can\"></i></button></div></td>`);\r\n            tablaCompras?.appendChild(tr);\r\n        }\r\n        \r\n\r\n        //////////////////////////////////// evento a la tabla de los productos seleccionados  ///////////////////////////////////\r\n        tablaCompras?.addEventListener('click', (e:Event)=>{\r\n            const elementItem = (e.target as HTMLElement)?.closest('.itemselect'); //seleccionamos el tr de la tabla\r\n            const iditem = (elementItem as HTMLElement).dataset.id!;\r\n            const tipoitem = (elementItem as HTMLElement).dataset.tipo!;\r\n\r\n            const itemCarrito = carrito.find(x=>x.iditem==iditem&&x.tipo==tipoitem)!;\r\n\r\n            if((e.target as HTMLElement).classList.contains('selectunidad')){\r\n                if((e.target as HTMLElement).dataset.event != \"eventSelect\"){\r\n                    e.target?.addEventListener('change', (e:Event)=>{\r\n                        const unit = e.target as HTMLSelectElement;\r\n                        itemCarrito.factor = Number(unit.options[unit.selectedIndex].dataset.factor);\r\n                    });\r\n                    (e.target as HTMLElement).dataset.event = \"eventSelect\"; //se marca al input que ya tiene evento añadido\r\n                }\r\n            }\r\n            \r\n            if((e.target as HTMLElement).classList.contains('menos')){\r\n                itemCarrito.cantidadcomprado--;\r\n                if(itemCarrito.cantidadcomprado<0)itemCarrito.cantidadcomprado = 0;\r\n            }\r\n\r\n            if((e.target as HTMLElement).classList.contains('inputcantidad')){\r\n                if((e.target as HTMLElement).dataset.event != \"eventInput\"){\r\n                    e.target?.addEventListener('input', (e:Event)=>{\r\n                        itemCarrito.cantidadcomprado = Number((e.target as HTMLInputElement).value);\r\n                        itemCarrito.cantidad = itemCarrito.cantidadcomprado*itemCarrito.factor;\r\n                    });\r\n                    (e.target as HTMLElement).dataset.event = \"eventInput\"; //se marca al input que ya tiene evento añadido\r\n                }\r\n            }\r\n\r\n            if((e.target as HTMLElement).classList.contains('mas'))itemCarrito.cantidadcomprado++;\r\n            \r\n            //////// INPUT CANTIDAD DE LA TABLA DE ITEMS DE COMPRA, SE ACTUALIZA CADA VEZ QUE SE DE CLICK EN MENOS O MAS\r\n            (tablaCompras?.querySelector(`TR[data-id=\"${iditem}\"][data-tipo=\"${tipoitem}\"] .inputcantidad`) as HTMLInputElement).value = itemCarrito?.cantidadcomprado+'';\r\n\r\n            /////// EVENTO AL INPUT VALOR DE COMPRA DE LA TABLA DE ITEMS DE COMPRA  ///////\r\n            if((e.target as HTMLElement).classList.contains('inputcompra')){\r\n                if((e.target as HTMLElement).dataset.event != \"eventInput\"){\r\n                    e.target?.addEventListener('input', (e:Event)=>{\r\n                        itemCarrito.valorcompra = Number((e.target as HTMLInputElement).value);\r\n                        itemCarrito.precio_compra = itemCarrito.valorcompra/itemCarrito.cantidad;\r\n                        resumen();\r\n                    });\r\n                    (e.target as HTMLElement).dataset.event = \"eventInput\"; //se marca al input que ya tiene evento añadido\r\n                }\r\n            }\r\n\r\n            if((e.target as HTMLElement).classList.contains('eliminarItem') || (e.target as HTMLElement).tagName == \"I\"){\r\n                carrito = carrito.filter(x=> {\r\n                    if(x.iditem==iditem){\r\n                        if(x.tipo==tipoitem){\r\n                            return false;\r\n                        }else{\r\n                            return true;\r\n                        }\r\n                    }else{\r\n                        return true;\r\n                    }\r\n                });\r\n                tablaCompras?.querySelector(`TR[data-id=\"${iditem}\"][data-tipo=\"${tipoitem}\"]`)?.remove();\r\n                resumen();\r\n            }\r\n\r\n            itemCarrito.cantidad = itemCarrito.cantidadcomprado*itemCarrito.factor;\r\n        });\r\n\r\n\r\n        btnvaciar?.addEventListener('click', ()=>{\r\n            if(carrito.length){\r\n              miDialogoVaciar.showModal();\r\n              document.addEventListener(\"click\", cerrarDialogoExterno);\r\n            }\r\n        });\r\n\r\n        document.querySelector('#formComprar')?.addEventListener('submit', e=>{\r\n            e.preventDefault();\r\n            miDialogoRegistrarcompra.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        });\r\n\r\n  \r\n        async function procesarpedido(estado:string){\r\n            const datos = new FormData();\r\n            datos.append('idproveedor', proveedor.options[proveedor.selectedIndex].value);\r\n            datos.append('idformapago', formapago.options[formapago.selectedIndex].value);\r\n            datos.append('idorigencaja', origenCaja.options[origenCaja.selectedIndex].value);\r\n            datos.append('idorigenbanco', origenBanco.options[origenBanco.selectedIndex].value);\r\n            datos.append('nombreproveedor', proveedor.options[proveedor.selectedIndex].textContent!);\r\n            datos.append('formapago', formapago.options[formapago.selectedIndex].text);\r\n            datos.append('nfactura', nfactura.value);\r\n            datos.append('impuesto', impuesto.value);\r\n            datos.append('origenpago', origenPago.options[origenPago.selectedIndex].value); //0 = si el origen viene de la caja,  1 = banco\r\n            datos.append('nombreorigenpago', origenPago.options[origenPago.selectedIndex].textContent+''); //caja o banco\r\n            datos.append('nombreorigencaja', origenCaja.options[origenCaja.selectedIndex].textContent+'');\r\n            datos.append('nombreorigenbanco', origenBanco.options[origenBanco.selectedIndex].value?origenBanco.options[origenBanco.selectedIndex].textContent+'':'');\r\n            datos.append('cantidaditems', carrito.reduce((total, item)=>item.cantidad+total, 0)+'');\r\n            datos.append('observacion', observacion.value);\r\n            datos.append('estado', estado);\r\n            datos.append('subtotal', carrito.reduce((total, item)=>item.valorcompra+total, 0)+'');\r\n            datos.append('valortotal', carrito.reduce((total, item)=>item.valorcompra+total, 0)+'');\r\n            datos.append('fechacompra', fecha.value);\r\n            datos.append('carrito', JSON.stringify(carrito));  ////arreglo de objetos de producto simple y subproducto\r\n            datos.append('subID', JSON.stringify(carrito.map(item=>{if(item.idsx){return item.idsx}}))); //envia solo los id de los subproductos\r\n            try {\r\n                const url = \"/admin/api/registrarCompra\";  //va al controlador ventascontrolador\r\n                const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                const resultado = await respuesta.json();\r\n                if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                /////// reinciar campos de la compra\r\n                vaciarcompra();\r\n                (document.querySelector('#formComprar') as HTMLFormElement)?.reset();\r\n                }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        function validarValorCompra():boolean{\r\n            return carrito.some(item=>Number.isNaN(item.valorcompra)||item.valorcompra==0);\r\n        }\r\n\r\n        function resumen():void{\r\n            document.querySelector('#impuesto')!.textContent = '% '+impuesto.value;\r\n            document.querySelector('#total')!.textContent = '$ '+carrito.reduce((total, item)=>item.valorcompra+total, 0).toLocaleString()+'';\r\n        \r\n        }\r\n\r\n        function vaciarcompra():void\r\n        {\r\n            carrito.length = 0;\r\n            while(tablaCompras?.firstChild)tablaCompras.removeChild(tablaCompras?.firstChild);\r\n            document.querySelector('#impuesto')!.textContent = '% 0';\r\n            document.querySelector('#total')!.textContent = '$ 0';\r\n        }\r\n\r\n        function cerrarDialogoExterno(event:Event) {\r\n            const f = event.target;\r\n            if (f === miDialogoVaciar || f === miDialogoRegistrarcompra || (f as HTMLInputElement).closest('.novaciar') || (f as HTMLInputElement).closest('.sivaciar') || (f as HTMLInputElement).closest('.nocomprar') || (f as HTMLInputElement).closest('.sicomprar')) {\r\n              miDialogoVaciar.close();\r\n              miDialogoRegistrarcompra.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n              if((f as HTMLInputElement).closest('.sicomprar')){\r\n                if(!validarValorCompra()){\r\n                    procesarpedido('paga');\r\n                }else{\r\n                    msjalertToast('error', '¡Error!', 'Verifica el valor de compra de la lista de productos');\r\n                }\r\n              }\r\n              if((f as HTMLInputElement).closest('.sivaciar'))vaciarcompra();\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n})();","(()=>{\r\n    \r\n    if(document.querySelector('.ensamblaje')){\r\n        const listaSubproductos = document.querySelector('.listaSubproductos');\r\n        //const subproducto:HTMLSelectElement = document.querySelector('#subproducto')!;\r\n        const selectUnidadMedida = document.querySelector('#unidadmedida')! as HTMLSelectElement;\r\n        let amount = document.querySelector('#cantidad') as HTMLInputElement; //input cantidad\r\n\r\n        type conversionunidadesapi = {\r\n            id:string,\r\n            idsubproducto: string,\r\n            idunidadmedidabase: string,\r\n            idunidadmedidadestino: string,\r\n            nombreunidadbase: string,\r\n            nombreunidaddestino: string,\r\n            factorconversion: string,\r\n            //idservicios:{idempleado:string, idservicio:string}[]\r\n          };\r\n\r\n        let allConversionUnidades:conversionunidadesapi[] = [], factorC = 0;\r\n\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/allConversionesUnidades\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas las conversiones de unidades\r\n                const respuesta = await fetch(url); \r\n                allConversionUnidades = await respuesta.json(); \r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n        \r\n        ($('#subproducto') as any).select2({\r\n            maximumSelectionLength: 1,\r\n        });\r\n\r\n\r\n        ////// EVENTO AL SUBPRODUCTO PARA CARGAR LAS UNIDADES DE MEDIDA EQUIVALENTES ////// \r\n        $(\"#subproducto\").on('change', (e)=>{\r\n            const idsub = (e.target as HTMLOptionElement).value;\r\n            const subund = allConversionUnidades.filter(x =>x.idsubproducto == idsub);\r\n            mostrarSelectUnidades(subund);\r\n        });\r\n\r\n        /////////// CARGAR LAS UNIDADES DE MEDIDA EN EL SELECT unidadmedida  ////////////\r\n        function mostrarSelectUnidades(subund:conversionunidadesapi[]):void{\r\n            while(selectUnidadMedida?.firstChild)selectUnidadMedida.removeChild(selectUnidadMedida?.firstChild);\r\n            subund.forEach(und =>{\r\n              const option = document.createElement('option');\r\n              option.textContent = und.nombreunidaddestino;\r\n              option.value = und.id;  //und.id  =  es el id de la tabla conversionunidades\r\n              //option.dataset.idunidadmedidabase = und.idunidadmedidabase;\r\n              //option.dataset.nombreunidadbase = und.nombreunidadbase;\r\n              selectUnidadMedida.appendChild(option);\r\n            });\r\n            calcularFactor();\r\n        }\r\n\r\n        ////////// EVENTO AL SELECT DE UNIDAD DE MEDIDA ///////////\r\n        selectUnidadMedida.addEventListener('change', calcularFactor);\r\n\r\n        (document.querySelector('#cantidad') as HTMLInputElement).addEventListener('input', (e:Event)=>{\r\n            calcularFactor();\r\n        });\r\n\r\n        function calcularFactor():void{\r\n            const idConversionUnidad:string|undefined = selectUnidadMedida.options[selectUnidadMedida.selectedIndex]?.value;\r\n            const reg = allConversionUnidades.find(x=>x.id == idConversionUnidad);\r\n            factorC = Number(reg?.factorconversion);\r\n        }\r\n\r\n        //////////////  EVENTO AL INPUT RENDIMIENTO ESTANDAR /////////////////\r\n        document.querySelector('#rendimientoestandar')?.addEventListener('input', (e:Event)=>{\r\n            const inputRendimiendoEstandar = (e.target as HTMLInputElement);\r\n            (async ()=>{ \r\n                const datos = new FormData();\r\n                datos.append('id', (document.querySelector('#idproducto') as HTMLInputElement).value);\r\n                datos.append('rendimientoestandar', inputRendimiendoEstandar.value);\r\n                try {\r\n                    const url = \"/admin/api/setrendimientoestandar\";\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                        inputRendimiendoEstandar.style.color = \"#02db02\";\r\n                        inputRendimiendoEstandar.style.fontWeight = \"500\";\r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            })();\r\n        \r\n        });\r\n\r\n        ///////////////// EVENTO AL FORMULARIO ASOCIAR SUBPRODUCTO //////////////////\r\n        document.querySelector('#formAddSubproducto')?.addEventListener('submit', (e)=>{\r\n            e.preventDefault();\r\n            const subproducto = $('#subproducto').find('option:selected');\r\n            const unidadmedida:string = $('#unidadmedida').find('option:selected').text();\r\n            let AmountSubpx:number = factorC*Number(amount.value);\r\n            (async ()=>{ \r\n                const datos = new FormData();\r\n                datos.append('id_producto', (document.querySelector('#idproducto') as HTMLInputElement).value);\r\n                datos.append('id_subproducto', $('#subproducto').val()as string);\r\n                datos.append('cantidadsubproducto', AmountSubpx.toString());\r\n                datos.append('costo', (Number(subproducto.data('costo'))*AmountSubpx)+'');\r\n                try {\r\n                    const url = \"/admin/api/ensamblar\";  //asocia el producto con el sub producto en la tabla productos_sub\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                      msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                        /////validar si es el mismo subproducto, y actualizar \r\n                        validarSubproducto($('#subproducto').val()as string, unidadmedida, subproducto.data('subproducto'));\r\n                        ////// reset form ///////\r\n                        ($('#subproducto') as any).val([]).trigger('change');\r\n                        //$(`#subproducto option[value=\"${$('#subproducto').val()}\"]`).remove();\r\n                        (document.querySelector('#formAddSubproducto') as HTMLFormElement)?.reset();\r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            })();//cierre de async()\r\n        });\r\n\r\n\r\n        function validarSubproducto(idsubproducto:string, unidadmedida:string, subproducto:string){\r\n            const sub = document.querySelector(`.listaSubproductos div[id=\"${idsubproducto}\"]`);\r\n            if(sub){\r\n                sub.querySelector('strong')!.textContent = amount.value+' '+unidadmedida;\r\n            }else{\r\n                listaSubproductos?.insertAdjacentHTML('beforeend', `\r\n                <div id=\"${idsubproducto}\" class=\"mb-4 flex items-center justify-between p-4 text-blue-600 bg-blue-100 rounded-lg shadow-md shadow-blue-500/30\" role=\"alert\">\r\n                    <p class=\"m-0\"><strong>${amount.value} ${unidadmedida}</strong>.  ${subproducto}</p>\r\n                    <button type=\"button\"><span id=\"${idsubproducto}\" class=\"material-symbols-outlined\">cancel</span></button>\r\n                </div>`\r\n                );\r\n            }\r\n        }\r\n\r\n\r\n        listaSubproductos?.addEventListener('click', (e:Event)=>{\r\n            const btn = (e.target as HTMLSpanElement);\r\n            if(btn.tagName == \"SPAN\")desasociarSubproducto((document.querySelector('#idproducto') as HTMLInputElement).value, btn.id);\r\n        });\r\n\r\n\r\n        function desasociarSubproducto(idproducto:string, idsubproducto:string){\r\n            const sub = document.querySelector(`.listaSubproductos div[id=\"${idsubproducto}\"]`);\r\n            (async ()=>{\r\n                try {\r\n                  const url = \"/admin/api/desasociarsubproducto?idproducto=\"+idproducto+\"&idsubproducto=\"+idsubproducto; //llamado a la API REST para desasociar subproducto del producto principal\r\n                  const respuesta = await fetch(url); \r\n                  const resultado = await respuesta.json();\r\n                  if(resultado.exito !== undefined){\r\n                    sub?.remove();\r\n                    msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                  }else{\r\n                    msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                  }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            })();\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();","(():void=>{\r\n  if(document.querySelector('.gestionproveedores')){\r\n    const crearProveedor = document.querySelector('#crearProveedor') as HTMLButtonElement;\r\n    const miDialogoProveedor = document.querySelector('#miDialogoProveedor') as any;\r\n\r\n    let indiceFila=0, control=0, tablaProveedores:HTMLElement;\r\n\r\n    type proveedoresapi = {\r\n        id:string,\r\n        nit: string,\r\n        nombre: string,\r\n        telefono: string,\r\n        email: string,\r\n        direccion: string,\r\n        pais: string,\r\n        ciudad: string,\r\n        created_at: string\r\n      };\r\n  \r\n      let proveedores:proveedoresapi[]=[], unproveedor:proveedoresapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allproveedores\"; //llamado a la API REST y se trae todos los proveedores\r\n            const respuesta = await fetch(url); \r\n            proveedores = await respuesta.json(); \r\n            console.log(proveedores);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaProveedores = ($('#tablaProveedores') as any).DataTable(configdatatables);\r\n\r\n    crearProveedor.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalProveedor')!.textContent = \"Crear proveedor\";\r\n        (document.querySelector('#btnEditarCrearProveedor') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoProveedor.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaProveedores')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarProveedor\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarProveedor\"))editarProveedor(e);\r\n      if(target?.classList.contains(\"eliminarProveedor\")||target.parentElement?.classList.contains(\"eliminarProveedor\"))eliminarProveedor(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar proveedor  //////////////////////\r\n    function editarProveedor(e:Event){\r\n      let idproveedor = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idproveedor = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalProveedor')!.textContent = \"Actualizar proveedor\";\r\n      (document.querySelector('#btnEditarCrearProveedor') as HTMLInputElement)!.value = \"Actualizar\";\r\n      \r\n      unproveedor = proveedores.find(x => x.id==idproveedor); //me trae a la proveedor seleccionada\r\n      (document.querySelector('#nit')as HTMLInputElement).value = unproveedor?.nit!;\r\n      (document.querySelector('#nombreProveedor')as HTMLInputElement).value = unproveedor?.nombre!;\r\n      \r\n      indiceFila = (tablaProveedores as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoProveedor.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar proveedor  //////////////////////\r\n    document.querySelector('#formCrearUpdateProveedor')?.addEventListener('submit', e=>{\r\n      let urlApi = \"crearProveedor\";\r\n      if(control)urlApi = \"actualizarProveedor\";\r\n\r\n        e.preventDefault();\r\n        var info = (tablaProveedores as any).page.info();\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unproveedor?.id?unproveedor?.id:'');\r\n          datos.append('nit', $('#nit').val()as string);\r\n          datos.append('nombre', $('#nombreProveedor').val()as string);\r\n          try {\r\n              const url = \"/admin/api/\"+urlApi;\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                miDialogoProveedor.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                if(!control){ //si es crear registro\r\n                  /// actualizar el arregle de los proveedores ///\r\n                  proveedores = [...proveedores, resultado.proveedor];\r\n                  (tablaProveedores as any).row.add([\r\n                      (tablaProveedores as any).rows().count() + 1,\r\n                      resultado.proveedor.nit,\r\n                      resultado.proveedor.nombre,\r\n                      resultado.proveedor.created_at,\r\n                      `<div class=\"acciones-btns\" id=\"${resultado.proveedor.id}\" data-proveedor=\"${resultado.proveedor.nombre}\">\r\n                          <button class=\"btn-md btn-turquoise editarProveedor\"><i class=\"fa-solid fa-pen-to-square\"></i></button>\r\n                          <button class=\"btn-md btn-red eliminarProveedor\"><i class=\"fa-solid fa-trash-can\"></i></button>\r\n                      </div>`\r\n                  ]).draw(false); // draw(false) evita recargar toda la tabla\r\n                }else{ //si es actualizar\r\n                  /// actualizar el arregle de proveedores ///\r\n                  proveedores.forEach(a=>{if(a.id == unproveedor?.id)a = Object.assign(a, resultado.proveedor[0]);});\r\n                  const datosActuales = (tablaProveedores as any).row(indiceFila+=info.start).data();\r\n                  /*NIT*/       datosActuales[1] = resultado.proveedor[0].nit;\r\n                  /*PROVEEDOR*/ datosActuales[2] = resultado.proveedor[0].nombre;\r\n                  (tablaProveedores as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaProveedores as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar proveedor  //////////////////////\r\n    function eliminarProveedor(e:Event){\r\n      let idproveedor = (e.target as HTMLElement).parentElement!.id, info = (tablaProveedores as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idproveedor = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaProveedores as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar el proveedor?',\r\n          text: \"el proveedor sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idproveedor);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarProveedor\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaProveedores as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaProveedores as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoProveedor || (event.target as HTMLInputElement).value === 'Salir') {\r\n          miDialogoProveedor.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateProveedor') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","(()=>{\r\n  if(document.querySelector('.productos')){\r\n    const crearProducto = document.querySelector('#crearProducto');\r\n    const miDialogoProducto = document.querySelector('#miDialogoProducto') as any;\r\n    const inputupImage = document.querySelector('#upImage') as HTMLInputElement;  //input para cargar el archivo imagen\r\n    const btncustomUpImage = document.querySelector('#customUpImage');\r\n    const imginputfile = document.querySelector('#imginputfile') as HTMLImageElement;  //img\r\n    const tipoproducto = document.querySelector('#tipoproducto') as HTMLSelectElement;\r\n    let indiceFila=0, control=0, tablaProductos:HTMLElement;\r\n    \r\n\r\n    type productsapi = {\r\n      id:string,\r\n      idcategoria: string,\r\n      idunidadmedida: string,\r\n      nombre: string,\r\n      foto: string,\r\n      impuesto: string,\r\n      marca: string,\r\n      tipoproducto: string,\r\n      tipoproduccion: string,\r\n      sku: string,\r\n      unidadmedida: string;\r\n      descripcion: string,\r\n      peso: string,\r\n      medidas: string,\r\n      color: string,\r\n      funcion: string,\r\n      uso:string,\r\n      fabricante: string,\r\n      garantia: string,\r\n      stock: string,\r\n      stockminimo: string,\r\n      categoria: string,\r\n      precio_compra: string,\r\n      precio_venta: string,\r\n      fecha_ingreso: string,\r\n      //idservicios:{idempleado:string, idservicio:string}[]\r\n    };\r\n\r\n    let products:productsapi[]=[], unproducto:productsapi;\r\n\r\n    (async ()=>{\r\n      try {\r\n          const url = \"/admin/api/allproducts\"; //llamado a la API REST y se trae todos los productos\r\n          const respuesta = await fetch(url); \r\n          products = await respuesta.json(); \r\n          console.log(products);\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n    })();\r\n\r\n    const divAlert = document.querySelector('.divmsjalerta0') as HTMLElement;\r\n    if(divAlert)borrarMsjAlert(divAlert);\r\n\r\n    ///////// Habilita el select precio de compra, y deshabilita el select de tipo de produccion si es producto simple, si es compuesto lo deshabilita y habilita el select de tipo de produccion\r\n    tipoproducto?.addEventListener('change', (e:Event)=>{\r\n      const targetDom = e.target as HTMLSelectElement;\r\n      const preciocompra = document.querySelector('.preciocompra') as HTMLElement;\r\n      const stock = document.querySelector('.stock') as HTMLElement;\r\n      const habtipoproduccion = document.querySelector('.habtipoproduccion') as HTMLElement;\r\n      if(targetDom.value == '0'){  //  0 = simple\r\n        stock.style.display = 'flex';\r\n        preciocompra.style.display = 'flex';\r\n        habtipoproduccion.style.display = \"none\";\r\n        document.querySelector('#preciocompra')?.setAttribute(\"required\", \"\");\r\n        document.querySelector('#tipoproduccion')?.removeAttribute(\"required\");\r\n      }\r\n      else{\r\n        stock.style.display = 'none';\r\n        preciocompra.style.display = 'none';\r\n        habtipoproduccion.style.display = \"flex\";\r\n        document.querySelector('#preciocompra')?.removeAttribute(\"required\");\r\n        document.querySelector('#tipoproduccion')?.setAttribute(\"required\", \"\");\r\n      }\r\n    });\r\n\r\n    //////////////////  TABLA //////////////////////\r\n    tablaProductos = ($('#tablaProductos') as any).DataTable(configdatatables);\r\n\r\n    //btn para crear producto\r\n    crearProducto?.addEventListener('click', (e):void=>{\r\n      control = 0;\r\n      limpiarformdialog();\r\n      document.querySelector('#modalProducto')!.textContent = \"Crear producto\";\r\n      (document.querySelector('#btnEditarCrearProducto') as HTMLInputElement).value = \"Crear\";\r\n      (document.querySelector('.stock')as HTMLInputElement).style.display = \"block\";\r\n      (document.querySelector('.preciocompra')as HTMLInputElement).style.display = \"block\";\r\n      miDialogoProducto.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    //evento a la tabla\r\n    document.querySelector('#tablaProductos')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarProductos\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarProductos\"))editarProductos(e);\r\n      if(target?.classList.contains(\"bloquearProductos\")||target.parentElement?.classList.contains(\"bloquearProductos\"))bloquearProductos(e);\r\n      if(target?.classList.contains(\"eliminarProductos\")||target.parentElement?.classList.contains(\"eliminarProductos\"))eliminarProductos(e);\r\n    });\r\n\r\n    function editarProductos(e:Event){\r\n      let idproducto = (e.target as HTMLElement).parentElement?.id!;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idproducto = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n      control = 1;\r\n      document.querySelector('#modalProducto')!.textContent = \"Actualizar producto\";\r\n      (document.querySelector('#btnEditarCrearProducto') as HTMLInputElement)!.value = \"Actualizar\";\r\n      unproducto = products.find(x=>x.id === idproducto)!; //obtengo el producto.\r\n      $('#categoria').val(unproducto?.idcategoria??'');\r\n      (document.querySelector('#nombre')as HTMLInputElement).value = unproducto?.nombre!;\r\n      $('#tipoproducto').val(unproducto?.tipoproducto??'0');  //0 = simple,  1 = compuesto\r\n      $('#idunidadmedida').val(unproducto?.idunidadmedida??'1');\r\n      (document.querySelector('.stock')as HTMLInputElement).style.display = \"block\";\r\n      (document.querySelector('.preciocompra')as HTMLInputElement).style.display = \"block\";\r\n      (document.querySelector('.habtipoproduccion') as HTMLElement).style.display = \"none\";\r\n      if(unproducto?.tipoproducto == '1'){\r\n        (document.querySelector('.stock')as HTMLInputElement).style.display = \"none\";\r\n        (document.querySelector('.preciocompra')as HTMLInputElement).style.display = \"none\";\r\n        (document.querySelector('.habtipoproduccion') as HTMLElement).style.display = \"block\";\r\n        $('#tipoproduccion').val(unproducto.tipoproduccion);\r\n      }\r\n      (document.querySelector('#stock')as HTMLInputElement).value = unproducto?.stock??'';\r\n      (document.querySelector('#preciocompra')as HTMLInputElement).value = unproducto?.precio_compra??'';\r\n      (document.querySelector('#precioventa')as HTMLInputElement).value = unproducto?.precio_venta??'';\r\n      (document.querySelector('#sku')as HTMLInputElement).value = unproducto?.sku??'';\r\n      (document.querySelector('#impuesto')as HTMLInputElement).value = unproducto?.impuesto??'';\r\n      (document.querySelector('#stockminimo')as HTMLInputElement).value = unproducto?.stockminimo??'';\r\n      imginputfile.src = \"/build/img/\"+unproducto?.foto;\r\n      indiceFila = (tablaProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoProducto.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar producto  //////////////////////\r\n    document.querySelector('#formCrearUpdateProducto')?.addEventListener('submit', e=>{\r\n      if(control){\r\n        e.preventDefault();\r\n        var imgFile:(string|File), info = (tablaProductos as any).page.info();\r\n        imgFile=unproducto.foto;\r\n        if(!imginputfile.src.includes(unproducto.foto)){ //se lee la etiqueta img para cambio de imagen\r\n          imgFile = ((e.target as HTMLFormElement).elements.namedItem(\"upImage\") as HTMLInputElement).files?.[0]!; //obtengo el archivo\r\n          if(imgFile){\r\n            if(imgFile.type!==\"image/png\"&&imgFile.type!==\"image/jpeg\"){\r\n              msjAlert('error', 'No es un formato valido para la foto', (document.querySelector('#divmsjalerta1') as HTMLElement));\r\n              return;\r\n            }\r\n            if(imgFile.size>550000){ //si es mayor a 550KB\r\n              msjAlert('error', 'La imagen no debe superar los 500KB', document.querySelector('#divmsjalerta1')!);\r\n              return;\r\n            }\r\n          }\r\n        }\r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unproducto!.id);\r\n          datos.append('idcategoria', $('#categoria').val()as string);\r\n          datos.append('nombre', $('#nombre').val()as string);\r\n          datos.append('foto', imgFile); //en el backend no se lee con $_POST, se lee con $_FILES\r\n          datos.append('tipoproducto', $('#tipoproducto').val()as string);  //0=simple o 1=compuesto\r\n          datos.append('idunidadmedida', $('#idunidadmedida').val()as string);\r\n          datos.append('unidadmedida', $('#idunidadmedida option:selected').text());\r\n          datos.append('stock', $('#stock').val()as string);\r\n          datos.append('precio_compra', $('#preciocompra').val()as string);\r\n          datos.append('precio_venta', $('#precioventa').val()as string);\r\n          datos.append('sku', $('#sku').val()as string);\r\n          datos.append('tipoproduccion', ($('#tipoproduccion').val()as string)==null?'0':($('#tipoproduccion').val()as string));\r\n          datos.append('impuesto', $('#impuesto').val()as string);\r\n          datos.append('stockminimo', $('#stockminimo').val()as string);\r\n          try {\r\n              const url = \"/admin/api/actualizarproducto\";\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json(); \r\n              console.log(resultado); \r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                /// actualizar el arregle del producto ///\r\n                products.forEach(a=>{if(a.id == unproducto.id)a = Object.assign(a, resultado.producto[0]);});\r\n                ///////// cambiar la fila completa, su contenido //////////\r\n                const datosActuales = (tablaProductos as any).row(indiceFila).data();\r\n                /*img*/datosActuales[1] = `<div class=\"text-center\"><img class=\"inline\" style=\"width: 50px;\" src=\"/build/img/${resultado.producto[0].foto}\" alt=\"\"></div>`;\r\n                /*NOMBRE*/datosActuales[2] ='<div class=\"w-80 whitespace-normal\">'+$('#nombre').val()+'</div>';\r\n                /*CATEGORIA*/datosActuales[3] = $('#categoria option:selected').text();\r\n                /*MARCA*/datosActuales[4] = '';\r\n                /*CODIGO*/datosActuales[5] = $('#sku').val();\r\n                /*PRECIOVENTA*/datosActuales[6] = $('#precioventa').val();\r\n                \r\n                (tablaProductos as any).row(indiceFila).data(datosActuales).draw();\r\n                (tablaProductos as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n              miDialogoProducto.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n      } //fin if(control)\r\n    });\r\n\r\n\r\n    function bloquearProductos(e:Event){\r\n      let reg = (e.target as HTMLElement).parentElement, info = (tablaProductos as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'SPAN')reg = (e.target as HTMLElement).parentElement!.parentElement;\r\n      indiceFila = (tablaProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      (async ()=>{\r\n\r\n          const datos = new FormData();\r\n          datos.append('id', reg!.id);\r\n          try {\r\n              const url = \"/admin/api/cambiarestadoproducto\";\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                \r\n                const s1 = `<div class=\"acciones-btns my-[0.7rem]\" id=\"${reg!.id}\">\r\n                              ${resultado.tipoproducto[0] == 1?`<a class=\"btn-xs btn-blue\" title=\"Agregar Materia Prima\" href=\"/admin/almacen/componer?id=${reg!.id}\"><i class=\"fa-solid fa-subscript text-[17px] leading-none\"></i></a>`:''}\r\n                              <button class=\"btn-xs btn-lima\" title=\"Más opciones\"><i class=\"fa-solid fa-circle-plus text-[17px] leading-none\"></i></button>\r\n                              <button class=\"btn-xs btn-turquoise editarProductos\" title=\"Actualizar Producto\"><i class=\"fa-solid fa-pen-to-square text-[17px] leading-none\"></i></button>\r\n                              <button class=\"btn-xs ${resultado.estado[0]==1?'btn-light':'btn-orange'} bloquearProductos\" title=\"Bloquear Producto\"><span class=\"material-symbols-outlined text-[18px] leading-none\">hide_source</span></button>\r\n                              <button class=\"btn-xs btn-red eliminarProductos\" title=\"Eliminar Producto\"><i class=\"fa-solid fa-trash-can text-[17px] leading-none\"></i></button>\r\n                            </div>`;\r\n                            \r\n                (tablaProductos as any).cell((tablaProductos as any).row(indiceFila+=info.start), 7).data(s1).draw(); //se modifica solo la columna con la fila correspondiente, y destruye la que habai antes\r\n                (tablaProductos as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              }else{\r\n                  Swal.fire(resultado.error[0], '', 'error')\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n      })();//cierre de async()\r\n    }\r\n\r\n    function eliminarProductos(e:Event){\r\n      let idproducto = (e.target as HTMLElement).parentElement!.id, info = (tablaProductos as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idproducto = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar el prducto?',\r\n          text: \"El prducto sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idproducto);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarProducto\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaProductos as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaProductos as any).page(info.page).draw('page');\r\n                        Swal.fire(resultado.exito[0], '', 'success') \r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    //////////////////// Cargar imagen como preview  //////////////////////\r\n    btncustomUpImage?.addEventListener('click', ()=>inputupImage?.click());\r\n    inputupImage?.addEventListener('change', function(){\r\n      const file = this.files?.[0];\r\n      if(file){\r\n        const reader = new FileReader();\r\n        reader.onload = function(){\r\n          const resrult = reader.result;\r\n          if(typeof resrult == \"string\")imginputfile.src = resrult;\r\n        } \r\n        reader.readAsDataURL(file);\r\n      }\r\n    });\r\n\r\n    function limpiarformdialog():void{\r\n      (document.querySelector('#formCrearUpdateProducto') as HTMLFormElement)?.reset();\r\n      imginputfile.src = '';\r\n    }\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoProducto || (event.target as HTMLInputElement).value === 'salir') {\r\n        miDialogoProducto.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n  }\r\n\r\n})();","(()=>{\r\n    if(document.querySelector('.subproductos')){\r\n      const crearSubProducto = document.querySelector('#crearSubProducto');\r\n      const miDialogoSubProducto = document.querySelector('#miDialogoSubProducto') as any;\r\n      let indiceFila=0, control=0, tablaSubProductos:HTMLElement;\r\n      \r\n      type subproductsapi = {\r\n        id:string,\r\n        id_unidadmedida: string,\r\n        unidadmedida: string,\r\n        nombre: string,\r\n        sku: string,\r\n        proveedor: string,\r\n        descripcion: string,\r\n        medidas: string,\r\n        color: string,\r\n        uso:string,\r\n        stock: string,\r\n        stockminimo: string,\r\n        precio_compra: string,\r\n        fecha_ingreso: string,\r\n      };\r\n  \r\n      let subproducts:subproductsapi[]=[], unsubproducto:subproductsapi;\r\n  \r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allsubproducts\"; //llamado a la API REST\r\n            const respuesta = await fetch(url); \r\n            subproducts = await respuesta.json(); \r\n            console.log(subproducts);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n  \r\n      //////////////////  TABLA //////////////////////\r\n      tablaSubProductos = ($('#tablaSubProductos') as any).DataTable(configdatatables);\r\n  \r\n      crearSubProducto?.addEventListener('click', (e):void=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalSubProducto')!.textContent = \"Crear sub producto\";\r\n        (document.querySelector('#btnEditarCrearSubProducto') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoSubProducto.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n  \r\n      ///////////// EVENTOS A LA TABLA SUBPRODUCTOS /////////////\r\n      document.querySelector('#tablaSubProductos')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n        const target = e.target as HTMLElement;\r\n        if(target?.classList.contains(\"editarSubProductos\")||target.parentElement?.classList.contains(\"editarSubProductos\"))editarSubProductos(e);\r\n        if(target?.classList.contains(\"eliminarSubProductos\")||target.parentElement?.classList.contains(\"eliminarSubProductos\"))eliminarSubProductos(e);\r\n      });\r\n  \r\n      function editarSubProductos(e:Event){\r\n        let idsubproducto = (e.target as HTMLElement).parentElement?.id!;\r\n        if((e.target as HTMLElement)?.tagName === 'I')idsubproducto = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n        control = 1;\r\n        document.querySelector('#modalSubProducto')!.textContent = \"Actualizar producto\";\r\n        (document.querySelector('#btnEditarCrearSubProducto') as HTMLInputElement)!.value = \"Actualizar\";\r\n        unsubproducto = subproducts.find(x=>x.id === idsubproducto)!;\r\n        $('#unidadmedida').val(unsubproducto?.id_unidadmedida??'');\r\n        (document.querySelector('#nombre')as HTMLInputElement).value = unsubproducto?.nombre!;\r\n        (document.querySelector('#sku')as HTMLInputElement).value = unsubproducto?.sku!;\r\n        (document.querySelector('#preciocompra')as HTMLInputElement).value = unsubproducto?.precio_compra??'';\r\n        (document.querySelector('#stockminimo')as HTMLInputElement).value = unsubproducto?.stockminimo??'';\r\n        \r\n        indiceFila = (tablaSubProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n        miDialogoSubProducto.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n  \r\n      ////////////////////  Actualizar/Editar producto  //////////////////////\r\n      document.querySelector('#formCrearUpdateSubProducto')?.addEventListener('submit', e=>{\r\n        if(control){\r\n          e.preventDefault();\r\n          var info = (tablaSubProductos as any).page.info();\r\n          \r\n          (async ()=>{ \r\n            const datos = new FormData();\r\n            datos.append('id', unsubproducto!.id);\r\n            datos.append('id_unidadmedida', $('#unidadmedida').val()as string);\r\n            datos.append('unidadmedida', $('#unidadmedida').find('option:selected').text());\r\n            datos.append('nombre', $('#nombre').val()as string);\r\n            datos.append('sku', $('#sku').val()as string);\r\n            datos.append('precio_compra', $('#preciocompra').val()as string);\r\n             datos.append('stockminimo', $('#stockminimo').val()as string);\r\n            try {\r\n                const url = \"/admin/api/actualizarsubproducto\";\r\n                const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                const resultado = await respuesta.json(); \r\n                console.log(resultado); \r\n                if(resultado.exito !== undefined){\r\n                  msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                  /// actualizar el arregle del subproducto ///\r\n                  subproducts.forEach(a=>{if(a.id == unsubproducto.id)a = Object.assign(a, resultado.subproducto[0]);});\r\n                  ///////// cambiar la fila completa, su contenido //////////\r\n                  const datosActuales = (tablaSubProductos as any).row(indiceFila+=info.start).data();\r\n                  /*NOMBRE*/datosActuales[1] ='<div class=\"w-80 whitespace-normal\">'+$('#nombre').val()+'</div>';\r\n                  /*proveedor*/datosActuales[2] = '';\r\n                  /*SKU*/datosActuales[3] = $('#sku').val();\r\n                  /*UNIDADMEDIDA*/datosActuales[4] = $('#unidadmedida option:selected').text();\r\n                  /*PRECIOCOMPRA*/datosActuales[5] = '$'+Number($('#preciocompra').val())?.toLocaleString();\r\n                  (tablaSubProductos as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaSubProductos as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }else{\r\n                  msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                }\r\n                document.addEventListener(\"click\", cerrarDialogoExterno);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n          })();//cierre de async()\r\n        } //fin if(control)\r\n      });\r\n  \r\n      function eliminarSubProductos(e:Event){\r\n        let idsubproducto = (e.target as HTMLElement).parentElement!.id, info = (tablaSubProductos as any).page.info();\r\n        if((e.target as HTMLElement).tagName === 'I')idsubproducto = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n        indiceFila = (tablaSubProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n        Swal.fire({\r\n            customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n            icon: 'question',\r\n            title: 'Desea eliminar el sub prducto?',\r\n            text: \"El sub prducto sera eliminado definitivamente.\",\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Si',\r\n            cancelButtonText: 'No',\r\n        }).then((result:any) => {\r\n            if (result.isConfirmed) {\r\n                (async ()=>{ \r\n                    const datos = new FormData();\r\n                    datos.append('id', idsubproducto);\r\n                    try {\r\n                        const url = \"/admin/api/eliminarSubProducto\";\r\n                        const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                        const resultado = await respuesta.json();  \r\n                        if(resultado.exito !== undefined){\r\n                          (tablaSubProductos as any).row(indiceFila+info.start).remove().draw(); \r\n                          (tablaSubProductos as any).page(info.page).draw('page');\r\n                          Swal.fire(resultado.exito[0], '', 'success') \r\n                        }else{\r\n                            Swal.fire(resultado.error[0], '', 'error')\r\n                        }\r\n                    } catch (error) {\r\n                        console.log(error);\r\n                    }\r\n                })();//cierre de async()\r\n            }\r\n        });\r\n      }\r\n\r\n  \r\n      function limpiarformdialog(){\r\n        (document.querySelector('#formCrearUpdateSubProducto') as HTMLFormElement)?.reset();\r\n        (document.querySelector('#formCrearUpdateSubProducto') as HTMLFormElement).action = \"/admin/almacen/crear_subproducto\";\r\n      }\r\n      function cerrarDialogoExterno(event:Event) {\r\n        if (event.target === miDialogoSubProducto || (event.target as HTMLInputElement).value === 'salir' || (event.target as HTMLInputElement).value === 'Actualizar') {\r\n            miDialogoSubProducto.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n    }\r\n  \r\n  })();","(()=>{\r\n\r\n    if(document.querySelector('.unidadesmedida')){\r\n        const btnCrearUnidadMedida = document.querySelector('#btnCrearUnidadMedida');\r\n        const miDialogoUnidadMedida = document.querySelector('#miDialogoUnidadMedida') as any;\r\n        let tablaUnidadesMedida:HTMLElement;\r\n\r\n        tablaUnidadesMedida = ($('#tablaUnidadesMedida') as any).DataTable(configdatatables);\r\n\r\n        ///////////////BTN PARA CREAR UNIDAD DE MEDIDA////////////////\r\n        btnCrearUnidadMedida?.addEventListener('click', (e):void=>{\r\n            limpiarformdialog();\r\n            document.querySelector('#modalUnidadMedida')!.textContent = \"Crear unidad de medida\";\r\n            (document.querySelector('#btnEditarCrearUnidadMedida') as HTMLInputElement).value = \"Crear\";\r\n            miDialogoUnidadMedida.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        });\r\n\r\n        document.querySelector('#tablaUnidadesMedida')?.addEventListener('click', (e:Event)=>{\r\n            var btn = e.target as HTMLElement;\r\n            if(btn?.classList.contains('editarUnidadMedida')||btn.parentElement?.classList.contains(\"editarUnidadMedida\"))editarUnidadMedida(e);\r\n            if(btn?.classList.contains('eliminarUnidadMedida')||btn.parentElement?.classList.contains(\"eliminarUnidadMedida\"))eliminarUnidadMedida(e);   \r\n        });\r\n\r\n\r\n        ///////////////EDITAR UNIDAD DE MEDIDA////////////////\r\n        function editarUnidadMedida(e:Event){\r\n            let idunidadmedida = (e.target as HTMLElement).parentElement?.id!;\r\n            if((e.target as HTMLElement)?.tagName === 'I')idunidadmedida = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n            (document.querySelector('#formCrearUpdateUnidad') as HTMLFormElement).action = \"/admin/almacen/editarunidademedida\";\r\n            document.querySelector('#modalUnidadMedida')!.textContent = \"Actualizar unidad de medida\";\r\n            (document.querySelector('#btnEditarCrearUnidadMedida') as HTMLInputElement)!.value = \"Actualizar\";\r\n            (document.querySelector('#idunidadmedida') as HTMLInputElement).value = idunidadmedida;\r\n            (document.querySelector('#unidad') as HTMLInputElement).value = ((e.target as HTMLElement).closest('.acciones-btns') as HTMLElement)?.dataset.unidadmedida!; \r\n            miDialogoUnidadMedida.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n\r\n\r\n        function eliminarUnidadMedida(e:Event):void{\r\n            let form = (e.target as HTMLElement).parentElement!;\r\n            if((e.target as HTMLElement).tagName === 'I')form = form.parentElement!;\r\n            Swal.fire({\r\n                customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n                icon: 'question',\r\n                title: 'Desea eliminar la unidad de medida?',\r\n                text: \"La unidad de medida sera eliminado definitivamente.\",\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Si',\r\n                cancelButtonText: 'No',\r\n            }).then((result:any) => {\r\n                if (result.isConfirmed)(form as HTMLFormElement).submit();\r\n            });\r\n        }\r\n\r\n        /*document.querySelector('.eliminarUnidadMedida')?.addEventListener('submit', (e:Event)=>{\r\n            console.log(55);\r\n            e.preventDefault();\r\n        });*/\r\n\r\n        /*function eliminarUnidadMedida(e:Event):void{\r\n            let idunidadmedida = (e.target as HTMLElement).parentElement?.id!;\r\n            if((e.target as HTMLElement)?.tagName === 'I')idunidadmedida = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n            console.log(idunidadmedida);\r\n            Swal.fire({\r\n                customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n                icon: 'question',\r\n                title: 'Desea eliminar la unidad de medida?',\r\n                text: \"La unidad de medida sera eliminado definitivamente.\",\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Si',\r\n                cancelButtonText: 'No',\r\n            }).then((result:any) => {\r\n                if (result.isConfirmed) {*/\r\n                    /*(async ()=>{ \r\n                        const datos = new FormData();\r\n                        datos.append('id', idproducto);\r\n                        try {\r\n                            const url = \"/admin/api/eliminarProducto\";\r\n                            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                            const resultado = await respuesta.json();  \r\n                            if(resultado.exito !== undefined){\r\n                              (tablaProductos as any).row(indiceFila+info.start).remove().draw(); \r\n                              (tablaProductos as any).page(info.page).draw('page');\r\n                              Swal.fire(resultado.exito[0], '', 'success') \r\n                            }else{\r\n                                Swal.fire(resultado.error[0], '', 'error')\r\n                            }\r\n                        } catch (error) {\r\n                            console.log(error);\r\n                        }\r\n                    })();*///cierre de async()\r\n                /*}\r\n            });\r\n        }*/\r\n        \r\n        function limpiarformdialog(){\r\n            (document.querySelector('#formCrearUpdateUnidad') as HTMLFormElement)?.reset();\r\n            (document.querySelector('#formCrearUpdateUnidad') as HTMLFormElement).action = \"/admin/almacen/crear_unidadmedida\";\r\n        }\r\n\r\n        function cerrarDialogoExterno(event:Event) {\r\n            const f = event.target;\r\n        if (f === miDialogoUnidadMedida || (f as HTMLInputElement).value === 'Salir' || (f as HTMLInputElement).value === 'Actualizar') {\r\n            miDialogoUnidadMedida.close();\r\n            document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n        }\r\n    }\r\n\r\n})();","(():void=>{\r\n  if(document.querySelector('.caja')){\r\n    const modalGastosIngresos:any = document.querySelector(\"#gastosIngresos\");\r\n    const modalcambioMedioPago:any = document.querySelector(\"#cambioMedioPago\");\r\n    const btnGastosingresos = document.querySelector<HTMLButtonElement>(\"#btnGastosingresos\");\r\n    const operacion = document.querySelector('#operacion') as HTMLSelectElement;\r\n    const origengasto = document.querySelectorAll<HTMLInputElement>('input[name=\"origengasto\"]');\r\n    const mediosPago = document.querySelectorAll<HTMLInputElement>('.mediopago'); //todos los medios de pago del modal\r\n    const totalPagado = document.querySelector('#totalPagado') as HTMLSpanElement;\r\n    const numfactura = document.querySelector('#numfactura') as HTMLLabelElement;\r\n\r\n    let tablaListaPedidos:HTMLElement;\r\n    let estadofactura:string, contentMP:HTMLElement, idfactura:string = '0';\r\n    let mediospagoDB:{id:string, idmediopago:string, id_factura:string, valor:string}[];\r\n    let nuevosMediosPago:{idmediopago:string, valor: string}[]=[];  // guardar los medios de pago a enviar a backend\r\n    const setMediosPagoDB = new Set();\r\n    const mapMediospago = new Map();\r\n\r\n    tablaListaPedidos = ($('#tablaListaPedidos') as any).DataTable(configdatatablescaja);\r\n\r\n    //////// clic al btn gastos/ingresos\r\n    btnGastosingresos?.addEventListener('click', ():void=>{\r\n      modalGastosIngresos.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    ///////// cambio de tipo de operacion si ingreso o gasto, si es gasto habilita el select de los tipos de gastos\r\n    operacion?.addEventListener('change', (e:Event)=>{\r\n      const targetDom = e.target as HTMLSelectElement;\r\n      const tipodegasto = document.querySelector('.tipodegasto') as HTMLElement;\r\n\r\n      if(targetDom.value == 'gasto'){\r\n        tipodegasto.style.display = 'flex';\r\n        document.querySelector('#tipodegasto')?.setAttribute(\"required\", \"\"); //categoria de los gastos\r\n        document.querySelector('#origengasto')?.classList.remove('hidden');  //origen del gasto ya sea por caja o banco\r\n        document.querySelector('#origengasto')?.classList.add('flex');\r\n        showCajasBancos();\r\n      }\r\n      else{ // ingreso a caja\r\n        tipodegasto.style.display = 'none';\r\n        document.querySelector('#tipodegasto')?.removeAttribute(\"required\");\r\n        document.querySelector('#origengasto')?.classList.add('hidden');\r\n        document.querySelector('#origengasto')?.classList.remove('flex');\r\n         document.querySelector('#showcajas')?.classList.remove('hidden'); //mostar caja\r\n        document.querySelector('#showbancos')?.classList.add('hidden'); //oculta banco\r\n      }\r\n    });\r\n\r\n    /// evento a los inputs type radio para elegir origne del gasto = caja o bancos\r\n    origengasto.forEach(element =>element.addEventListener('click', showCajasBancos));\r\n\r\n\r\n    function showCajasBancos(){\r\n      const selectorigen = document.querySelector('input[name=\"origengasto\"]:checked');\r\n      if(selectorigen?.id == 'gastocaja'){\r\n        document.querySelector('#showcajas')?.classList.remove('hidden');\r\n        document.querySelector('#showcajas')?.setAttribute(\"required\", \"\");\r\n        document.querySelector('#showbancos')?.classList.add('hidden');\r\n        document.querySelector('#showbancos')?.removeAttribute(\"required\");\r\n      }else{\r\n        //document.querySelector('#showcajas')?.classList.add('hidden');\r\n        //document.querySelector('#showcajas')?.removeAttribute(\"required\");\r\n        document.querySelector('#showbancos')?.classList.remove('hidden');\r\n        document.querySelector('#showbancos')?.setAttribute(\"required\", \"\");\r\n      }\r\n    }\r\n\r\n    ////////////// Evento a la tabla lista de pedidos ///////////////\r\n    document.querySelector('#tablaListaPedidos')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if(target?.classList.contains(\"mediosdepago\")||target.parentElement?.classList.contains(\"mediosdepago\"))cambiomediopago(target);\r\n      if(target?.classList.contains(\"printPOS\")||target.parentElement?.classList.contains(\"printPOS\"))printPOS(target);\r\n      if(target?.classList.contains(\"printPDF\")||target.parentElement?.classList.contains(\"printPDF\"))printPDF(target);\r\n    });\r\n\r\n\r\n    //////////// Modal para el cambio de medio de pago ////////////\r\n    function cambiomediopago(target:HTMLElement){\r\n      idfactura = target.id;\r\n      contentMP = target;\r\n      estadofactura = target.dataset.estado??'';\r\n      totalPagado.textContent = Number(target.dataset.totalpagado??'0').toLocaleString();\r\n      if(target.tagName == \"BUTTON\"){\r\n        idfactura = target.parentElement!.id;\r\n        contentMP = target.parentElement!;\r\n        estadofactura = target.parentElement?.dataset.estado??'';\r\n        totalPagado.textContent = Number(target.parentElement!.dataset.totalpagado??'0').toLocaleString();\r\n      }\r\n      facturamediospago();     //muestra los valores de los medios de pago de cada factura\r\n      if(estadofactura == \"Eliminada\")document.querySelector('#btnEnviarCambioMedioPago')?.classList.add('!hidden');\r\n      if(estadofactura == \"Paga\")document.querySelector('#btnEnviarCambioMedioPago')?.classList.remove('!hidden');\r\n      modalcambioMedioPago.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    function facturamediospago(){  //muestra los valores de los medios de pago de cada factura\r\n      numfactura.textContent = 'Factura N° : '+idfactura;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/mediospagoXfactura?id=\"+idfactura; //llamado a la API REST y se trae los medios de pago segun factura\r\n          const respuesta = await fetch(url); \r\n          mediospagoDB = await respuesta.json(); \r\n          console.log(mediospagoDB);\r\n          //const setMediosPagoDB = new Set(mediospagoDB.map(x=>x.idmediopago));\r\n          //console.log(setMediosPagoDB);\r\n          mediospagoDB.forEach(x => setMediosPagoDB.add(x.idmediopago));//se llena el set con los medios de pago de la DB\r\n          mediosPago.forEach(mediopago =>{  //se llena los inputs medios de pago con los medios de pago de la DB\r\n            mediopago.value = '0';\r\n            for(let i=0; i<mediospagoDB.length; i++)\r\n              if(mediopago.id == mediospagoDB[i].idmediopago){\r\n                mediopago.value =  Number(mediospagoDB[i].valor).toLocaleString();\r\n                mapMediospago.set(mediopago.id, Number(mediospagoDB[i].valor));\r\n                break;\r\n              }\r\n          });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    }\r\n\r\n    mediosPago.forEach(mp =>{\r\n      mp.addEventListener('input', (e)=>{\r\n        let totalmediospago = 0;\r\n        mediosPago.forEach((item, index)=>{ //sumar todos los medios de pago\r\n          totalmediospago += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n        });\r\n\r\n        if(totalmediospago<=parseInt(totalPagado.textContent!.replace(/[,.]/g, ''))){\r\n          mapMediospago.set((e.target as HTMLInputElement).id, parseInt((e.target as HTMLInputElement).value.replace(/[,.]/g, '')));\r\n          document.querySelector('#diferencia')!.textContent = (parseInt(totalPagado.textContent!.replace(/[,.]/g, ''))-totalmediospago).toLocaleString();\r\n        }else{\r\n          if(mapMediospago.has((e.target as HTMLInputElement).id)){\r\n            (e.target as HTMLInputElement).value = mapMediospago.get((e.target as HTMLInputElement).id).toLocaleString();\r\n          }else{ (e.target as HTMLInputElement).value = '0'; }\r\n        }\r\n      });\r\n    });\r\n\r\n\r\n    function printPOS(target: HTMLElement){\r\n      let idfactura = target.parentElement!.id;\r\n      if(target.tagName === 'I')idfactura = target.parentElement!.parentElement!.id;\r\n      window.open(\"/admin/printPDFPOS?id=\" + idfactura, \"_blank\");  //controlador printcontrolador\r\n    }\r\n\r\n    function printPDF(target: HTMLElement){\r\n      let idfactura = target.parentElement!.id;\r\n      let cotizacion:string = target.parentElement?.dataset.cotizacion!;\r\n      let urlprintPDF:string = \"/printfacturacarta?id=\";\r\n      if(target.tagName === 'I'){\r\n        idfactura = target.parentElement!.parentElement!.id;\r\n        cotizacion = target.parentElement!.parentElement?.dataset.cotizacion!;\r\n      }\r\n      if(cotizacion === '1')urlprintPDF = \"/printcotizacion?id=\";\r\n      const ventana = window.open(urlprintPDF + idfactura, \"_blank\");  //cajacontrolador\r\n      if(ventana){\r\n        ventana.onload = ()=>{\r\n          ventana?.focus();\r\n          ventana?.print();\r\n          setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n        };\r\n      }\r\n    }\r\n\r\n    ////////////////// evento al bton pagar del modal facturar //////////////////////\r\n    document.querySelector('#formCambioMedioPago')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      let totalotrosmedios = 0;\r\n      nuevosMediosPago.length = 0;\r\n      mediosPago.forEach((item, index)=>{ \r\n        totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, '')); //sumar todos los medios de pago de los inputs\r\n        if(item.value != '0')\r\n          nuevosMediosPago = [...nuevosMediosPago, {idmediopago: item.id, valor: item.value.replace(/[,.]/g, '')}];  //obtengo los nuevos medios de pago difente a cero\r\n      });\r\n\r\n      if(totalotrosmedios != parseInt(totalPagado.textContent!.replace(/[,.]/g, ''))){\r\n        msjAlert('error', 'Valor diferente al pagado', (document.querySelector('#divmsjalerta2') as HTMLElement));\r\n        return;\r\n      }\r\n      actualizarMediosPago();\r\n    });\r\n\r\n\r\n    async function actualizarMediosPago(){\r\n      const setNuevosMediosPago = new Set(nuevosMediosPago.map(x=>x.idmediopago));\r\n      ////cruzar los datos de los medios de pago de la DB y de los nuevos medios de pago////\r\n      //////// medios de pago iguales o compartidos ///////////\r\n      const mediospagocompartidos = mediospagoDB.filter(x=>setNuevosMediosPago.has(x.idmediopago));\r\n      //////// nuevos medios de pago que no estan en DB, crear o agregar\r\n      const nuevosMediosPagoNoEnDB = nuevosMediosPago.filter(x=>!setMediosPagoDB.has(x.idmediopago));\r\n      //////// medios de pago de la DB que no estan en los nuevos medios de pago, eliminar\r\n      const mediosPagoDBNoEnNuevos = mediospagoDB.filter(x=>!setNuevosMediosPago.has(x.idmediopago));\r\n\r\n      const datos = new FormData();\r\n      datos.append('id_factura', idfactura);\r\n      datos.append('efectivoDB', mediospagoDB.find(x=>x.idmediopago=='1')?.valor??'0'+'');\r\n      datos.append('nuevoEfectivo', nuevosMediosPago.find(x=>x.idmediopago=='1')?.valor??'0'+'');\r\n      datos.append('mediospagocompartidos', JSON.stringify(mediospagocompartidos));\r\n      datos.append('nuevosMediosPagoNoEnDB', JSON.stringify(nuevosMediosPagoNoEnDB));\r\n      datos.append('mediosPagoDBNoEnNuevos', JSON.stringify(mediosPagoDBNoEnNuevos));\r\n      datos.append('nuevosMediosPago', JSON.stringify(nuevosMediosPago));  \r\n      try {\r\n          const url = \"/admin/api/cambioMedioPago\";  //va al controlador ventascontrolador\r\n          const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n          const resultado = await respuesta.json();\r\n          if(resultado.exito !== undefined){\r\n            msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            updateMP(resultado.mediosPagoUpdate);\r\n          }else{\r\n            msjalertToast('error', '¡Error!', resultado.error[0]);\r\n          }\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n      modalcambioMedioPago.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    function updateMP(mediosPagoUpdate:{id:string, idmediopago:string, id_factura:string, valor:string, mediopago:string}[]){\r\n      while(contentMP.firstChild)contentMP.removeChild(contentMP.firstChild);\r\n      mediosPagoUpdate.forEach(btnMP=>{\r\n        const button = document.createElement('button');\r\n        button.classList.add('btn-xs', 'btn-light', 'mr-2');\r\n        button.textContent = btnMP.mediopago;\r\n        contentMP.appendChild(button);\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === modalGastosIngresos || event.target === modalcambioMedioPago || (event.target as HTMLInputElement).value === 'cancelar') {\r\n          modalGastosIngresos.close();\r\n          modalcambioMedioPago.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.cerrarcaja')){\r\n    const modalArqueocaja:any = document.querySelector(\"#modalArqueocaja\");\r\n    const Modalcerrarcaja:any = document.querySelector(\"#Modalcerrarcaja\");\r\n    const modalCambiarCaja:any = document.querySelector(\"#modalCambiarCaja\");\r\n    const btnArqueocaja = document.querySelector<HTMLButtonElement>(\"#btnArqueocaja\");\r\n    const btnCerrarcaja = document.querySelector<HTMLButtonElement>(\"#btnCerrarcaja\");\r\n    const btnImprimirDetalleCaja = document.querySelector('#btnImprimirDetalleCaja') as HTMLButtonElement;\r\n    const btnCambiarCaja = document.querySelector<HTMLButtonElement>(\"#btnCambiarCaja\");\r\n    const inputsmediospago = document.querySelectorAll<HTMLInputElement>('.inputmediopago');\r\n    const formArqueocaja = document.querySelector('#formArqueocaja') as HTMLFormElement;\r\n    const formCambiarCaja = document.querySelector('#formCambiarCaja') as HTMLFormElement;\r\n\r\n    btnArqueocaja?.addEventListener('click', ():void=>{\r\n      modalArqueocaja.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    btnCerrarcaja?.addEventListener('click', ():void=>{\r\n      Modalcerrarcaja.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    btnCambiarCaja?.addEventListener('click', ():void=>{\r\n      modalCambiarCaja.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n    \r\n\r\n    //////////////////     Arqueo de caja      //////////////////////\r\n    formArqueocaja?.addEventListener('submit', (e:Event)=>{\r\n      e.preventDefault();\r\n      sumatoriaDenominaciones();\r\n      const datos = new FormData(formArqueocaja);\r\n      datos.append('idcierrecaja', document.querySelector('#idCierrecaja')?.textContent!);\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/arqueocaja\";  //api llamada en cajacontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              modalArqueocaja.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      \r\n    });\r\n\r\n    function sumatoriaDenominaciones():void{\r\n      const ef = document.querySelector('#Efectivo') as HTMLInputElement;\r\n      const inputsDenominaciones = Array.from( document.querySelectorAll<HTMLInputElement>('.denominacion'));\r\n      const sum = inputsDenominaciones.reduce((total, denominaicon)=>(Number(denominaicon.dataset.moneda)*Number(denominaicon.value))+total, 0);\r\n      ef.value = sum+'';\r\n      const eventInput = new Event('input');  //crea un evento\r\n      ef.dispatchEvent(eventInput); // se dispara el evento de manera manual, --->abajo<--, es decir cuando se introduce un valor en el campo efectivo se dispara el evento.\r\n    }\r\n\r\n    ///////////  eventos a los inputs medios de pago de declarar valores /////////////\r\n    inputsmediospago.forEach(m=>{\r\n      m.addEventListener('input', (e)=>{  \r\n        const inputmediopago = (e.target as HTMLInputElement);\r\n        const valormediopagodeclarado:number =  parseInt((e.target as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n        (async ()=>{\r\n          const datos = new FormData();\r\n          datos.append('id_mediopago', inputmediopago.dataset.idmediopago+'');\r\n          datos.append('nombremediopago', inputmediopago.name);\r\n          datos.append('valordeclarado', valormediopagodeclarado+'');\r\n          datos.append('idcierrecaja', document.querySelector('#idCierrecaja')?.textContent!);\r\n          try {\r\n              const url = \"/admin/api/declaracionDinero\";  //api llamada en cajacontrolador.php\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();\r\n              if(resultado.exito !== undefined){\r\n                inputmediopago.style.color = \"#02db02\";\r\n                inputmediopago.style.fontWeight = \"500\";\r\n                actualizarAnalisis(inputmediopago.dataset.idmediopago!, valormediopagodeclarado+'', inputmediopago.name);\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();\r\n      });\r\n    }); \r\n\r\n\r\n    function actualizarAnalisis(id: string, valordeclarado: string, mediopago:string):void{\r\n      const coldeclarado = document.querySelector(`.coldeclarado[data-mediopagoid=\"${id}\"]`);\r\n      if(coldeclarado){\r\n        const coldif = coldeclarado.nextElementSibling;\r\n        coldeclarado.textContent = Number(valordeclarado).toLocaleString('es-ES', { useGrouping: true });\r\n        const colsistem = coldeclarado.previousElementSibling?.textContent?.replace(/[.,]/g, '');\r\n        coldif!.textContent = ((Number(valordeclarado) - Number(colsistem))).toLocaleString('es-ES', { useGrouping: true }); \r\n      }else{\r\n        const cuerpoanalisis = document.querySelector('.cuerpoanalisis');\r\n        cuerpoanalisis?.insertAdjacentHTML('beforeend', `\r\n          <tr class=\"${mediopago=='Efectivo'?'!border-2 !border-indigo-600':''}\">\r\n            <td class=\"\">${mediopago}</td> \r\n            <td class=\"colsistem\">0</td>\r\n            <td class=\"coldeclarado\" data-mediopagoid=\"${id}\">${Number(valordeclarado).toLocaleString('es-ES', { useGrouping: true })}</td>\r\n            <td class=\"coldif\">${Number(valordeclarado).toLocaleString('es-ES', { useGrouping: true })}</td>\r\n          </tr>`\r\n        );\r\n      }\r\n    }\r\n\r\n    function confirmarcierre(){\r\n      const datos = new FormData();\r\n      \r\n      datos.append('idcierrecaja', document.querySelector('#idCierrecaja')?.textContent!);\r\n      \r\n      (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"grid\";\r\n      Modalcerrarcaja.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      (async ()=>{\r\n        try {\r\n\r\n            const url = \"/admin/api/cierrecajaconfirmado\";  //api llamada en cajacontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              setTimeout(() => {\r\n                (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n                window.location.href = `/admin/caja/detallecierrecaja?id=${resultado.ultimocierre[0]}`;\r\n              }, 1600);\r\n            }else{\r\n              (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    }\r\n\r\n    ///////// imprimir detalle cierre\r\n    btnImprimirDetalleCaja?.addEventListener('click', ()=>{\r\n        const ventana = window.open('/printdetallecierre?id=1', '_blank');\r\n        if(ventana){\r\n          ventana.onload = ()=>{\r\n            ventana?.focus();\r\n            ventana?.print();\r\n            setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n          };\r\n        }\r\n    });\r\n\r\n    //////////////////     Cambio de caja      //////////////////////\r\n    formCambiarCaja?.addEventListener('submit', (e:Event)=>{\r\n      e.preventDefault();\r\n      const datos = new FormData();\r\n      datos.append('idcaja', $('#CambiarCaja').val()as string); //select del modal de cambio de caja\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/datoscajaseleccionada\";  //api llamada en cajacontrolador.php para traer datos de venta de la caja seleccionada \r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              modalCambiarCaja.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n              console.log(resultado);\r\n              //cambiar el id del cierre de caja en id=\"#idCierrecaja\"\r\n              document.querySelector('#nombreCaja')!.textContent = $('#CambiarCaja option:selected').text();\r\n              document.querySelector('#idCierrecaja')!.textContent = resultado.ultimocierre.id;\r\n              //mostar datos de la caja seleccionada\r\n              printdiscriminarmediospago(resultado.discriminarmediospagos);\r\n              printindicadores(resultado.ultimocierre);\r\n              printsobrantesfaltantes(resultado.sobrantefaltante);\r\n              printventasxusuarios(resultado.ventasxusuarios);\r\n              printventas(resultado.facturas);\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      \r\n    });\r\n\r\n    function printdiscriminarmediospago(array: {idmediopago:string, mediopago:string, valor:string}[]){\r\n      const tbodyMediosPago = document.querySelector('#tablaMediosPago tbody') as HTMLTableElement;\r\n      while(tbodyMediosPago.firstChild)tbodyMediosPago.removeChild(tbodyMediosPago.firstChild);\r\n      array.forEach(row=>{\r\n        const tr = document.createElement('tr');\r\n        tr.innerHTML = `<td class=\"\">${row.mediopago}</td> \r\n                        <td class=\"\"><strong>$ </strong>${Number(row.valor).toLocaleString()}</td>\r\n                      `;\r\n        tbodyMediosPago.appendChild(tr);\r\n      });\r\n    }\r\n\r\n    function printindicadores(obj:{id:string, idcaja:string, id_usuario:string, nombrecaja:string, nombreusuario:string, fechainicio:string, fechacierre:string, ncambiosaventa:string, totalcotizaciones:string, totalfacturas:string, facturaselectronicas:string, facturaspos:string, valorfe:string, descuentofe:string, valorpos:string, descuentopos:string, basecaja:string, ventasenefectivo:string, gastoscaja:string, gastosbanco:string, dineroencaja:string, domicilios:string, ndomicilios:string, realencaja:string, ingresoventas:string, totaldescuentos:string, realventas:string, valorimpuestototal:string, basegravable:string, estado:string}){\r\n      const basecaja = Number(obj.basecaja);\r\n      const ventasenefectivo = Number(obj.ventasenefectivo);\r\n      const gastoscaja = Number(obj.gastoscaja);\r\n      const domicilios = Number(obj.domicilios);\r\n      const ingresoventas = Number(obj.ingresoventas);\r\n      const totaldescuentos = Number(obj.totaldescuentos);\r\n\r\n      document.querySelector('#basecajaResumen')!.textContent = '$'+basecaja.toLocaleString();\r\n      document.querySelector('#gastoscajaResumen')!.textContent = '$'+gastoscaja.toLocaleString();\r\n      document.querySelector('#domiciliosResumen')!.textContent = '$'+domicilios.toLocaleString();\r\n      document.querySelector('#ingresoventasResumen')!.textContent = '$'+(ingresoventas).toLocaleString();\r\n      document.querySelector('#totalfacturasResumen')!.textContent = obj.totalfacturas;\r\n      document.querySelector('#totalcotizacionesResumen')!.textContent = obj.totalcotizaciones;\r\n\r\n      document.querySelector('#baseIngresoCaja')!.textContent = '+ $'+basecaja.toLocaleString();\r\n      document.querySelector('#ventasEfectivo')!.textContent = '+ $'+ventasenefectivo.toLocaleString();\r\n      document.querySelector('#gastosCaja')!.textContent = '- $'+gastoscaja.toLocaleString();\r\n      document.querySelector('#dineroCaja')!.textContent = '= $'+(basecaja+ventasenefectivo-gastoscaja).toLocaleString();\r\n      document.querySelector('#domicilios')!.textContent = '- $'+domicilios.toLocaleString();\r\n      document.querySelector('#realCaja')!.textContent = '= $'+(basecaja+ventasenefectivo-gastoscaja-domicilios).toLocaleString();\r\n      document.querySelector('#ingresoVentasTotal')!.textContent = '+ $'+ingresoventas.toLocaleString();\r\n      document.querySelector('#totalGastosCaja')!.textContent = '- $'+gastoscaja.toLocaleString();\r\n      document.querySelector('#totalDescuentos')!.textContent = '- $'+totaldescuentos.toLocaleString();\r\n      document.querySelector('#totalDomicilios')!.textContent = '= $'+(domicilios).toLocaleString();\r\n      document.querySelector('#realVentas')!.textContent = '= $'+(ingresoventas-totaldescuentos-domicilios-gastoscaja).toLocaleString();\r\n      document.querySelector('#totalBaseGravable')!.textContent = '+ $'+Number(obj.basegravable).toLocaleString();\r\n      document.querySelector('#impuestoTotal')!.textContent = '+ $'+Number(obj.valorimpuestototal).toLocaleString();\r\n      document.querySelector('#otrosGastosBancarios')!.textContent = '+ $'+Number(obj.gastosbanco).toLocaleString();\r\n      document.querySelector('#cantidadFacturasFE')!.textContent = obj.facturaselectronicas;\r\n      document.querySelector('#cantidadFacturasPOS')!.textContent = obj.facturaspos;\r\n    }\r\n\r\n    function printsobrantesfaltantes(array: {id_mediopago:string, idcierrecajaid:string, nombremediopago:string, valordeclarado:number, valorsistema:number}[]){\r\n      const sobranteFaltante = document.querySelector('#sobranteFaltante tbody') as HTMLTableElement;\r\n      while(sobranteFaltante.firstChild)sobranteFaltante.removeChild(sobranteFaltante.firstChild);\r\n      array.forEach(row=>{\r\n        const tr = document.createElement('tr');\r\n        if(row.nombremediopago=='Efectivo')tr.classList.add('!border-2', '!border-indigo-600');\r\n        tr.innerHTML = `<td class=\"\">${row.nombremediopago}</td> \r\n                        <td class=\"colsistem\">${row.valorsistema.toLocaleString()}</td>\r\n                        <td class=\"coldeclarado\" data-mediopagoid=\"${row.id_mediopago}\">${row.valordeclarado.toLocaleString()}</td>\r\n                        <td class=\"coldif\">${(row.valordeclarado - row.valorsistema).toLocaleString()}</td>\r\n                      `;\r\n        sobranteFaltante.appendChild(tr);\r\n      });\r\n    }\r\n\r\n    function printventasxusuarios(array: {Nombre:string, N_ventas:string, ventas:string}[]){\r\n      const ventasxusuarios = document.querySelector('#ventasXUsuario tbody') as HTMLTableElement;\r\n      while(ventasxusuarios.firstChild)ventasxusuarios.removeChild(ventasxusuarios.firstChild);\r\n      array.forEach(row=>{\r\n        const tr = document.createElement('tr');\r\n        tr.innerHTML = `<td class=\"\">${row.Nombre}</td>\r\n                        <td class=\"\">${row.N_ventas}</td>\r\n                        <td class=\"\"><strong>$ </strong>${Number(row.ventas).toLocaleString()}</td>\r\n                      `;\r\n        ventasxusuarios.appendChild(tr);\r\n      });\r\n    }\r\n\r\n    function printventas(array: {id:string, idcliente:string, idvendedor:string, idcaja:string, idconsecutivo:string, iddireccion:string, idtarifazona:string, idcierrecaja:string, cliente:string, vendedor:string, caja:string, tipofacturador:string, mediosdepago:{id:string, id_factura:string, mediopago:string, valor:string}[], direccion:string, tarifazona:string, totalunidades:string, recibido:string, transaccion:string, tipoventa:string, cotizacion:string, estado:string, cambioaventa:string, subtotal:string, base:string, valorimpuestototal:string, dctox100:string, descuento:string, total:string, observacion:string, departamento:string, ciudad:string, entrega:string, valortarifa:string, fechacreacion:string, fechapago:string}[]){\r\n      const tablaVentas = document.querySelector('#tablaVentas tbody') as HTMLTableElement;\r\n      while(tablaVentas.firstChild)tablaVentas.removeChild(tablaVentas.firstChild);\r\n      array.forEach((row, i)=>{\r\n        const tr = document.createElement('tr');\r\n        tr.innerHTML = `<td class=\"\">${i}</td>        \r\n                        <td class=\"\">${row.fechapago}</td> \r\n                        <td class=\"\">${row.cliente}</td> \r\n                        <td class=\"\">${row.id}</td>\r\n                        <td>\r\n                            <div data-estado=\"${row.estado}\" data-totalpagado=\"${row.total}\" id=\"${row.id}\" class=\"mediosdepago max-w-full flex flex-wrap gap-2\">\r\n                                ${row.mediosdepago.map(mp=>`<button class=\"btn-xs btn-light\">${mp.mediopago}</button>`).join(' ')}\r\n                            </div>\r\n                        </td>\r\n                        <td class=\"${row.estado=='Paga'?'btn-xs btn-lima':'btn-xs btn-blueintense'}\">${row.estado}</td>\r\n                        <td class=\"\">$ ${Number(row.subtotal).toLocaleString()}</td>\r\n                        <td class=\"\">$ ${Number(row.total).toLocaleString()}</td>\r\n                        <td class=\"accionestd\"><div class=\"acciones-btns\" id=\"${row.id}\">\r\n                                <a class=\"btn-xs btn-turquoise\" href=\"/admin/caja/ordenresumen?id=${row.id}\">Ver</a> <button class=\"btn-xs btn-light\"><i class=\"fa-solid fa-print\"></i></button>\r\n                            </div>\r\n                        </td>\r\n                      `;\r\n        tablaVentas.appendChild(tr);\r\n      });\r\n    }\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === modalArqueocaja || event.target === Modalcerrarcaja || event.target === modalCambiarCaja || (event.target as HTMLInputElement).value === 'Cancelar' || (event.target as HTMLElement).closest('.salircerrarcaja') || (event.target as HTMLElement).closest('.finCerrarcaja')) {\r\n          modalArqueocaja.close();\r\n          Modalcerrarcaja.close();\r\n          modalCambiarCaja.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n\r\n          if((event.target as HTMLElement).closest('.finCerrarcaja')){  //Cuando se hace el cierre de caja\r\n            confirmarcierre();\r\n          }\r\n      }\r\n    }\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.detallecierrecaja')){\r\n    const btnImprimirDetalleCaja = document.querySelector('#btnImprimirDetalleCaja') as HTMLButtonElement;\r\n\r\n    ///////// imprimir detalle cierre\r\n    btnImprimirDetalleCaja?.addEventListener('click', ()=>{\r\n        const ventana = window.open('/printdetallecierre?id=1', '_blank');\r\n        if(ventana){\r\n            ventana.onload = ()=>{\r\n                ventana?.focus();\r\n                ventana?.print();\r\n                setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n            };\r\n        }\r\n    });\r\n\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.fechazetadiario')){\r\n\r\n    const btnsmultiselect = document.querySelectorAll<HTMLElement>('.btnmultiselect');\r\n    const selectedcajas = document.querySelectorAll<HTMLLIElement>('.caja');\r\n    const consultarZDiario = document.querySelector('#consultarZDiario') as HTMLButtonElement;\r\n    const tbodyMediosPago = document.querySelector('#tablaMediosPago tbody') as HTMLTableElement;\r\n    const base = document.querySelector('#base') as HTMLElement;\r\n    const valorImpuestoTotal = document.querySelector('#valorImpuestoTotal') as HTMLElement;\r\n    const ingresoVentas = document.querySelector('#ingresoVentas') as HTMLElement;\r\n    const totalDescuentos = document.querySelector('#totalDescuentos') as HTMLElement;\r\n    const realVentas = document.querySelector('#realVentas') as HTMLElement;\r\n    const cantidadElectronicas = document.querySelector('#cantidadElectronicas') as HTMLElement;\r\n    const cantidadPOS = document.querySelector('#cantidadPOS') as HTMLElement;\r\n    const valorElectronicas = document.querySelector('#valorElectronicas') as HTMLElement;\r\n    const valorPOS = document.querySelector('#valorPOS') as HTMLElement;\r\n    let fechainicio:string = \"\", fechafin:string = \"\";\r\n\r\n    //evento a los select drop dawn para abrir y cerrar\r\n    btnsmultiselect.forEach((btnmultiselect, index) =>{\r\n      btnmultiselect.addEventListener('click', (e:Event)=>{\r\n        cerrarlosmultiselect(index);\r\n        btnmultiselect.classList.toggle('open');\r\n      });\r\n    });\r\n    function cerrarlosmultiselect(index:number){\r\n      btnsmultiselect.forEach((element, i) =>{\r\n        if(i != index || !element.classList.contains('open'))element.classList.remove('open');\r\n      });\r\n    }\r\n    document.querySelector('.fechazetadiario')?.addEventListener('click', (e:Event)=>{\r\n      if(!(e.target as HTMLElement).closest('.btnmultiselect')&&!(e.target as HTMLElement).closest('.list-items')){\r\n        const btnmultiselect = document.querySelector('.open');\r\n        if(btnmultiselect)btnmultiselect.classList.toggle('open');\r\n      }\r\n    });\r\n    // mostrar el nombre de las cajas,segun se selecciona\r\n    selectedcajas.forEach(c=>{c.addEventListener('click', cajas_seleccionadas);});\r\n\r\n    function cajas_seleccionadas(){\r\n      const inputscaja = document.querySelectorAll<HTMLInputElement>('input.caja[type=\"checkbox\"]:checked');\r\n      const cajastext = document.querySelector('#cajastext') as HTMLElement;\r\n      cajastext.textContent = \". \";\r\n      inputscaja.forEach((inputcaja, i) =>{\r\n        if(i<inputscaja.length-1){\r\n          cajastext.textContent += inputcaja.nextElementSibling?.textContent!+' - ';\r\n        }else{\r\n          cajastext.textContent += inputcaja.nextElementSibling?.textContent!;\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    // SELECTOR DE FECHAS DEL CALENDARIO\r\n    ($('input[name=\"datetimes\"]')as any).daterangepicker({\r\n      timePicker: true,\r\n      //startDate: moment().startOf('hour'),\r\n      //endDate: moment().startOf('hour').add(32, 'hour'),\r\n      startDate: moment().set({ hour: 0, minute: 0, second: 1 }),\r\n      endDate: moment().set({ hour: 23, minute: 59, second: 59 }),\r\n      locale: {\r\n        format: 'M/DD hh:mm A'\r\n      }\r\n    });\r\n\r\n    $('input[name=\"datetimes\"]').on('apply.daterangepicker', function(ev, picker) {\r\n        var startDate = picker.startDate.format('YYYY-MM-DD HH:mm:ss');\r\n        var endDate = picker.endDate.format('YYYY-MM-DD HH:mm:ss');\r\n        fechainicio = startDate;\r\n        fechafin = endDate;\r\n        (document.querySelector('#fechainicio') as HTMLParagraphElement).textContent = fechainicio;\r\n        (document.querySelector('#fechafin') as HTMLParagraphElement).textContent = fechafin;\r\n    });\r\n\r\n    consultarZDiario.addEventListener('click', ()=>{\r\n      if(fechainicio == '' || fechafin == ''){\r\n         msjalertToast('error', '¡Error!', \"Elegir fechas a consultar\");\r\n         return;\r\n      }\r\n      const cajas = document.querySelectorAll<HTMLInputElement>('input.caja[type=\"checkbox\"]:checked');\r\n      const facturadores = document.querySelectorAll<HTMLInputElement>('input.facturador[type=\"checkbox\"]:checked');\r\n      \r\n      const valuecajas:string[] = Array.from(cajas).map(c=>c.value);\r\n      const valuefacturadores:string[] = Array.from(facturadores).map(f=>f.value);\r\n\r\n      (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"grid\";\r\n      (async ()=>{\r\n        const datos = new FormData();\r\n        datos.append('fechainicio', fechainicio);\r\n        datos.append('fechafin', fechafin);\r\n        datos.append('cajas', JSON.stringify(valuecajas));\r\n        datos.append('facturadores', JSON.stringify(valuefacturadores));\r\n        try {\r\n            const url = \"/admin/api/consultafechazetadiario\"; //llama a la api que esta en reportescontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            console.log(resultado);\r\n           (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n           reiniciarTablas();\r\n           imprimirtablaMediosPago(resultado.datosmediospago);\r\n           imprimirIngresos(resultado.datosventa);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n    });\r\n\r\n\r\n    function imprimirtablaMediosPago(datosmediospago:{id:string, nombre:string, valor:string}[]){\r\n      datosmediospago.forEach(mp =>{\r\n        const tr = document.createElement('tr');\r\n        tr.innerHTML = `<td class=\"\">${mp.nombre}</td> \r\n                        <td class=\"\">$${Number(mp.valor).toLocaleString()}</td>`;\r\n        tbodyMediosPago.appendChild(tr);\r\n      });\r\n    }\r\n\r\n    function imprimirIngresos(datosventa:{subtotalventa:string, base:string, valorimpuestototal:string, totalventa:string, ELECTRONICAS:string, POS:string, total_ELECTRONICAS:string, total_POS:string}){\r\n      base.textContent = '$'+Number(datosventa.base).toLocaleString();\r\n      valorImpuestoTotal.textContent = '$'+Number(datosventa.valorimpuestototal).toLocaleString();\r\n      ingresoVentas.textContent = '$'+Number(datosventa.subtotalventa).toLocaleString();\r\n      totalDescuentos.textContent = '$'+(Number(datosventa.subtotalventa)-Number(datosventa.totalventa)).toLocaleString();\r\n      realVentas.textContent = '$'+Number(datosventa.totalventa).toLocaleString();\r\n      cantidadElectronicas.textContent = datosventa.ELECTRONICAS;\r\n      cantidadPOS.textContent = datosventa.POS;\r\n      valorElectronicas.textContent = '$'+Number(datosventa.total_ELECTRONICAS).toLocaleString();\r\n      valorPOS.textContent = '$'+Number(datosventa.total_POS).toLocaleString();\r\n    }\r\n\r\n    function reiniciarTablas(){\r\n      while(tbodyMediosPago.firstChild)tbodyMediosPago.removeChild(tbodyMediosPago.firstChild);\r\n      ingresoVentas.textContent = '';\r\n      totalDescuentos.textContent = \"\";\r\n      realVentas.textContent = \"\";\r\n      cantidadElectronicas.textContent = '';\r\n      cantidadPOS.textContent = '';\r\n      valorElectronicas.textContent = '';\r\n      valorPOS.textContent = '';\r\n    }\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n    if(document.querySelector('.ordenresumen')){\r\n\r\n      const miDialogoFacturar:any = document.querySelector(\"#miDialogoFacturar\");\r\n      const miDialogoEliminarOrden = document.querySelector('#miDialogoEliminarOrden') as any;\r\n      const btnfacturar = document.querySelector<HTMLButtonElement>(\"#btnfacturar\");\r\n      const btneliminarorden = document.querySelector('#btneliminarorden') as HTMLButtonElement;\r\n      const btnCaja = document.querySelector('#caja') as HTMLSelectElement;\r\n      const btnTipoFacturador = document.querySelector('#facturador') as HTMLSelectElement;\r\n      const mediospago = document.querySelectorAll('.mediopago');\r\n      const btnsdevolverinv = document.querySelectorAll<HTMLInputElement>('input[name=\"devolverinventario\"]'); //radio buttom\r\n      const inputsInv = document.querySelectorAll<HTMLInputElement>('.inputInv');\r\n      const printcarta = document.querySelector('#printcarta');\r\n      const printcotizacion = document.querySelector('#printcotizacion');\r\n      const numOrden = document.querySelector('#numOrden');\r\n      const referenciaFactura = document.querySelector('#referenciaFactura');\r\n\r\n      const valorTotal = {subtotal: 0, impuesto: 0, dctox100: 0, descuento: 0, idtarifa: 0, valortarifa: 0, total: 0}; //datos global de la venta\r\n      const mapMediospago = new Map();\r\n  \r\n      valorTotal.subtotal = Number(document.querySelector('#subTotal')?.textContent);\r\n      valorTotal.total = Number(document.querySelector('#total')?.textContent?.replace(/[^\\d]/g, ''));\r\n      \r\n      \r\n      selectFacturadorSegunCaja(btnCaja);\r\n    \r\n      btnCaja.addEventListener('change', (e:Event)=>selectFacturadorSegunCaja(e.target as HTMLSelectElement));\r\n    \r\n      function selectFacturadorSegunCaja(z:HTMLSelectElement){\r\n        $('#facturador').val(z.options[z.selectedIndex].dataset.idfacturador??'1');\r\n      }\r\n\r\n      printcarta?.addEventListener('click', ()=>{\r\n        //leer parametros de url\r\n        const parametrosURL = new URLSearchParams(window.location.search);\r\n        const id = parametrosURL.get('id');\r\n        const ventana = window.open('/printfacturacarta?id='+id, '_blank');\r\n        if(ventana){\r\n          ventana.onload = ()=>{\r\n            ventana?.focus();\r\n            ventana?.print();\r\n            setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n          };\r\n        }\r\n      });\r\n\r\n      printcotizacion?.addEventListener('click', ()=>{\r\n        //leer parametros de url\r\n        const parametrosURL = new URLSearchParams(window.location.search);\r\n        const id = parametrosURL.get('id');\r\n        const ventana = window.open('/printcotizacion?id='+id, '_blank');\r\n        if(ventana){\r\n          ventana.onload = ()=>{\r\n            ventana?.focus();\r\n            ventana?.print();\r\n            setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n          };\r\n        }\r\n      });\r\n\r\n      btnfacturar?.addEventListener('click', ()=>{\r\n        /*if(modalidadEntrega.textContent === \": Domicilio\" && (selectCliente.value =='1' || selectCliente.value =='2' || !dirEntrega.value)){\r\n          msjAlert('error', 'Cliente o direccion no seleccionado', (document.querySelector('#divmsjalerta1') as HTMLElement));\r\n          return;\r\n        }*/\r\n        /*if(carrito.length){*/\r\n          subirModalPagar();\r\n          miDialogoFacturar.showModal();\r\n          document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        //}\r\n      });\r\n      \r\n\r\n      btneliminarorden?.addEventListener('click', ()=>{\r\n          miDialogoEliminarOrden.showModal();\r\n          document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n\r\n      ///////////////////// Logica botones devolver inventario ////////////////////////\r\n      btnsdevolverinv.forEach(inv=>{ //evento a los radiobutton\r\n        inv.addEventListener('change', (e:Event)=>{\r\n          document.querySelector('#productsInv')?.classList.toggle('hidden');\r\n          if((e.target as HTMLInputElement).value === \"1\"){\r\n            document.querySelectorAll('.inputInv').forEach(x=>x.setAttribute('required', ''));\r\n          }else{\r\n            document.querySelectorAll('.inputInv').forEach(x=>x.removeAttribute('required'));\r\n          }\r\n        });\r\n      });\r\n\r\n      inputsInv.forEach(inputinv =>{\r\n        inputinv.addEventListener('input', e=>{\r\n          const qty = (e.target as HTMLInputElement);\r\n          if(qty.value != qty.parentElement?.dataset.qty){\r\n            qty.classList.add('border-2', 'border-rose-600');\r\n            if(!document.querySelector('.alerta'))\r\n              msjAlert('error', 'Cantidad diferente a devolver a inventario', (document.querySelector('#divmsjalerta1') as HTMLElement));\r\n          }else{\r\n            qty.classList.remove('border-2', 'border-rose-600');\r\n            document.querySelector('.alerta')?.remove();\r\n          }\r\n        });\r\n      });\r\n\r\n      /////////////////////  logica del modal de pago  //////////////////////////\r\n      function subirModalPagar(){\r\n        document.querySelector('#totalPagar')!.textContent = `${valorTotal.total.toLocaleString()}`;\r\n        //como se puede cerrar el modal y aumentar los productos, hay calcular los inputs\r\n        let totalotrosmedios = 0;\r\n        mediospago.forEach((item, index)=>{\r\n          if(index>0)totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n        });\r\n\r\n        if(valorTotal.total<totalotrosmedios){\r\n          totalotrosmedios = 0;\r\n          mapMediospago.clear();\r\n          $('.mediopago').val(0);\r\n        }\r\n        (document.querySelector('.Efectivo')! as HTMLInputElement).value =  `${(valorTotal.total-totalotrosmedios).toLocaleString()}`;\r\n        mapMediospago.set('1', valorTotal.total-totalotrosmedios);\r\n        if(valorTotal.total-totalotrosmedios == 0 && mapMediospago.has('1'))mapMediospago.delete('1');\r\n        calcularCambio(document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n      }\r\n  \r\n      //eventos a los inputs medios de pago\r\n      mediospago.forEach(m=>{m.addEventListener('input', (e)=>{ calcularmediospago(e);});}); \r\n\r\n      function calcularmediospago(e:Event){\r\n        let totalotrosmedios = 0;\r\n        mediospago.forEach((item, index)=>{ //sumar todos los medios de pago menos el efectivo\r\n          if(index>0)totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n        });\r\n        if(totalotrosmedios<=valorTotal.total){\r\n          mapMediospago.set('1', valorTotal.total-totalotrosmedios);\r\n          if(valorTotal.total-totalotrosmedios == 0 && mapMediospago.has('1'))mapMediospago.delete('1');\r\n          mapMediospago.set((e.target as HTMLInputElement).id, parseInt((e.target as HTMLInputElement).value.replace(/[,.]/g, '')));\r\n          if((e.target as HTMLInputElement).value == '0' && mapMediospago.has((e.target as HTMLInputElement).id))mapMediospago.delete((e.target as HTMLInputElement).id);\r\n        }else{ //si la suma de los medios de pago superan el valor total, toma el ultimo input digitado y lo reestablece a su ultimo valor\r\n          if(mapMediospago.has((e.target as HTMLInputElement).id)){\r\n            (e.target as HTMLInputElement).value = mapMediospago.get((e.target as HTMLInputElement).id).toLocaleString();\r\n          }else{\r\n            (e.target as HTMLInputElement).value = '0';\r\n          }\r\n        }\r\n        (mediospago[0] as HTMLInputElement).value = (mapMediospago.get('1')??0).toLocaleString();\r\n        calcularCambio(document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n      }\r\n\r\n      /////////////////////  evento al input recibido  //////////////////////////\r\n      document.querySelector<HTMLInputElement>('#recibio')?.addEventListener('input', (e)=>{\r\n        calcularCambio((e.target as HTMLInputElement).value);\r\n      });\r\n      function calcularCambio(recibido:string):void{\r\n        recibido = recibido.replace(/[,.]/g, '');\r\n        if(Number(recibido)>mapMediospago.get('1')){\r\n          (document.querySelector('#cambio') as HTMLElement).textContent = (Number(recibido)-mapMediospago.get('1')).toLocaleString()+'';\r\n          return;\r\n        }\r\n        (document.querySelector('#cambio') as HTMLElement).textContent = '0';\r\n      }\r\n\r\n\r\n      ////////////////// evento al bton pagar del modal facturar //////////////////////\r\n      document.querySelector('#formfacturar')?.addEventListener('submit', e=>{\r\n        e.preventDefault();\r\n        procesarpedido('Guardado');\r\n      });\r\n\r\n      async function procesarpedido(estado:string){ //////PROCESAR PAGO DE COTIZACION SiN CAMBIAR DATOS DE LOS PRODUCTOS//////\r\n        const imprimir = document.querySelector('input[name=\"imprimir\"]:checked') as HTMLInputElement;\r\n        const datos = new FormData();\r\n        datos.append('id', (document.querySelector('#idorden') as HTMLElement).dataset.idorden!);\r\n        //datos.append('idcliente', (document.querySelector('#selectCliente') as HTMLSelectElement).value);\r\n        //datos.append('idvendedor', (document.querySelector('#vendedor') as HTMLInputElement).dataset.idvendedor!);\r\n        datos.append('idcaja', btnCaja.value);\r\n        datos.append('idconsecutivo', btnTipoFacturador.value);\r\n        //datos.append('iddireccion', dirEntrega.value);\r\n        //datos.append('idtarifazona', valorTotal.idtarifa+'');\r\n        //datos.append('cliente', selectCliente.options[selectCliente.selectedIndex].textContent!);\r\n        //datos.append('vendedor', (document.querySelector('#vendedor') as HTMLInputElement).value);\r\n        datos.append('caja', (document.querySelector('#caja option:checked') as HTMLSelectElement).textContent!);\r\n        datos.append('tipofacturador', btnTipoFacturador.options[btnTipoFacturador.selectedIndex].textContent!);\r\n        //datos.append('direccion', dirEntrega.options[dirEntrega.selectedIndex].text);\r\n        //datos.append('tarifazona', nombretarifa||'');\r\n        //datos.append('carrito', JSON.stringify(carrito));\r\n        //datos.append('totalunidades', totalunidades.textContent!);\r\n        //datos.append('mediosPago', JSON.stringify(Object.fromEntries(mapMediospago)));\r\n        datos.append('mediosPago', JSON.stringify(Array.from(mapMediospago, ([idmediopago, valor])=>({idmediopago, id_factura:0, valor}))));\r\n        datos.append('recibido', document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n        datos.append('transaccion', '');\r\n        datos.append('estado', estado);\r\n        datos.append('cambioaventa', '1');  //cambioaventa por defecto es 0\r\n        //datos.append('subtotal', valorTotal.subtotal+'');\r\n        //datos.append('impuesto', valorTotal.impuesto+'');\r\n        //datos.append('dctox100',valorTotal.dctox100+'');\r\n        //datos.append('descuento',valorTotal.descuento+'');\r\n        //datos.append('total', valorTotal.total.toString());\r\n        datos.append('observacion', document.querySelector<HTMLTextAreaElement>('#observacion')!.value);\r\n        //datos.append('departamento', '');\r\n        //datos.append('ciudad', (document.querySelector('#ciudadEntrega') as HTMLInputElement).value);\r\n        //datos.append('entrega', modalidadEntrega.textContent!.replace(': ', ''));\r\n        //datos.append('valortarifa', valorTotal.valortarifa+'');\r\n        //datos.append('opc1', '');\r\n        //datos.append('opc2', '');\r\n        try {\r\n            const url = \"/admin/api/facturarCotizacion\";  //va al controlador ventascontrolador\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            console.log(resultado);\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              /////// reinciar modulo de ventas\r\n              if(resultado.idfactura && imprimir.value === '1')printTicketPOS(resultado.idfactura);\r\n              ordenpagada();\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        miDialogoFacturar.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n  \r\n      function printTicketPOS(idfactura:string){\r\n      setTimeout(() => {\r\n        window.open(\"/admin/printPDFPOS?id=\" + idfactura, \"_blank\");\r\n      }, 1200);\r\n    }\r\n\r\n      function ordenpagada(){\r\n        if(btnfacturar)btnfacturar.style.display = \"none\";\r\n        (document.querySelector('#abrirOrden') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#estadoOrden') as HTMLElement).textContent = \"Paga\";\r\n      }\r\n  \r\n      function cerrarDialogoExterno(event:Event) {\r\n        const f = event.target;\r\n        if (event.target === miDialogoFacturar || event.target === miDialogoEliminarOrden || (event.target as HTMLInputElement).value === 'cancelar' || (f as HTMLInputElement).closest('.noeliminar') || (f as HTMLInputElement).closest('.sieliminar')) {\r\n            miDialogoFacturar.close();\r\n            miDialogoEliminarOrden.close();\r\n            if((f as HTMLInputElement).closest('.sieliminar'))eliminarorden();\r\n            document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n\r\n\r\n      function eliminarorden():void{\r\n        ///////*** crear arreglo de obj de los productos y sus cantidades ***///////\r\n        type producto = {id:string, idproducto:string, tipoproducto:string, tipoproduccion:string, rendimientoestandar:string, cantidad: string };\r\n        var products:producto[] = [];\r\n\r\n        inputsInv.forEach(inputinv =>{\r\n          const v = inputinv as HTMLInputElement;\r\n          products = [...products, {id: v.id, idproducto: v.id, tipoproducto: v.dataset.tipoproducto!, tipoproduccion: v.dataset.tipoproduccion!, rendimientoestandar: v.dataset.rendimientoestandar!, cantidad: v.value}];\r\n        });\r\n\r\n        (async ()=>{\r\n          const datos = new FormData();\r\n          datos.append('id', (document.querySelector('#idorden') as HTMLElement).dataset.idorden!); //id de la factura\r\n          datos.append('inv', JSON.stringify(products));\r\n          datos.append('devolverinv', (document.querySelector('input[name=\"devolverinventario\"]:checked') as HTMLInputElement).value);\r\n          //datos.append('domicilio', 0);\r\n          try {\r\n              const url = \"/admin/api/eliminarOrden\";  //api llamada en cajacontrolador.php\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();\r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                btneliminarorden.style.display = \"none\";\r\n                (document.querySelector('#estadoOrden') as HTMLElement).textContent = \"Eliminada\";\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();\r\n      }\r\n\r\n    }\r\n  \r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.pedidosguardados')){\r\n\r\n    let indiceFila=0, control=0, tablaPedidosGuardados:HTMLElement;\r\n/*\r\n    type cajasapi = {\r\n        id:string,\r\n        idtipoconsecutivo: string,\r\n        nombre: string,\r\n        negocio: string\r\n      };\r\n  \r\n      let cajas:cajasapi[]=[], unacaja:cajasapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allcajas\"; //llamado a la API REST y se trae todos los productos\r\n            const respuesta = await fetch(url); \r\n            cajas = await respuesta.json(); \r\n            console.log(cajas);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();*/\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaPedidosGuardados = ($('#tablaPedidosGuardados') as any).DataTable(configdatatables);\r\n\r\n    document.querySelector('#tablaPedidosGuardados')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if(target?.classList.contains(\"eliminarPedidoGuardado\")||target.parentElement?.classList.contains(\"eliminarPedidoGuardado\"))eliminarPedidoGuardado(e);\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar caja  //////////////////////\r\n    function eliminarPedidoGuardado(e:Event){\r\n      let idpedidoguardado = (e.target as HTMLElement).parentElement!.id, info = (tablaPedidosGuardados as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idpedidoguardado = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaPedidosGuardados as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: `Desea eliminar la orden guardado #${idpedidoguardado}?`,\r\n          text: \"La orden/cotizacion guardado sera eliminado definitivamente del sistema.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idpedidoguardado);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarPedidoGuardado\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaPedidosGuardados as any).row(indiceFila).remove().draw(); \r\n                        (tablaPedidosGuardados as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n    \r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateCaja') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","\r\n(()=>{\r\n    if(document.querySelector('.paginadorventas')){\r\n\r\n      const filtrocategorias = document.querySelectorAll('.filtrocategorias');  //los btns de las categorias\r\n\r\n      var options = {\r\n        valueNames: [ 'card-producto', { data: ['categoria', 'code'] }],\r\n        page: 18,\r\n        pagination: true,\r\n      };\r\n      var hackerList = new List('hacker-list', options);\r\n\r\n      filtrocategorias.forEach(element => {\r\n        element.addEventListener('click', (e)=>{\r\n          const categoria:string = (e.target as HTMLElement).dataset.categoria!;\r\n          hackerList.filter((item: any)=>{\r\n            if(categoria === 'Todos')return true;\r\n            return item.values().categoria === categoria}\r\n          );\r\n        });\r\n      });\r\n\r\n\r\n\r\n      const btnCarritoMovil = document.querySelector('#btnCarritoMovil') as HTMLButtonElement; //btn para abrir el modal del carrito de ventas en movil\r\n      const contenidocarrito = document.getElementById('contenidocarrito') as HTMLElement;\r\n      const contenedorDesktop = document.getElementById('contenedorDesktop') as HTMLDivElement;\r\n      const miDialogoCarritoMovil = document.getElementById('miDialogoCarritoMovil') as HTMLDialogElement;\r\n      const btnCerrarCarritoMovil = document.querySelector('#btnCerrarCarritoMovil') as HTMLButtonElement;\r\n      const screenWidth:number = window.innerWidth;\r\n\r\n      if(screenWidth<992)miDialogoCarritoMovil.appendChild(contenidocarrito);\r\n\r\n      window.addEventListener('resize', ()=>{\r\n        if (window.innerWidth >= 992) {\r\n          contenedorDesktop.appendChild(contenidocarrito);\r\n          miDialogoCarritoMovil.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        } else {\r\n          miDialogoCarritoMovil.appendChild(contenidocarrito);\r\n        }\r\n      });\r\n\r\n      // btn para abrir el carrito de ventas en movil\r\n      btnCarritoMovil?.addEventListener('click', (e)=>{\r\n        miDialogoCarritoMovil.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n\r\n      btnCerrarCarritoMovil.addEventListener('click', ()=>{\r\n        miDialogoCarritoMovil.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n\r\n      function cerrarDialogoExterno(event:Event) {\r\n        const f = event.target;\r\n        if (f === miDialogoCarritoMovil ) {\r\n          miDialogoCarritoMovil.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n\r\n})();","(()=>{\r\n  if(document.querySelector('.ventas')){\r\n    const btnAddCliente = document.querySelector('#addcliente') as HTMLElement;\r\n    const btnAddDir = document.querySelector('#adddir') as HTMLElement;\r\n    const selectCliente = document.querySelector('#selectCliente') as HTMLSelectElement;\r\n    const dirEntrega = document.querySelector('#direccionEntrega')! as HTMLSelectElement;\r\n    const facturarA = document.querySelector('#facturarA') as HTMLButtonElement;\r\n    const productos = document.querySelectorAll<HTMLElement>('#producto')!;\r\n    const contentproducts = document.querySelector('#productos');\r\n    const btnotros = document.querySelector('#btnotros') as HTMLButtonElement;  //btn de otros\r\n    const btndescuento = document.querySelector('#btndescuento') as HTMLButtonElement;\r\n    const btnEntrega = document.querySelector('#btnEntrega');\r\n    const modalidadEntrega = document.querySelector('#modalidadEntrega') as HTMLElement;\r\n    const totalunidades = document.querySelector('#totalunidades') as HTMLElement;\r\n    const tablaventa = document.querySelector('#tablaventa tbody');\r\n    const btnvaciar = document.querySelector('#btnvaciar');\r\n    const btnguardar = document.querySelector('#btnguardar');\r\n    const btnfacturar = document.querySelector('#btnfacturar');\r\n    const miDialogoAddCliente = document.querySelector('#miDialogoAddCliente') as any;\r\n    const miDialogoAddDir = document.querySelector('#miDialogoAddDir') as any;\r\n    const miDialogoOtrosProductos = document.querySelector('#miDialogoOtrosProductos') as any;\r\n    const miDialogoFacturarA = document.querySelector('#miDialogoFacturarA') as any;\r\n    const miDialogoDescuento = document.querySelector('#miDialogoDescuento') as any;\r\n    const miDialogoVaciar = document.querySelector('#miDialogoVaciar') as any;\r\n    const miDialogoGuardar = document.querySelector('#miDialogoGuardar') as any;\r\n    const miDialogoFacturar = document.querySelector('#miDialogoFacturar') as any;\r\n    const btnCaja = document.querySelector('#caja') as HTMLSelectElement; //select de la caja en el modal pagar\r\n    const btnTipoFacturador = document.querySelector('#facturador') as HTMLSelectElement; //select del consecutivo o facturador en el modal de pago\r\n    const mediospago = document.querySelectorAll('.mediopago');\r\n    const tipoDescts = document.querySelectorAll<HTMLInputElement>('input[name=\"tipodescuento\"]'); //radio buttom\r\n    const inputDescuento = document.querySelector('#inputDescuento') as HTMLInputElement;\r\n    \r\n    let carrito:{id:string, idproducto:string, tipoproducto:string, tipoproduccion:string, idcategoria: string, foto:string, nombreproducto: string, rendimientoestandar:string, valorunidad: string, cantidad: number, subtotal: number, base:number, impuesto:string, valorimp:number, descuento:number, total: number}[]=[];\r\n    const valorTotal = {subtotal: 0, base: 0, valorimpuestototal: 0, dctox100: 0, descuento: 0, idtarifa: 0, valortarifa: 0, total: 0}; //datos global de la venta\r\n    let tarifas:{id:string, idcliente:string, nombre:string, valor:string}[] = [];\r\n    let nombretarifa:string|undefined='', valorMax = 0;\r\n    \r\n    const constImp: {[key:string]: number} = {};\r\n    constImp['excluido'] = 0;\r\n    constImp['0'] = 0;  //exento de iva, tarifa 0%\r\n    constImp['5'] = 0.0476190476190476; //iva, tarifa al 5%,  Bienes/servicios al 5\r\n    constImp['8'] = 0.0740740740740741; //inc, tarifa al 8%,  impuesto nacional al consumo\r\n    constImp['16'] = 0.1379310344827586; //iva, tarifa al 16%,  contratos firmados con el estado antes de ley 1819\r\n    constImp['19'] = 0.1596638655462185; //iva, tarifa al 19%,  tarifa general\r\n\r\n    interface Item {\r\n      id_impuesto: number,\r\n      facturaid: number,\r\n      basegravable: number,\r\n      valorimpuesto: number\r\n    }\r\n    let factimpuestos:Item[] = [];\r\n\r\n    let otrosproductos:{id:number, nombre:string, cantidad:number, valorunidad:number, total:number}={\r\n      id: 0,\r\n      nombre: '',\r\n      cantidad: 0,\r\n      valorunidad: 0,\r\n      total: 0\r\n    }\r\n\r\n    type productsapi = {\r\n      id:string,\r\n      idcategoria: string,\r\n      idunidadmedida: string,\r\n      nombre: string,\r\n      foto: string,\r\n      impuesto: string,  //porcentaje(%) de impuesto\r\n      marca: string,\r\n      tipoproducto: string, // 0 = simple,  1 = compuesto\r\n      tipoproduccion: string, //0 = inmediato, 1 = construccion (aplica para productos compuestos)\r\n      codigo: string,\r\n      unidadmedida: string,\r\n      descripcion: string,\r\n      peso: string,\r\n      medidas: string,\r\n      color: string,\r\n      funcion: string,\r\n      uso:string,\r\n      fabricante: string,\r\n      garantia: string,\r\n      stock: string,\r\n      stockminimo: string,\r\n      categoria: string,\r\n      rendimientoestandar: string,\r\n      precio_compra: string,\r\n      precio_venta: string,\r\n      fecha_ingreso: string,\r\n      estado: string,\r\n      visible: string,\r\n      //idservicios:{idempleado:string, idservicio:string}[]\r\n    };\r\n    \r\n\r\n    let products:productsapi[]=[], unproducto:productsapi;\r\n    const mapMediospago = new Map();\r\n\r\n    (async ()=>{\r\n      try {\r\n          const url = \"/admin/api/allproducts\"; //llamado a la API REST\r\n          const respuesta = await fetch(url); \r\n          products = await respuesta.json(); \r\n          console.log(products);\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n    })();\r\n\r\n    /*productos.forEach(producto=>{\r\n      producto.addEventListener('click', (e)=>{\r\n        console.log(producto.dataset.id);\r\n      });\r\n    });*/\r\n\r\n    /////select 2 a btn selectCliente\r\n    //selectCliente.select2  multiple=\"multiple\" maximumSelectionLength: 1,\r\n    ($('#selectCliente') as any).select2();\r\n\r\n\r\n    /******** Obtener datos de factura guardada o cotizacion***********/\r\n    \r\n    \r\n\r\n\r\n                       /******** *********/\r\n\r\n    selectFacturadorSegunCaja(btnCaja);\r\n    \r\n    btnCaja.addEventListener('change', (e:Event)=>selectFacturadorSegunCaja(e.target as HTMLSelectElement));\r\n    \r\n    function selectFacturadorSegunCaja(z:HTMLSelectElement){\r\n      $('#facturador').val(z.options[z.selectedIndex].dataset.idfacturador??'1');\r\n    }\r\n\r\n    //////////// evento al boton añadir cliente nuevo //////////////\r\n    btnAddCliente?.addEventListener('click', (e)=>{\r\n      miDialogoAddCliente.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n    //////////// evento al boton añadir nueva direccion //////////////\r\n    btnAddDir?.addEventListener('click', (e)=>{\r\n      miDialogoAddDir.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n    //////////// evento al btn submit del formulario add nuevo cliente //////////////\r\n    document.querySelector('#formAddCliente')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      (async ()=>{\r\n        const datos = new FormData();\r\n        datos.append('nombre', (document.querySelector('#nombreclientenuevo') as HTMLInputElement).value);\r\n        datos.append('apellido', (document.querySelector('#clientenuevoapellido') as HTMLInputElement).value);\r\n        datos.append('tipodocumento', (document.querySelector('#tipodocumento') as HTMLInputElement).value);\r\n        datos.append('identificacion', (document.querySelector('#identificacion') as HTMLInputElement).value);\r\n        datos.append('telefono', (document.querySelector('#telefono') as HTMLInputElement).value);\r\n        datos.append('email', (document.querySelector('#clientenuevoemail') as HTMLInputElement).value);\r\n        datos.append('idtarifa', (document.querySelector('#clientenuevotarifa') as HTMLSelectElement).value);\r\n        datos.append('direccion', (document.querySelector('#clientenuevodireccion') as HTMLInputElement).value);\r\n        datos.append('departamento', (document.querySelector('#departamento') as HTMLInputElement).value);\r\n        datos.append('ciudad', (document.querySelector('#ciudad') as HTMLInputElement).value);\r\n        try {\r\n            const url = \"/admin/api/apiCrearCliente\";\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              addClienteSelect(resultado.nextID);\r\n              limpiarformdialog();\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      miDialogoAddCliente.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n    /////////////// añadir cliente al select despues de crearse ///////////////////\r\n    function addClienteSelect(clienteID:string): void{\r\n      const option = document.createElement('option');\r\n      option.textContent = (document.querySelector('#nombreclientenuevo') as HTMLInputElement).value + \" \" + (document.querySelector('#clientenuevoapellido') as HTMLInputElement).value;\r\n      option.value = clienteID;\r\n      option.dataset.tipodocumento = (document.querySelector('#tipodocumento') as HTMLInputElement).value;\r\n      option.dataset.identidad = (document.querySelector('#identificacion') as HTMLInputElement).value;\r\n      selectCliente?.appendChild(option);\r\n      $('#selectCliente').val(clienteID).trigger('change'); // seleccionar el cliente nuevo, en el select y dispara evento\r\n    }\r\n    //evento 'cambio' al selecionar cliente, tambien se ejecuta cuando se crea cliente nuevo//\r\n    $(\"#selectCliente\").on('change', (e)=>{\r\n      const idcli = (e.target as HTMLInputElement).value;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/direccionesXcliente?id=\"+idcli; //llamado a la API REST y se trae las direcciones segun cliente elegido\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json(); \r\n          addDireccionSelect(resultado);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      const select = (e.target as HTMLSelectElement);\r\n      const x:string = select.options[select.selectedIndex].dataset.identidad||'';\r\n      (document.querySelector('#documento') as HTMLInputElement).value = x;\r\n    });\r\n    ////// añade direccion al select de direcciones, cuando se selecciona o se agrega un cliente o si se agrega un nueva direccion/////\r\n    function addDireccionSelect<T extends {id:string, idcliente:string, idtarifa:string, tarifa:{id:string, idcliente:string, nombre:string, valor:string}, direccion:string, ciudad:string}>(addrs: T[]):void{\r\n      while(dirEntrega?.firstChild)dirEntrega.removeChild(dirEntrega?.firstChild);\r\n      const setTarifas = new Set();\r\n      tarifas.length = 0;\r\n      console.log(addrs);\r\n      addrs.forEach(dir =>{\r\n        const option = document.createElement('option');\r\n        option.textContent = dir.direccion;\r\n        option.value = dir.id;\r\n        option.dataset.idcliente = dir.idcliente;\r\n        option.dataset.idtarifa = dir.idtarifa;\r\n        option.dataset.ciudad = dir.ciudad;\r\n        dirEntrega.appendChild(option);\r\n        dir.tarifa.idcliente = dir.idcliente;\r\n        if(!setTarifas.has(dir.tarifa.id)){\r\n          tarifas = [...tarifas, dir.tarifa];\r\n          setTarifas.add(dir.tarifa.id);\r\n        }\r\n      });\r\n      setTarifas.clear();\r\n      printTarifaEnvio();\r\n      valorCarritoTotal();\r\n      (document.querySelector('#ciudadEntrega') as HTMLInputElement).value = addrs[0]?.ciudad??'No especificado';\r\n    }\r\n    ///////// Evento al select de direcciones ////////////\r\n    dirEntrega?.addEventListener('change', (e)=>{\r\n      const select = (e.target as HTMLSelectElement);\r\n      const x:string = select.options[select.selectedIndex].dataset.ciudad||'';\r\n      (document.querySelector('#ciudadEntrega') as HTMLInputElement).value = x;\r\n      printTarifaEnvio();\r\n      valorCarritoTotal();\r\n    });\r\n\r\n    ////////////////// evento al btn submit del formulario add direccion //////////////////////\r\n    document.querySelector('#formAddDir')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      (async ()=>{\r\n        const datos = new FormData();\r\n        datos.append('idcliente', selectCliente.value);\r\n        datos.append('departamento', (document.querySelector('#adddepartamento') as HTMLInputElement).value);\r\n        datos.append('ciudad', (document.querySelector('#addciudad') as HTMLInputElement).value);\r\n        datos.append('direccion', (document.querySelector('#adddireccion') as HTMLInputElement).value);\r\n        datos.append('idtarifa', (document.querySelector('#tarifa') as HTMLSelectElement).value);\r\n        try {\r\n            const url = \"/admin/api/addDireccionCliente\";  //direccionescontrolador\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              addDireccionSelect(resultado.direcciones);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      miDialogoAddDir.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    //////////// evento al boton modalidad de entrega //////////////\r\n    btnEntrega?.addEventListener('click', (e:Event)=>{\r\n      modalidadEntrega.textContent == \": Presencial\"?modalidadEntrega.textContent = \": Domicilio\":modalidadEntrega.textContent=\": Presencial\";\r\n      printTarifaEnvio();\r\n      valorCarritoTotal();\r\n    });\r\n\r\n    ///////// funcion que imprime el valor de la tarifa segun direccion ///////////\r\n    function printTarifaEnvio():void{\r\n      const selectDir = dirEntrega.options[dirEntrega.selectedIndex];\r\n      if(modalidadEntrega.textContent == \": Presencial\" || dirEntrega.selectedIndex == -1){\r\n        valorTotal.valortarifa = 0;\r\n        nombretarifa = '';\r\n        return;\r\n      }\r\n      if(selectDir?.dataset.idtarifa && modalidadEntrega.textContent == \": Domicilio\"){\r\n        const objtarifa = tarifas.find(tarifa =>{\r\n          if(tarifa.idcliente == selectDir.dataset.idcliente && tarifa.id == selectDir.dataset.idtarifa)\r\n            return true;\r\n        });\r\n        valorTotal.valortarifa = Number(objtarifa?.valor);\r\n        valorTotal.idtarifa = Number(objtarifa?.id);\r\n        nombretarifa = objtarifa?.nombre;\r\n      }\r\n    }\r\n\r\n    ///////////////////// evento al btn facturar A /////////////////////\r\n    facturarA.addEventListener('click', (e:Event)=>{\r\n      miDialogoFacturarA.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    ///////////////////// Evento al btn Otros /////////////////////////\r\n    btnotros.addEventListener('click', (e:Event)=>{\r\n      miDialogoOtrosProductos.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    /////////////////////Evento al formulario de agregar otros productos //////////////////////\r\n    document.querySelector('#formOtrosProductos')?.addEventListener('submit', (e:Event)=>{\r\n      e.preventDefault();\r\n      const formelements = (e.target as HTMLFormElement).elements;\r\n      const cantidadotros = Number((formelements.namedItem('cantidadotros') as HTMLInputElement).value);\r\n      const preciootros = Number((formelements.namedItem('preciootros') as HTMLInputElement).value);\r\n      \r\n      otrosproductos!.id += -1 ;\r\n      otrosproductos!.nombre = (formelements.namedItem('nombreotros') as HTMLInputElement).value;\r\n      otrosproductos!.cantidad = cantidadotros;\r\n      otrosproductos!.valorunidad = preciootros/cantidadotros;\r\n      otrosproductos!.total = preciootros;\r\n      \r\n      products = [...products, {\r\n        id: otrosproductos!.id+'', \r\n        idcategoria: '-1',\r\n        idunidadmedida: '1',\r\n        nombre: otrosproductos!.nombre,\r\n        foto: 'na',\r\n        impuesto: '0', //impuesto en %\r\n        marca: 'na',\r\n        tipoproducto: '-1', // 0 = simple,  1 = compuesto\r\n        tipoproduccion: '-1', //0 = inmediato, 1 = construccion\r\n        codigo: '-1',\r\n        unidadmedida: 'Unidad',\r\n        descripcion: 'na',\r\n        peso: 'na',\r\n        medidas: 'na',\r\n        color: 'na',\r\n        funcion: 'na',\r\n        uso: 'na',\r\n        fabricante: 'na',\r\n        garantia: 'na',\r\n        stock: '0',\r\n        stockminimo: '1',\r\n        categoria: 'na',\r\n        rendimientoestandar: '1',\r\n        precio_compra: 'na',\r\n        precio_venta: otrosproductos!.valorunidad+'',\r\n        fecha_ingreso: '',\r\n        estado: '1',\r\n        visible: '1'\r\n      }];\r\n\r\n      actualizarCarrito(otrosproductos.id+'', cantidadotros, false, false);\r\n      miDialogoOtrosProductos.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    //////////// evento a toda el area de los productos a seleccionar //////////////\r\n    contentproducts?.addEventListener('click', (e:Event)=>{\r\n      const elementProduct = (e.target as HTMLElement)?.closest('.producto');\r\n      const count = carrito.find(x=>x.idproducto == (elementProduct as HTMLElement).dataset.id);\r\n\r\n      if(window.innerWidth < 992){\r\n        // Crear popup\r\n        const popup = document.createElement('div');\r\n        popup.className = `popup absolute z-40 right-8 top-1/3 opacity-0 translate-x-0 translate-y-0 transition-all duration-500 w-10 h-10 rounded-full text-center grid place-items-center bg-teal-400 text-white font-semibold text-lg`;\r\n        popup.innerHTML = `${(count?.cantidad??0)+1}`;\r\n        elementProduct!.appendChild(popup);\r\n        // Forzar reflow para activar transición\r\n        requestAnimationFrame(() => {\r\n          popup.classList.remove(\"opacity-0\", \"translate-y-0\", \"translate-x-0\");\r\n          popup.classList.add(\"opacity-100\", \"-translate-y-14\", \"translate-x-10\");\r\n        });\r\n        const popupx = document.querySelectorAll('.popup');\r\n        setTimeout(() => {popupx.forEach(t=>{t.remove();});}, 2500);\r\n      }\r\n\r\n      if(elementProduct)\r\n        actualizarCarrito((elementProduct as HTMLElement).dataset.id!, 1, true, true);\r\n    });\r\n\r\n    function printProduct(id:string){ //recibe el id del producto\r\n      const uncarrito = carrito.find(x=>x.idproducto==id)!;\r\n      const tr = document.createElement('TR');\r\n      tr.classList.add('productselect');\r\n      tr.dataset.id = `${id}`;\r\n      tr.insertAdjacentHTML('afterbegin', `<td class=\"!px-0 !py-2 text-xl text-gray-500 leading-5\">${uncarrito?.nombreproducto}</td> \r\n\r\n      <td class=\"!px-0 !py-2\">\r\n        <div class=\"flex items-center gap-2 px-4\">\r\n          <button type=\"button\" class=\"w-8 h-8 bg-indigo-700 text-white rounded-full flex items-center justify-center\">\r\n            <span class=\"menos material-symbols-outlined text-base\">remove</span>\r\n          </button>\r\n\r\n          <input type=\"text\" class=\"inputcantidad w-20 px-2 text-center\" value=\"${uncarrito.cantidad}\"\r\n            >\r\n\r\n          <button type=\"button\" class=\"w-8 h-8 bg-indigo-700 text-white rounded-full flex items-center justify-center\">\r\n            <span class=\"mas material-symbols-outlined text-base\">add</span>\r\n          </button>\r\n        </div>\r\n      </td>\r\n\r\n\r\n      <td class=\"!p-2 text-xl text-gray-500 leading-5\">$${Number(uncarrito?.valorunidad).toLocaleString()}</td>\r\n      <td class=\"!p-2 text-xl text-gray-500 leading-5\">$${Number(uncarrito?.total).toLocaleString()}</td>\r\n      <td class=\"accionestd\"><div class=\"acciones-btns\"><button class=\"btn-md btn-red eliminarProducto\"><i class=\"fa-solid fa-trash-can\"></i></button></div></td>`);\r\n      tablaventa?.appendChild(tr);\r\n    } //oninput=\"this.value = parseInt(this.value.replace(/[,.]/g, '')||1)\"\r\n\r\n\r\n    function actualizarCarrito(id:string, cantidad:number, control:boolean, stateinput:boolean){\r\n      const index = carrito.findIndex(x=>x.idproducto==id); //devuelve el index si el producto existe\r\n      \r\n      if(index>-1){\r\n        if(cantidad <= 0){\r\n          cantidad = 0;\r\n          carrito[index].total = 0;\r\n        }\r\n        if(control){ //cuando el producto se agrega desde la lista de productos\r\n          carrito[index].cantidad += cantidad;\r\n        }else{ //cuando el producto se agrega por cantidad\r\n          carrito[index].cantidad = cantidad;\r\n        }\r\n       \r\n        \r\n        carrito[index].subtotal = parseInt(carrito[index].valorunidad)*carrito[index].cantidad;\r\n        carrito[index].total = carrito[index].subtotal;\r\n        //calculo del impuesto y base por producto en el carrito deventas\r\n        carrito[index].valorimp = parseFloat((carrito[index].total*constImp[carrito[index].impuesto??0]).toFixed(3));\r\n        carrito[index].base = parseFloat((carrito[index].total-carrito[index].valorimp).toFixed(3));\r\n\r\n        valorCarritoTotal();\r\n        if(stateinput)\r\n        (tablaventa?.querySelector(`TR[data-id=\"${id}\"] .inputcantidad`) as HTMLInputElement).value = carrito[index].cantidad+'';\r\n        (tablaventa?.querySelector(`TR[data-id=\"${id}\"]`)?.children?.[3] as HTMLElement).textContent = \"$\"+carrito[index].total.toLocaleString();\r\n      }else{  //agregar a carrito si el producto no esta agregado en carrito, cuando se agrega por primera vez\r\n        const producto = products.find(x=>x.id==id)!; //products es el arreglo de todos los productos traido por api\r\n        \r\n        const productovalorimp = (Number(producto.precio_venta)*cantidad)*constImp[producto.impuesto??'0']; //si producto.impuesto es null toma el valor de cero\r\n        const productototal = Number(producto.precio_venta)*cantidad;\r\n        \r\n        var a:{id:string, idproducto:string, tipoproducto:string, tipoproduccion:string, idcategoria: string, nombreproducto: string, rendimientoestandar:string, foto:string, valorunidad: string, cantidad: number, subtotal: number, base:number, impuesto:string, valorimp:number, descuento:number, total:number} = {\r\n          id: '',\r\n          idproducto: producto?.id!,\r\n          tipoproducto: producto.tipoproducto,\r\n          tipoproduccion: producto.tipoproduccion,\r\n          idcategoria: producto.idcategoria,\r\n          nombreproducto: producto.nombre,\r\n          rendimientoestandar: producto.rendimientoestandar,\r\n          foto: producto.foto,\r\n          valorunidad: producto.precio_venta,\r\n          cantidad: cantidad,\r\n          subtotal: productototal, //este es el subtotal del producto\r\n          base: productototal-productovalorimp,\r\n          impuesto: producto.impuesto, //porcentaje de impuesto, es null si es excluido de iva\r\n          valorimp: productovalorimp,\r\n          descuento: 0,\r\n          total: productototal //valorunidad x cantidad\r\n        }\r\n        \r\n        carrito = [...carrito, a];\r\n        valorCarritoTotal();\r\n        printProduct(id);\r\n      }\r\n    }\r\n\r\n    ////////////////////// valores finales subtotal y total ////////////////////////\r\n    function valorCarritoTotal(){\r\n      //calcular el impuesto discriminado por tarifa\r\n     \r\n      const idimpuesto: Record<string, number> = {'0': 1, '5': 2, '16': 3, '19': 4, 'excluido': 5, '8': 6 };\r\n      const objbase:{'0':number, '5':number, '16':number, '19':number, 'excluido':number, '8':number} = {'0': 0, '5': 0, '16': 0, '19': 0, 'excluido':0, '8': 0};\r\n\r\n      const mapImpuesto = new Map();\r\n      carrito.forEach(x=>{\r\n        if(x.impuesto){\r\n          if(mapImpuesto.has(x.impuesto)){\r\n            const valor = mapImpuesto.get(x.impuesto) + x.total*constImp[x.impuesto];\r\n            mapImpuesto.set(x.impuesto, valor);\r\n          }else{\r\n            mapImpuesto.set(x.impuesto, x.total*constImp[x.impuesto]);\r\n          }\r\n        }\r\n        if(x.impuesto == null)x.impuesto = \"excluido\";\r\n          objbase[x.impuesto as keyof typeof objbase] += x.base;\r\n          const impValor = mapImpuesto.get(x.impuesto)??0;\r\n          const index = factimpuestos.findIndex(Obj=>Obj.id_impuesto == idimpuesto[x.impuesto]);\r\n          if(index!=-1){ //si existe remplazar obj\r\n            factimpuestos[index] = {id_impuesto:idimpuesto[x.impuesto], facturaid:0, basegravable:objbase[x.impuesto as keyof typeof objbase], valorimpuesto: impValor};\r\n          }else{\r\n            factimpuestos = [...factimpuestos, {id_impuesto:idimpuesto[x.impuesto], facturaid:0, basegravable:objbase[x.impuesto as keyof typeof objbase], valorimpuesto: impValor}];\r\n          }\r\n        \r\n      });\r\n\r\n     \r\n      //Valor del impuesto total de todos los productos, es decir de la factura;\r\n      let valorTotalImp:number = 0;\r\n      for(let valorImp of mapImpuesto.values())valorTotalImp += valorImp;\r\n      \r\n      valorTotal.valorimpuestototal = parseFloat(valorTotalImp.toFixed(3));  //valor del impuesto total factura de todos los productos\r\n\r\n      valorTotal.subtotal = carrito.reduce((total, x)=>x.total+total, 0);\r\n      valorTotal.base = valorTotal.subtotal - valorTotal.valorimpuestototal;  //valor de la base total factura de todos los productos\r\n      valorTotal.total = valorTotal.subtotal + valorTotal.valortarifa - valorTotal.descuento;\r\n      document.querySelector('#subTotal')!.textContent = '$'+valorTotal.subtotal.toLocaleString();\r\n       (document.querySelector('#impuesto') as HTMLElement).textContent = '$'+valorTotalImp.toLocaleString('es-CO', {minimumFractionDigits: 2, maximumFractionDigits: 2});\r\n      (document.querySelector('#valorTarifa') as HTMLElement).textContent = '$'+valorTotal.valortarifa.toLocaleString();\r\n      document.querySelector('#total')!.textContent = '$ '+valorTotal.total.toLocaleString();\r\n      // cantidad total de productos\r\n      totalunidades.textContent = carrito.reduce((total, producto)=>producto.cantidad+total, 0)+'';\r\n    }\r\n\r\n    //////////////////////////////////// evento a la tabla de productos de venta ///////////////////////////////////\r\n    tablaventa?.addEventListener('click', (e:Event)=>{\r\n      const elementProduct = (e.target as HTMLElement)?.closest('.productselect');\r\n      const idProduct = (elementProduct as HTMLElement).dataset.id!;\r\n      if((e.target as HTMLElement).classList.contains('menos')){\r\n        const productoCarrito = carrito.find(x=>x.idproducto==idProduct);\r\n        actualizarCarrito(idProduct, productoCarrito!.cantidad-1, false, true);\r\n      }\r\n      if((e.target as HTMLElement).classList.contains('inputcantidad')){\r\n        if((e.target as HTMLElement).dataset.event != \"eventInput\"){\r\n          e.target?.addEventListener('input', (e)=>{\r\n           \r\n            let val = (e.target as HTMLInputElement).value;\r\n            val = val.replace(/[^0-9.]/g, '');\r\n            const partes = val.split('.');\r\n            if(partes.length > 2)val = partes[0]+'.'+partes.slice(1).join('');\r\n            if (val.startsWith('.'))val = '1';\r\n            if (val === '' || isNaN(parseFloat(val))) val = '0';\r\n\r\n            (e.target as HTMLInputElement).value = val;\r\n            actualizarCarrito(idProduct, Number((e.target as HTMLInputElement).value), false, false);\r\n          });\r\n          (e.target as HTMLElement).dataset.event = \"eventInput\"; //se marca al input que ya tiene evento añadido\r\n        }\r\n      }\r\n      if((e.target as HTMLElement).classList.contains('mas')){\r\n        const productoCarrito = carrito.find(x=>x.idproducto==idProduct);\r\n        actualizarCarrito(idProduct, productoCarrito!.cantidad+1, false, true);\r\n      }\r\n      if((e.target as HTMLElement).classList.contains('eliminarProducto') || (e.target as HTMLElement).tagName == \"I\"){\r\n        carrito = carrito.filter(x=>x.idproducto != idProduct);\r\n        valorCarritoTotal();\r\n        tablaventa?.querySelector(`TR[data-id=\"${idProduct}\"]`)?.remove();\r\n      }\r\n    });\r\n\r\n    /////////////////btns descuento, vaciar, guardar y facturar /////////////////\r\n\r\n    btndescuento?.addEventListener('click', ()=>{\r\n      if(carrito.length){\r\n        valorMax = valorTotal.subtotal;\r\n        //validar que si al reducir los productos o aumentar recalcular el porcentaje\r\n        miDialogoDescuento.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    });\r\n\r\n    btnvaciar?.addEventListener('click', ()=>{\r\n      if(carrito.length){\r\n        miDialogoVaciar.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    });\r\n\r\n    btnguardar?.addEventListener('click', ()=>{\r\n      if(carrito.length){\r\n        miDialogoGuardar.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    });\r\n\r\n    btnfacturar?.addEventListener('click', ()=>{\r\n        if(modalidadEntrega.textContent === \": Domicilio\" && (selectCliente.value =='1' || selectCliente.value =='2' || !dirEntrega.value)){\r\n          msjAlert('error', 'Cliente o direccion no seleccionado', (document.querySelector('#divmsjalerta1') as HTMLElement));\r\n          return;\r\n        }\r\n      if(carrito.length){\r\n        subirModalPagar();\r\n        miDialogoFacturar.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    });\r\n\r\n  /////////////////////  logica del descuento  //////////////////////////\r\n    tipoDescts.forEach(desc=>{ //evento a los radiobutton\r\n      desc.addEventListener('change', (e:Event)=>{\r\n        if((e.target as HTMLInputElement).value === \"porcentaje\"){\r\n          valorMax = 100;\r\n          inputDescuento.value = '';\r\n        }\r\n        if((e.target as HTMLInputElement).value === \"valor\"){\r\n          inputDescuento.value = '';\r\n          valorMax = valorTotal.subtotal;\r\n        }\r\n      });\r\n    });\r\n\r\n    inputDescuento?.addEventListener('input', (e)=>{\r\n      var valorInput:number = Number((e.target as HTMLInputElement).value);\r\n      if(valorInput > valorMax){\r\n        inputDescuento.value = valorMax+'';\r\n        valorInput = valorMax; \r\n      }\r\n    });\r\n\r\n    document.querySelector('#formDescuento')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      const valorInput:number = Number(inputDescuento.value);\r\n      if(tipoDescts[0].checked){  //tipo valor\r\n        valorTotal.dctox100 = Math.round((valorInput*100)/valorTotal.subtotal);  // valor en porcentaje\r\n        valorTotal.descuento = valorInput;  //valor del dcto\r\n      }\r\n      if(tipoDescts[1].checked){ //tipo porcentaje\r\n        valorTotal.descuento = (valorTotal.subtotal*valorInput)/100;  //valor descontado\r\n        valorTotal.dctox100 = valorInput;  //valor en porcentaje\r\n      }\r\n      valorTotal.total = valorTotal.subtotal - valorTotal.descuento + valorTotal.valortarifa;\r\n      document.querySelector('#total')!.textContent = '$ '+valorTotal.total.toLocaleString();\r\n      (document.querySelector('#descuento') as HTMLElement).textContent = '$'+valorTotal.descuento.toLocaleString();\r\n      miDialogoDescuento.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n  /////////////////////  logica del modal de pago  //////////////////////////\r\n    function subirModalPagar(){\r\n      document.querySelector('#totalPagar')!.textContent = `${valorTotal.total.toLocaleString()}`;\r\n      //como se puede cerrar el modal y aumentar los productos, hay calcular los inputs\r\n      let totalotrosmedios = 0;\r\n      mediospago.forEach((item, index)=>{\r\n        if(index>0)totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n      });\r\n\r\n      if(valorTotal.total<totalotrosmedios){\r\n        totalotrosmedios = 0;\r\n        mapMediospago.clear();\r\n        $('.mediopago').val(0);\r\n      }\r\n      (document.querySelector('.Efectivo')! as HTMLInputElement).value =  `${(valorTotal.total-totalotrosmedios).toLocaleString()}`;\r\n      mapMediospago.set('1', valorTotal.total-totalotrosmedios); //inicialmente el valor total se establece para efectivo\r\n      if(valorTotal.total-totalotrosmedios == 0 && mapMediospago.has('1'))mapMediospago.delete('1');\r\n      calcularCambio(document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n    }\r\n    \r\n    //eventos a los inputs medios de pago\r\n    mediospago.forEach(m=>{m.addEventListener('input', (e)=>{ calcularmediospago(e);});}); \r\n\r\n    function calcularmediospago(e:Event){\r\n      let totalotrosmedios = 0;\r\n      mediospago.forEach((item, index)=>{ //sumar todos los medios de pago menos el efectivo\r\n        if(index>0)totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n      });\r\n      if(totalotrosmedios<=valorTotal.total){\r\n        mapMediospago.set('1', valorTotal.total-totalotrosmedios);\r\n        if(valorTotal.total-totalotrosmedios == 0 && mapMediospago.has('1'))mapMediospago.delete('1'); //se elimina medio de pago efectivo\r\n        mapMediospago.set((e.target as HTMLInputElement).id, parseInt((e.target as HTMLInputElement).value.replace(/[,.]/g, '')));\r\n        if((e.target as HTMLInputElement).value == '0' && mapMediospago.has((e.target as HTMLInputElement).id))mapMediospago.delete((e.target as HTMLInputElement).id);\r\n      }else{ //si la suma de los medios de pago superan el valor total, toma el ultimo input digitado y lo reestablece a su ultimo valor\r\n        if(mapMediospago.has((e.target as HTMLInputElement).id)){\r\n          (e.target as HTMLInputElement).value = mapMediospago.get((e.target as HTMLInputElement).id).toLocaleString();\r\n        }else{\r\n          (e.target as HTMLInputElement).value = '0';\r\n        }\r\n      }\r\n      (mediospago[0] as HTMLInputElement).value = (mapMediospago.get('1')??0).toLocaleString();  //medio de pago en efectivo\r\n      calcularCambio(document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n    }\r\n\r\n    /////////////////////  evento al input recibido  //////////////////////////\r\n    document.querySelector<HTMLInputElement>('#recibio')?.addEventListener('input', (e)=>{\r\n      calcularCambio((e.target as HTMLInputElement).value);\r\n    });\r\n\r\n    function calcularCambio(recibido:string):void{\r\n      recibido = recibido.replace(/[,.]/g, '');\r\n      if(Number(recibido)>mapMediospago.get('1')){\r\n        (document.querySelector('#cambio') as HTMLElement).textContent = (Number(recibido)-mapMediospago.get('1')).toLocaleString()+'';\r\n        return;\r\n      }\r\n      (document.querySelector('#cambio') as HTMLElement).textContent = '0';\r\n    }\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      const f = event.target;\r\n      if (f === miDialogoDescuento || f === miDialogoVaciar || f === miDialogoGuardar || f === miDialogoFacturar || f === miDialogoAddCliente || f === miDialogoOtrosProductos || f === miDialogoFacturarA || f === miDialogoAddDir || (f as HTMLInputElement).closest('.salir') || (f as HTMLInputElement).closest('.novaciar') || (f as HTMLInputElement).closest('.sivaciar') || (f as HTMLInputElement).closest('.noguardar') || (f as HTMLInputElement).closest('.siguardar') || (f as HTMLButtonElement).value == \"Cancelar\" ) {\r\n        miDialogoDescuento.close();\r\n        miDialogoVaciar.close();\r\n        miDialogoGuardar.close();\r\n        miDialogoFacturar.close();\r\n        miDialogoAddCliente.close();\r\n        miDialogoAddDir.close();\r\n        miDialogoFacturarA.close();\r\n        miDialogoOtrosProductos.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        if((f as HTMLInputElement).closest('.siguardar'))procesarpedido('Guardado', '1');\r\n        if((f as HTMLInputElement).closest('.sivaciar'))vaciarventa();\r\n      }\r\n    }\r\n\r\n    function vaciarventa():void\r\n    {\r\n      if(datosfactura?.id)datosfactura.id = '';\r\n      mapMediospago.clear();\r\n      $('.mediopago').val(0);\r\n      carrito.length = 0;\r\n      factimpuestos.length = 0;\r\n      history.replaceState({}, \"\", \"/admin/ventas\");\r\n      while(tablaventa?.firstChild)tablaventa.removeChild(tablaventa?.firstChild);\r\n      (document.querySelector('#npedido') as HTMLInputElement).value = '';\r\n      document.querySelector('#subTotal')!.textContent = '$'+0;\r\n      (document.querySelector('#descuento') as HTMLElement).textContent = '$'+0;\r\n      document.querySelector('#total')!.textContent = '$'+0;\r\n      $('#selectCliente').val(1).trigger('change');   //aqui tambien se reinicia la elemento del valor de la tarifa\r\n      for(const key in valorTotal)valorTotal[key as keyof typeof valorTotal] = 0; //reiniciar objeto\r\n      \r\n    }\r\n\r\n\r\n    ////////////////// evento al bton pagar del modal facturar //////////////////////\r\n    document.querySelector('#formfacturar')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      if(valorTotal.total <= 0 || valorTotal.subtotal <= 0){\r\n        msjAlert('error', 'No se puede procesar pago con $0', (document.querySelector('#divmsjalerta2') as HTMLElement));\r\n        return;\r\n      }\r\n      procesarpedido('Paga', '0');\r\n    });\r\n\r\n    async function procesarpedido(estado:string, ctz:string){\r\n      const imprimir = document.querySelector('input[name=\"imprimir\"]:checked') as HTMLInputElement;\r\n      const datos = new FormData();\r\n      datos.append('id', datosfactura?.id??'');\r\n      datos.append('idcliente', (document.querySelector('#selectCliente') as HTMLSelectElement).value);\r\n      datos.append('idvendedor', (document.querySelector('#vendedor') as HTMLInputElement).dataset.idvendedor!);\r\n      datos.append('idcaja', btnCaja.value);\r\n      datos.append('idconsecutivo', btnTipoFacturador.value);\r\n      datos.append('iddireccion', dirEntrega.value);\r\n      datos.append('idtarifazona', valorTotal.idtarifa+'');\r\n      datos.append('cliente', selectCliente.value=='1'?'N/A':selectCliente.options[selectCliente.selectedIndex].textContent!);\r\n      datos.append('vendedor', (document.querySelector('#vendedor') as HTMLInputElement).value);\r\n      datos.append('caja', (document.querySelector('#caja option:checked') as HTMLSelectElement).textContent!);\r\n      datos.append('tipofacturador', btnTipoFacturador.options[btnTipoFacturador.selectedIndex].textContent!);\r\n      datos.append('direccion', dirEntrega.options[dirEntrega.selectedIndex]?.text??'');\r\n      datos.append('tarifazona', nombretarifa||'');\r\n      datos.append('carrito', JSON.stringify(carrito.filter(x=>x.cantidad>0)));  //envio de todos los productos con sus cantidades\r\n      datos.append('totalunidades', totalunidades.textContent!);\r\n      //datos.append('mediosPago', JSON.stringify(Object.fromEntries(mapMediospago)));\r\n      datos.append('mediosPago', JSON.stringify(Array.from(mapMediospago, ([idmediopago, valor])=>({idmediopago, id_factura:0, valor}))));\r\n      datos.append('factimpuestos', JSON.stringify(factimpuestos));\r\n      datos.append('recibido', document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n      datos.append('transaccion', '');\r\n      datos.append('cotizacion', ctz);  //1= cotizacion, 0 = no cotizacion pagada.\r\n      datos.append('estado', estado);\r\n      datos.append('subtotal', valorTotal.subtotal+'');\r\n      datos.append('base', valorTotal.base.toFixed(3));\r\n      datos.append('valorimpuestototal', valorTotal.valorimpuestototal+''); //valor total del impuesto. \r\n      datos.append('dctox100',valorTotal.dctox100+'');\r\n      datos.append('descuento',valorTotal.descuento+'');\r\n      datos.append('total', valorTotal.total.toString());\r\n      datos.append('observacion', document.querySelector<HTMLTextAreaElement>('#observacion')!.value);\r\n      datos.append('departamento', '');\r\n      datos.append('ciudad', (document.querySelector('#ciudadEntrega') as HTMLInputElement).value);\r\n      datos.append('entrega', modalidadEntrega.textContent!.replace(': ', ''));\r\n      datos.append('valortarifa', valorTotal.valortarifa+'');\r\n      datos.append('opc1', '');\r\n      datos.append('opc2', '');\r\n      try {\r\n          const url = \"/admin/api/facturar\";  //va al controlador ventascontrolador\r\n          const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n          const resultado = await respuesta.json();\r\n          console.log(resultado);\r\n          if(resultado.exito !== undefined){\r\n            msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            /////// reinciar modulo de ventas\r\n            vaciarventa();\r\n            if(resultado.idfactura && imprimir.value === '1')printTicketPOS(resultado.idfactura);\r\n          }else{\r\n            msjalertToast('error', '¡Error!', resultado.error[0]);\r\n          }\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n      miDialogoFacturar.close();\r\n      (document.getElementById('miDialogoCarritoMovil') as HTMLDialogElement).close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n\r\n    function printTicketPOS(idfactura:string){\r\n      setTimeout(() => {\r\n        window.open(\"/admin/printPDFPOS?id=\" + idfactura, \"_blank\");\r\n      }, 1200);\r\n    }\r\n\r\n    \r\n    /////////////////////////obtener datos de cotizacion /////////////////////\r\n    const parametrosURL = new URLSearchParams(window.location.search);\r\n    const id = parametrosURL.get('id');\r\n    let datosfactura:{id:string, idcliente: string, idvendedor:string, idcaja:string, idconsecutivo:string, iddireccion:string, idtarifazona:string, idcierrecaja:string, num_orden:string, cliente:string, vendedor:string, caja:string, tipofacturador:string, direccion:string, tarifazona:string, totalunidades:string, recibido:string, transaccion:string, tipoventa:string,\r\n                      cotizacion:string, estado:string, cambioaventa:string, referencia:string, subtotal:string, base:string, valorimpuestototal:string, dctox100:string, descuento:string, total:string, observacion:string, departamento:string, ciudad:string, entrega:string, valortarifa:string, fechacreacion:string, fechapago:string, opc1:string, opc2:string};\r\n    if(id){\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/getcotizacion_venta?id=\"+id; //llamado a la API REST\r\n            const respuesta = await fetch(url); \r\n            const resultado = await respuesta.json();\r\n            datosfactura = resultado.factura;\r\n            carrito = resultado.productos;\r\n            console.log(carrito);\r\n            carrito.forEach(item =>printProduct(item.idproducto));\r\n            valorCarritoTotal(); //recalcula impuestos de la cotizacion y valores totales\r\n            (document.querySelector('#npedido') as HTMLInputElement).value = datosfactura.num_orden;\r\n            $('#selectCliente').val(datosfactura.idcliente).trigger('change');\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formAddCliente') as HTMLFormElement)?.reset();\r\n    }\r\n  }\r\n\r\n})();\r\n","(function(){\r\n  if(document.querySelector('.empleados')){\r\n    const crearempleado = document.querySelector('#crearempleado') as HTMLElement;\r\n    const dialogoEmpleado:any = document.getElementById(\"miDialogoEmpleado\");\r\n    const dialogoContraseña = document.getElementById(\"miDialogoContraseña\");\r\n    const btnupImage = document.querySelector('#upImage') as HTMLInputElement;\r\n    const btncustomUpImage = document.querySelector('#customUpImage') as HTMLButtonElement;\r\n    const imginputfile = document.querySelector('#imginputfile') as HTMLImageElement;  //img\r\n\r\n    const inputNombre = document.querySelector('#nombreempleado') as HTMLInputElement;\r\n    const inputApellido = document.querySelector('#apellidoempleado') as HTMLInputElement;\r\n    const inputnickname = document.querySelector('#nicknameempleado') as HTMLInputElement;\r\n    const inputcedula = document.querySelector('#cedulaempleado') as HTMLInputElement;\r\n    const inputpassword = document.querySelector('#passwordempleado') as HTMLInputElement;\r\n    const inputpassword2 = document.querySelector('#passwordempleado2 ') as HTMLInputElement;\r\n    const inputMovil = document.querySelector('#movilempleado ') as HTMLInputElement;\r\n    const inputEmail = document.querySelector('#emailempleado') as HTMLInputElement;\r\n    const inputDepartamento = document.querySelector('#departamentoempleado') as HTMLInputElement;\r\n    const inputCiudad = document.querySelector('#ciudadempleado') as HTMLInputElement;\r\n    const inputDireccion = document.querySelector('#direccionempleado') as HTMLInputElement;\r\n    const inputPerfil = document.querySelector('#perfilempleado') as HTMLInputElement;\r\n\r\n    let indiceFila=0, control=0, tablaempleados:HTMLElement;\r\n    let empleadosapi: {\r\n      id:string, \r\n      nombre: string,\r\n      apellido: string,\r\n      nickname: string,\r\n      cedula: string,\r\n      movil: string,\r\n      email: string,\r\n      departamento: string,\r\n      ciudad: string,\r\n      direccion: string,\r\n      perfil: string,\r\n      img:string,\r\n      idusuariospermisos:{id:string, usuarioid:string, permisoid:string}[]\r\n      permisos:{id:string, nombre:string}[]\r\n    }[] =[];\r\n      \r\n    let unempleado:{\r\n      id:string,\r\n      nombre: string,\r\n      apellido: string,\r\n      nickname: string,\r\n      cedula: string,\r\n      movil: string,\r\n      email: string,\r\n      departamento: string,\r\n      ciudad: string,\r\n      direccion: string,\r\n      perfil: string, \r\n      img:string,\r\n      idusuariospermisos:{id:string, usuarioid:string, permisoid:string}[]\r\n      permisos:{id:string, nombre:string}[]\r\n    }|undefined;\r\n\r\n    /////////////////  traer todos los empleados con sus skills  ///////////////////\r\n    (async ()=>{\r\n      try {\r\n          const url = \"/admin/api/getAllemployee\"; //llamado a la API REST\r\n          const respuesta = await fetch(url); \r\n          empleadosapi = await respuesta.json(); \r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n    })();\r\n\r\n    inputPerfil.addEventListener('change', (e)=>{\r\n      if((e.target as HTMLSelectElement).value == '2'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"none\";\r\n      }\r\n      if((e.target as HTMLSelectElement).value == '3'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"block\";\r\n      }\r\n      if((e.target as HTMLSelectElement).value == '4'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"block\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"none\";\r\n      }\r\n    });\r\n\r\n    //////////////////  TABLA //////////////////////\r\n    tablaempleados = ($('#tablaempleados') as any).DataTable(configdatatables);\r\n\r\n    //////////////////// ventana modal al crear empleado  //////////////////////\r\n    crearempleado.addEventListener('click', (e)=>{\r\n      control = 0;\r\n      limpiarformdialog();\r\n      document.querySelector('#modalEmpleado')!.textContent = \"Crear empleado\";\r\n      (document.querySelector('#btnEditarCrearEmpleado') as HTMLInputElement).value = \"Crear\";\r\n      dialogoEmpleado.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n     //////////////////// Cargar imagen como preview  //////////////////////\r\n    btncustomUpImage.addEventListener('click', ()=>btnupImage.click());\r\n    btnupImage.addEventListener('change', function(){\r\n      const file = this.files?.[0];\r\n      if(file){\r\n        const reader = new FileReader();\r\n        reader.onload = function(){\r\n          const resrult:(string | ArrayBuffer | null) = reader.result;\r\n          if(typeof resrult == \"string\")imginputfile.src = resrult;\r\n        } \r\n        reader.readAsDataURL(file);\r\n      }\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaempleados')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarEmpleado\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarEmpleado\"))editarEmpleado(e);\r\n      if((e.target as HTMLElement)?.classList.contains(\"updatePassword\")||(e.target as HTMLElement).parentElement?.classList.contains(\"updatePassword\"))updatePassword(e);\r\n      if(target?.classList.contains(\"eliminarEmpleado\")||target.parentElement?.classList.contains(\"eliminarEmpleado\"))eliminarEmpleado(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar empleado  //////////////////////\r\n    function editarEmpleado(e:Event){\r\n      let idempleado = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idempleado = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalEmpleado')!.textContent = \"Actualizar Empleado\";\r\n      (document.querySelector('#btnEditarCrearEmpleado') as HTMLInputElement)!.value = \"Actualizar\";\r\n      unempleado = empleadosapi.find(x => x.id==idempleado); //me trae al empleado seleccionado\r\n      imginputfile.src = \"/build/img/\"+unempleado?.img;\r\n      inputNombre.value = unempleado?.nombre??'';\r\n      inputApellido.value = unempleado?.apellido??'';\r\n      inputnickname.value = unempleado?.nickname??'';\r\n      inputcedula.value = unempleado?.cedula??'';\r\n      inputMovil.value = unempleado?.movil??'';\r\n      inputEmail.value = unempleado?.email??'';\r\n      inputDepartamento.value = unempleado?.departamento??'';\r\n      inputCiudad.value = unempleado?.ciudad??'';\r\n      inputDireccion.value = unempleado?.direccion??'';\r\n      $('#perfilempleado').val(unempleado?.perfil??'');\r\n      if(unempleado?.perfil == '2'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"none\";\r\n      }\r\n      if(unempleado?.perfil == '3'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"block\";\r\n      }\r\n      if(unempleado?.perfil == '4'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"block\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"none\";\r\n      }\r\n      printpermisos(unempleado?.permisos??[]);\r\n      indiceFila = (tablaempleados as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      dialogoEmpleado.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    function printpermisos(leave:{id:string, nombre:string}[]){\r\n      document.querySelectorAll<HTMLInputElement>('#contentpermisos input[type=\"checkbox\"]').forEach(checkbox=>{checkbox.checked=false}); //limpia los checkbox\r\n      leave.forEach(s =>{\r\n        const inputpermiso = document.querySelector(`input[value=\"${s.id}\"]`) as HTMLInputElement;\r\n        inputpermiso.checked = true;\r\n      });\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar empleado  //////////////////////\r\n    document.querySelector('#formCrearUpdateEmpleado')?.addEventListener('submit', e=>{\r\n      if(control){\r\n        e.preventDefault();\r\n        var imgFile:(string|File), info = (tablaempleados as any).page.info();\r\n        imgFile=unempleado!.img;\r\n        if(!imginputfile.src.includes(unempleado!.img)){ //cambio de imagen\r\n          imgFile = ((e.target as HTMLFormElement).elements.namedItem(\"upImage\") as HTMLInputElement).files?.[0]!; //obtengo el archivo\r\n          if(imgFile){\r\n            if(imgFile.type!==\"image/png\"&&imgFile.type!==\"image/jpeg\"){\r\n              msjAlert('error', 'No es un formato valido para la foto', (document.querySelector('#divmsjalertaempleado1') as HTMLElement));\r\n              return;\r\n            }\r\n            if(imgFile.size>550000){ //si es mayor a 550KB\r\n              msjAlert('error', 'La imagen no debe superar los 500KB', document.querySelector('#divmsjalertaempleado1')!);\r\n              return;\r\n            }\r\n          }\r\n        }\r\n\r\n        var arraypermisos:{id:string, nombre:string}[] = [];\r\n        document.querySelectorAll<HTMLInputElement>('#contentpermisos input[type=\"checkbox\"]').forEach(x=>{\r\n          if(x.checked)arraypermisos = [...arraypermisos, {id:x.value, nombre: x.nextElementSibling?.textContent??'permiso'}];\r\n        });\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unempleado!.id);\r\n          datos.append('img', imgFile); //en el backend no se lee con $_POST, se lee con $_FILES\r\n          datos.append('nombre', inputNombre.value);\r\n          datos.append('apellido', inputApellido.value);\r\n          datos.append('nickname', inputnickname.value);\r\n          datos.append('cedula', inputcedula.value);\r\n          datos.append('password', inputpassword.value);\r\n          datos.append('password2', inputpassword2.value);\r\n          datos.append('movil', inputMovil.value);\r\n          datos.append('email', inputEmail.value);\r\n          datos.append('departamento', inputDepartamento.value);\r\n          datos.append('ciudad', inputCiudad.value);\r\n          datos.append('direccion', inputDireccion.value);\r\n          datos.append('perfil', inputPerfil.value);\r\n          datos.append('idpermisos', JSON.stringify(arraypermisos.map(v=>v.id)));\r\n          try {\r\n              const url = \"/admin/api/actualizarEmpleado\";\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                ///////// cambiar la fila completa, su contenido //////////\r\n                const datosActuales = (tablaempleados as any).row(indiceFila+=info.start).data();\r\n                /*NOMBRE*/datosActuales[1] = inputNombre.value +' '+inputApellido.value;\r\n                /*img*/datosActuales[2] = `<div class=\"text-center\"><img style=\"width: 40px;\" src=\"/build/img/${resultado.rutaimg}\" alt=\"\"></div>`;\r\n                /*USER*/datosActuales[3] = inputnickname.value;\r\n                /*PERFIL*/datosActuales[6] = inputPerfil.value==='1'?'Empleado':inputPerfil.value=='2'?'Admin':'Propietario';\r\n                //actualizar arreglo de permisos\r\n                empleadosapi.forEach(a=>{\r\n                  if(a.id == unempleado?.id){\r\n                    a.permisos = arraypermisos;\r\n                    a.img = resultado.rutaimg;\r\n                  }\r\n                });\r\n                (tablaempleados as any).row(indiceFila).data(datosActuales).draw();\r\n                (tablaempleados as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n              dialogoEmpleado.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n      } //fin if(control)\r\n    });\r\n\r\n\r\n    ////////////////////  Actualizar contraseña del empleado  //////////////////////\r\n    function updatePassword(e:Event){\r\n      let idempleado = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement).tagName === 'I')idempleado = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      unempleado = empleadosapi.find(x => x.id==idempleado);\r\n      (document.querySelector('#nombreEmpleadoPass') as HTMLElement).textContent = unempleado?.nombre+\" \"+(unempleado?.apellido??'');\r\n      (dialogoContraseña as any)?.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    document.querySelector('#formContraseña')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      (async ()=>{\r\n        const datos = new FormData();\r\n        datos.append('id', unempleado!.id);\r\n        datos.append('password', (document.querySelector('#changePassword') as HTMLInputElement).value);\r\n        try {\r\n            const url = \"/admin/api/updatepassword\";\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.exito[0]);\r\n            }\r\n            (dialogoContraseña as any)?.close();\r\n            document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar el empleado  //////////////////////\r\n    function eliminarEmpleado(e:Event){\r\n      let idempleado = (e.target as HTMLElement).parentElement!.id, info = (tablaempleados as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idempleado = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaempleados as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar el empleado?',\r\n          text: \"El empleado sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idempleado);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarEmpleado\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaempleados as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaempleados as any).page(info.page).draw('page');\r\n                        empleadosapi = empleadosapi.filter(x=>x.id!=idempleado);\r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === dialogoEmpleado || event.target === dialogoContraseña || (event.target as HTMLInputElement).value === 'Cancelar') {\r\n          dialogoEmpleado.close();\r\n          (dialogoContraseña as any)?.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      imginputfile.src = ' ';\r\n      (document.querySelector('#formCrearUpdateEmpleado') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.gestionbancos')){\r\n    const crearBanco = document.querySelector('#crearBanco') as HTMLButtonElement;\r\n    const miDialogoBanco = document.querySelector('#miDialogoBanco') as any;\r\n\r\n    let indiceFila=0, control=0, tablaBancos:HTMLElement;\r\n\r\n    type bancosapi = {\r\n        id:string,\r\n        nombre: string,\r\n        numerocuenta: string,\r\n        saldo: string,\r\n        estado: string,\r\n        created_at: string\r\n      };\r\n  \r\n      let bancos:bancosapi[]=[], unbanco:bancosapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allbancos\"; //llamado a la API REST y se trae todos los bancos\r\n            const respuesta = await fetch(url); \r\n            bancos = await respuesta.json(); \r\n            console.log(bancos);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaBancos = ($('#tablaBancos') as any).DataTable(configdatatables);\r\n\r\n    crearBanco.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalBanco')!.textContent = \"Crear banco\";\r\n        (document.querySelector('#btnEditarCrearBanco') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoBanco.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaBancos')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarBanco\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarBanco\"))editarBanco(e);\r\n      if(target?.classList.contains(\"eliminarBanco\")||target.parentElement?.classList.contains(\"eliminarBanco\"))eliminarBanco(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar banco  //////////////////////\r\n    function editarBanco(e:Event){\r\n      let idbanco = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idbanco = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalBanco')!.textContent = \"Actualizar banco\";\r\n      (document.querySelector('#btnEditarCrearBanco') as HTMLInputElement)!.value = \"Actualizar\";\r\n      \r\n      unbanco = bancos.find(x => x.id==idbanco); //me trae a la banco seleccionada\r\n      (document.querySelector('#nombreBanco')as HTMLInputElement).value = unbanco?.nombre!;\r\n      (document.querySelector('#numeroCuenta')as HTMLInputElement).value = unbanco?.numerocuenta!;\r\n      \r\n      indiceFila = (tablaBancos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoBanco.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar banco  //////////////////////\r\n    document.querySelector('#formCrearUpdateBanco')?.addEventListener('submit', e=>{\r\n      let urlApi = \"crearBanco\";\r\n      if(control)urlApi = \"actualizarBanco\";\r\n\r\n        e.preventDefault();\r\n        var info = (tablaBancos as any).page.info();\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unbanco?.id?unbanco?.id:'');\r\n          datos.append('nombre', $('#nombreBanco').val()as string);\r\n          datos.append('numerocuenta', $('#numeroCuenta').val()as string);\r\n          try {\r\n              const url = \"/admin/api/\"+urlApi;\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                miDialogoBanco.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                if(!control){ //si es crear registro\r\n                  /// actualizar el arregle de la banco ///\r\n                  bancos = [...bancos, resultado.banco];\r\n                  (tablaBancos as any).row.add([\r\n                      (tablaBancos as any).rows().count() + 1,\r\n                      resultado.banco.nombre,\r\n                      resultado.banco.numerocuenta,\r\n                      resultado.banco.created_at,\r\n                      `<div class=\"acciones-btns\" id=\"${resultado.banco.id}\" data-banco=\"${resultado.banco.nombre}\">\r\n                          <button class=\"btn-md btn-turquoise editarBanco\"><i class=\"fa-solid fa-pen-to-square\"></i></button>\r\n                          <button class=\"btn-md btn-red eliminarBanco\"><i class=\"fa-solid fa-trash-can\"></i></button>\r\n                      </div>`\r\n                  ]).draw(false); // draw(false) evita recargar toda la tabla\r\n                }else{ //si es actualizar\r\n                  /// actualizar el arregle de bancos ///\r\n                  bancos.forEach(a=>{if(a.id == unbanco?.id)a = Object.assign(a, resultado.banco[0]);});\r\n                  const datosActuales = (tablaBancos as any).row(indiceFila+=info.start).data();\r\n                  /*BANCO*/      datosActuales[1] = resultado.banco[0].nombre;\r\n                  /*NUM CUENTA*/ datosActuales[2] = resultado.banco[0].numerocuenta;\r\n                  (tablaBancos as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaBancos as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar banco  //////////////////////\r\n    function eliminarBanco(e:Event){\r\n      let idbanco = (e.target as HTMLElement).parentElement!.id, info = (tablaBancos as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idbanco = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaBancos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar la banco?',\r\n          text: \"La banco sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idbanco);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarBanco\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaBancos as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaBancos as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoBanco || (event.target as HTMLInputElement).value === 'Salir') {\r\n          miDialogoBanco.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          /*if((event.target as HTMLElement).closest('.finCerrarbanco')){  //Cuando se hace el cierre de banco\r\n            confirmarcierre();\r\n          }*/\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateBanco') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.gestioncajas')){\r\n    const crearCaja = document.querySelector('#crearCaja') as HTMLButtonElement;\r\n    const miDialogoCaja = document.querySelector('#miDialogoCaja') as any;\r\n\r\n    let indiceFila=0, control=0, tablaCajas:HTMLElement;\r\n\r\n    type cajasapi = {\r\n        id:string,\r\n        idtipoconsecutivo: string,\r\n        nombre: string,\r\n        negocio: string\r\n      };\r\n  \r\n      let cajas:cajasapi[]=[], unacaja:cajasapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allcajas\"; //llamado a la API REST y se trae todos los productos\r\n            const respuesta = await fetch(url); \r\n            cajas = await respuesta.json(); \r\n            console.log(cajas);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaCajas = ($('#tablaCajas') as any).DataTable(configdatatables);\r\n\r\n    crearCaja.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalCaja')!.textContent = \"Crear caja\";\r\n        (document.querySelector('#btnEditarCrearCaja') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoCaja.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaCajas')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarCaja\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarCaja\"))editarCaja(e);\r\n      if(target?.classList.contains(\"eliminarCaja\")||target.parentElement?.classList.contains(\"eliminarCaja\"))eliminarCaja(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar caja  //////////////////////\r\n    function editarCaja(e:Event){\r\n      let idcaja = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idcaja = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalCaja')!.textContent = \"Actualizar caja\";\r\n      (document.querySelector('#btnEditarCrearCaja') as HTMLInputElement)!.value = \"Actualizar\";\r\n      \r\n      unacaja = cajas.find(x => x.id==idcaja); //me trae a la caja seleccionada\r\n      (document.querySelector('#nombrecaja')as HTMLInputElement).value = unacaja?.nombre!;\r\n      $('#idtipoconsecutivo').val(unacaja?.idtipoconsecutivo??'');\r\n      $('#negociogestioncaja').val(1);\r\n      \r\n      indiceFila = (tablaCajas as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoCaja.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar caja  //////////////////////\r\n    document.querySelector('#formCrearUpdateCaja')?.addEventListener('submit', e=>{\r\n      let urlApi = \"crearCaja\";\r\n      if(control)urlApi = \"actualizarCaja\";\r\n\r\n        e.preventDefault();\r\n        var info = (tablaCajas as any).page.info();\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unacaja?.id?unacaja?.id:'');\r\n          datos.append('idtipoconsecutivo', $('#idtipoconsecutivo').val()as string);\r\n          datos.append('nombre', $('#nombrecaja').val()as string);\r\n          datos.append('negocio', $('#negociogestioncaja').val()as string);\r\n          try {\r\n              const url = \"/admin/api/\"+urlApi;\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                miDialogoCaja.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                if(!control){ //si es crear registro\r\n                  /// actualizar el arregle de la caja ///\r\n                  cajas = [...cajas, resultado.caja];\r\n                  (tablaCajas as any).row.add([\r\n                      (tablaCajas as any).rows().count() + 1,\r\n                      resultado.caja.nombre,\r\n                      resultado.caja.nombreconsecutivo.nombre,\r\n                      resultado.caja.negocio,\r\n                      `<div class=\"acciones-btns\" id=\"${resultado.caja.id}\" data-caja=\"${resultado.caja.nombre}\">\r\n                          <button class=\"btn-md btn-turquoise editarCaja\"><i class=\"fa-solid fa-pen-to-square\"></i></button>\r\n                          <button class=\"btn-md btn-red eliminarCaja\"><i class=\"fa-solid fa-trash-can\"></i></button>\r\n                      </div>`\r\n                  ]).draw(false); // draw(false) evita recargar toda la tabla\r\n                }else{ //si es actualizar\r\n                  /// actualizar el arregle de cajas ///\r\n                  cajas.forEach(a=>{if(a.id == unacaja?.id)a = Object.assign(a, resultado.caja[0]);});\r\n                  const datosActuales = (tablaCajas as any).row(indiceFila+=info.start).data();\r\n                  /*CAJA*/      datosActuales[1] = resultado.caja[0].nombre;\r\n                  /*FACT AUTO*/ datosActuales[2] = $('#idtipoconsecutivo option:selected').text();\r\n                  /*NEGOCIO*/   datosActuales[3] = $('#negociogestioncaja option:selected').text();\r\n                  (tablaCajas as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaCajas as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar caja  //////////////////////\r\n    function eliminarCaja(e:Event){\r\n      let idcaja = (e.target as HTMLElement).parentElement!.id, info = (tablaCajas as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idcaja = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaCajas as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar la caja?',\r\n          text: \"La caja sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idcaja);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarCaja\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaCajas as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaCajas as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoCaja || (event.target as HTMLInputElement).value === 'Salir') {\r\n          miDialogoCaja.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          /*if((event.target as HTMLElement).closest('.finCerrarcaja')){  //Cuando se hace el cierre de caja\r\n            confirmarcierre();\r\n          }*/\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateCaja') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.gestionfacturadores')){\r\n\r\n    const crearCompañia = document.querySelector('#crearCompañia') as HTMLButtonElement;\r\n    const obtenerresolucion = document.querySelector('#obtenerresolucion') as HTMLButtonElement;\r\n    const setpruebas = document.querySelector('#setpruebas') as HTMLButtonElement;\r\n    const miDialogoCompañia = document.querySelector('#miDialogoCompañia') as any;\r\n    const miDialogoGetResolucion = document.querySelector('#miDialogoGetResolucion') as any;\r\n    const miDialogosetpruebas = document.querySelector('#miDialogosetpruebas') as any;\r\n    let indiceFila=0, control=0, tablaCompañias:HTMLElement;\r\n\r\n    crearCompañia.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalCompañia')!.textContent = \"Crear compañia\";\r\n        (document.querySelector('#btnEditarCrearCompañia') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoCompañia.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    obtenerresolucion.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        miDialogoGetResolucion.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    setpruebas.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        miDialogosetpruebas.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoCompañia || event.target === miDialogosetpruebas || event.target === miDialogoGetResolucion || (event.target as HTMLInputElement).value === 'Salir' || (event.target as HTMLInputElement).value === 'Cancelar') {\r\n          miDialogoCompañia.close();\r\n          miDialogoGetResolucion.close();\r\n          miDialogosetpruebas.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateCompañia') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.gestionfacturadores')){\r\n    const crearFacturador = document.querySelector('#crearFacturador') as HTMLButtonElement;\r\n    const miDialogoFacturador = document.querySelector('#miDialogoFacturador') as any;\r\n\r\n    let indiceFila=0, control=0, tablaFacturadores:HTMLElement;\r\n\r\n    type facturadoresapi = {\r\n        id:string,\r\n        idtipofacturador: string,\r\n        idnegocio: string,\r\n        nombre: string\r\n        rangoinicial:string,\r\n        rangofinal: string,\r\n        siguientevalor: string,\r\n        fechainicio: string\r\n        fechafin:string,\r\n        resolucion: string,\r\n        consecutivoremplazo: string,\r\n        prefijo: string,\r\n        mostrarresolucion:string,\r\n        mostrarimpuestodiscriminado: string,\r\n        tokenfacturaelectronica: string,\r\n        estado: string\r\n      };\r\n  \r\n      let facturadores:facturadoresapi[]=[], unfacturador:facturadoresapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allfacturadores\"; //llamado a la API REST y se trae todos los productos\r\n            const respuesta = await fetch(url); \r\n            facturadores = await respuesta.json(); \r\n            console.log(facturadores);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaFacturadores = ($('#tablaFacturadores') as any).DataTable(configdatatables);\r\n\r\n    crearFacturador.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalFacturador')!.textContent = \"Crear facturador\";\r\n        (document.querySelector('#btnEditarCrearFacturador') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoFacturador.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaFacturadores')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarFacturador\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarFacturador\"))editarFacturador(e);\r\n      if(target?.classList.contains(\"eliminarFacturador\")||target.parentElement?.classList.contains(\"eliminarFacturador\"))eliminarFacturador(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar facturador  //////////////////////\r\n    function editarFacturador(e:Event){\r\n      let idfacturador = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idfacturador = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalFacturador')!.textContent = \"Actualizar facturador\";\r\n      (document.querySelector('#btnEditarCrearFacturador') as HTMLInputElement)!.value = \"Actualizar\";\r\n      \r\n      unfacturador = facturadores.find(x => x.id==idfacturador); //me trae el facturador seleccionado\r\n      (document.querySelector('#nombrefacturador')as HTMLInputElement).value = unfacturador?.nombre!;\r\n      $('#idtipofacturador').val(unfacturador?.idtipofacturador??'');\r\n      $('#rangoinicial').val(unfacturador?.rangoinicial??'');\r\n      $('#rangofinal').val(unfacturador?.rangofinal??'');\r\n      $('#siguientevalor').val(unfacturador?.siguientevalor??'');\r\n      $('#fechainicio').val(unfacturador?.fechainicio??'');\r\n      $('#fechafin').val(unfacturador?.fechafin??'');\r\n      $('#resolucion').val(unfacturador?.resolucion??'');\r\n      $('#prefijo').val(unfacturador?.prefijo??'');\r\n      $('#negociofacturador').val(1);\r\n      \r\n      indiceFila = (tablaFacturadores as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoFacturador.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar facturador  //////////////////////\r\n    document.querySelector('#formCrearUpdateFacturador')?.addEventListener('submit', e=>{\r\n      let urlApi = \"crearFacturador\";\r\n      if(control)urlApi = \"actualizarFacturador\";\r\n\r\n        e.preventDefault();\r\n        var info = (tablaFacturadores as any).page.info();\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unfacturador?.id?unfacturador?.id:'');\r\n          datos.append('idtipoconsecutivo', $('#idtipoconsecutivo').val()as string);\r\n          datos.append('nombre', $('#nombrecaja').val()as string);\r\n          datos.append('negocio', $('#negociogestioncaja').val()as string);\r\n          try {\r\n              const url = \"/admin/api/\"+urlApi;\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                miDialogoFacturador.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                if(!control){ //si es crear registro\r\n                  /// actualizar el arregle del facturador///\r\n                  facturadores = [...facturadores, resultado.facturador];\r\n                  (tablaFacturadores as any).row.add([\r\n                      (tablaFacturadores as any).rows().count() + 1,\r\n                      resultado.facturador.nombre,\r\n                      resultado.facturador.nombreconsecutivo.nombre,\r\n                      resultado.facturador.negocio,\r\n                      `<div class=\"acciones-btns\" id=\"${resultado.facturador.id}\" data-facturador=\"${resultado.facturador.nombre}\">\r\n                          <button class=\"btn-md btn-turquoise editarFacturador\"><i class=\"fa-solid fa-pen-to-square\"></i></button>\r\n                          <button class=\"btn-md btn-red eliminarFacturador\"><i class=\"fa-solid fa-trash-can\"></i></button>\r\n                      </div>`\r\n                  ]).draw(false); // draw(false) evita recargar toda la tabla\r\n                }else{ //si es actualizar\r\n                  /// actualizar el arregle de facturadores ///\r\n                  facturadores.forEach(a=>{if(a.id == unfacturador?.id)a = Object.assign(a, resultado.facturador[0]);});\r\n                  const datosActuales = (tablaFacturadores as any).row(indiceFila+=info.start).data();\r\n                  /*xx*/      datosActuales[1] = resultado.facturador[0].nombre;\r\n                  /*x*/ datosActuales[2] = $('#idtipoconsecutivo option:selected').text();\r\n                  /*x*/   datosActuales[3] = $('#negociogestioncaja option:selected').text();\r\n                  (tablaFacturadores as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaFacturadores as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar facturador  //////////////////////\r\n    function eliminarFacturador(e:Event){\r\n      let idfacturador = (e.target as HTMLElement).parentElement!.id, info = (tablaFacturadores as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idfacturador = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaFacturadores as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar el facturador?',\r\n          text: \"El facturador sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idfacturador);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarFacturador\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaFacturadores as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaFacturadores as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoFacturador || (event.target as HTMLInputElement).value === 'Salir') {\r\n          miDialogoFacturador.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateFacturador') as HTMLFormElement)?.reset();\r\n    }\r\n  }\r\n  \r\n})();","(()=>{\r\n    if(document.querySelector('.inventarioxproducto')){\r\n        let  tablaStockRapido:HTMLElement;\r\n        tablaStockRapido = ($('#tablaStockRapido') as any).DataTable(configdatatablesstockrapido);\r\n    }\r\n\r\n})();","(function(){\r\n  if(document.querySelector('.reportes')){\r\n    const graficaventa = document.querySelectorAll<HTMLButtonElement>('.graficaventa');\r\n    const chartventas = (document.getElementById('chartventas') as HTMLCanvasElement)?.getContext('2d');\r\n    const chartutilidad = (document.getElementById('chartutilidad') as HTMLCanvasElement)?.getContext('2d');\r\n\r\n    let chartVentasInstance: any | null = null;\r\n\r\n    /*new Chart(ctx, {\r\n      type: 'line',\r\n      data: {\r\n          labels: [1,2,3,4,5,6,7,8,9],//resultado.map(programa=>programa.nombre),\r\n          datasets: [{\r\n          label: '# of Votes',\r\n          data: [1,2,3,4,10,3,11,4,17],//resultado.map(programa=>programa.total),\r\n          borderColor: '#00c8c2',\r\n          //backgroundColor: ['#ea580c', '#84cc16', '#22d3ee', '#a855f7'],\r\n          backgroundColor: '#ea580c',\r\n          //tension: 0.3,\r\n          //stepped: 'middle',\r\n          }]\r\n      },\r\n      options: {\r\n          scales: {\r\n              y: {\r\n                  beginAtZero: true\r\n              }\r\n          },\r\n          plugins: {legend: {display: false } } //elimina el label del dataset\r\n      }\r\n    });*/\r\n\r\n\r\n    //graficaVentaMensual.addEventListener('click', ()=>{\r\n      //console.log(777);\r\n      /*(async ()=>{\r\n        try {\r\n          const url = \"https://apidianj2.com/api/getconfigcompanies\"; //llamado a la API REST Dianlaravel\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json();\r\n          console.log(resultado);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();*/\r\n      /*const idcli = 1;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/ventasGraficaMensual?id=\"+idcli; //llamado a la API REST en reportescontrolador.php\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json(); \r\n          console.log(resultado);\r\n          graficaVentas(resultado);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();*/\r\n    //});\r\n\r\n    callapiventasgrafica(\"/admin/api/ventasGraficaMensual\");\r\n\r\n    graficaventa.forEach((btngrafica, index) =>{\r\n      btngrafica.addEventListener('click', (e:Event)=>{\r\n        let url:string = \"/admin/api/ventasGraficaMensual\"; //llamado a la API REST en reportescontrolador.php\r\n        if(index == 1){  //grafico diario\r\n          url = \"/admin/api/ventasGraficaDiario\"; //llamado a la API REST en reportescontrolador.php\r\n        }\r\n        callapiventasgrafica(url);\r\n      })\r\n    });\r\n\r\n    async function callapiventasgrafica(url:string){\r\n      try {\r\n        const respuesta = await fetch(url); \r\n        const resultado = await respuesta.json(); \r\n        graficaVentas(resultado);\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n    }\r\n\r\n    function graficaVentas(resultado:{label:String[], datos:string[]}){\r\n      if (chartVentasInstance)chartVentasInstance.destroy();\r\n      chartVentasInstance = new Chart(chartventas, {\r\n        type: 'bar',\r\n        data: {\r\n          labels: resultado.label,\r\n          datasets: [{\r\n            label: 'Total Ventas',\r\n            data: resultado.datos,\r\n            borderWidth: 1\r\n          }]\r\n        },\r\n        options: {\r\n          scales: {\r\n            y: {\r\n              beginAtZero: true,\r\n              grid: {display: false} //ocultar regilla horizontal\r\n            },\r\n            x: {\r\n                grid: {display: false}, ////ocultar regilla vertical\r\n            }\r\n          },\r\n          responsive: true,\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n\r\n    ////////////////////////////  chartutilidad - grafica costo/utlidad //////////////////////////////////\r\n    (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/graficaValorInventario\"; //llamado a la API REST en reportescontrolador.php\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json();\r\n          new Chart(chartutilidad, {\r\n            type: 'doughnut',\r\n            data: {\r\n              labels: ['Ventas total:', 'Costo:', 'Utilidad:'],\r\n              datasets: [{\r\n                label: 'Total Ventas',\r\n                data: [Number(resultado.valorventa), Number(resultado.costoinv), (Number(resultado.valorventa) - Number(resultado.costoinv))],\r\n                backgroundColor: ['rgb(54, 162, 235)','rgb(255, 99, 132)', 'rgb(255, 205, 86)'],\r\n                //borderWidth: 1\r\n                hoverOffset: 4\r\n              }]\r\n            },\r\n            options: {\r\n              responsive: true,\r\n              plugins: {\r\n                legend: {\r\n                    labels: {\r\n                        generateLabels: (chart:any) => {\r\n                            const data = chart.data.datasets[0].data;\r\n                            const labels = chart.data.labels;\r\n                            return labels.map((label:any, i:any) => ({\r\n                                text: `${label}: ${data[i]}`,\r\n                                fillStyle: chart.data.datasets[0].backgroundColor[i],\r\n                                index: i\r\n                            }));\r\n                        }\r\n                    }\r\n                }\r\n              }\r\n            }\r\n          });\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    })();\r\n\r\n\r\n\r\n\r\n    ////////////////////////////////////////////////////////////////////    \r\n    \r\n\r\n    /* cerrarDialogoExterno(event:Event) {\r\n      if (event.target === modalFecha || (event.target as HTMLInputElement).value === 'cancelar' || (event.target as HTMLElement).closest('.finCerrarcaja')) {\r\n          modalFecha.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          if((event.target as HTMLElement).closest('.finCerrarcaja'))console.log(45);//eliminarCita(event.target.closest('.terminarcita').id);\r\n      }\r\n    }*/\r\n\r\n  }\r\n})();","(()=>{\r\n  if(document.querySelector('.ventasxtransaccion')){\r\n\r\n    const btnmensual = document.querySelector('#btnmensual') as HTMLButtonElement;\r\n    const btndiario = document.querySelector('#btndiario') as HTMLButtonElement;\r\n    const miDialogoMes = document.querySelector('#miDialogoMes') as any;\r\n    const miDialogoDiario = document.querySelector('#miDialogoDiario') as any;\r\n    let tablaTransaccioneXVenta:HTMLTableElement;\r\n\r\n    interface transacciones {\r\n      fecha:string,\r\n      total_venta:string,\r\n      num_transacciones:string,\r\n      promedio_transaccion:string,\r\n      transaccion_mas_alta:string,\r\n      transaccion_mas_baja:string\r\n    }\r\n    let datatransacciones:transacciones[] = [];\r\n\r\n    btnmensual?.addEventListener('click', ()=>{\r\n        miDialogoMes.showModal(); //seleccionar año\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    btndiario?.addEventListener('click', ()=>{\r\n        miDialogoDiario.showModal();  //seleccionar mes\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    //seleccionar año, transacciones mes acumulado de un año\r\n    document.querySelector('#formMes')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      const inputselectaño = document.querySelector('#inputselectaño') as HTMLInputElement;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/ventasxtransaccionanual?x=\"+inputselectaño.value; //llamado a la API REST en reportescontrolador.php\r\n          const respuesta = await fetch(url);\r\n          const resultado = await respuesta.json();\r\n          datatransacciones = resultado;\r\n          console.log(resultado);\r\n          printTableTranscciones()\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      miDialogoMes.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    //seleccionar mes, transacciones acumuladas por dia durante un mes\r\n    document.querySelector('#formDiario')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      const inputselectmesyaño = document.querySelector('#inputselectmesyaño') as HTMLInputElement;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/ventasxtransaccionmes?x=\"+inputselectmesyaño.value; //llamado a la API REST en reportescontrolador.php\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json();\r\n          datatransacciones = resultado;\r\n          printTableTranscciones()\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      miDialogoDiario.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    printTableTranscciones();\r\n    function printTableTranscciones(){\r\n\r\n        tablaTransaccioneXVenta = ($('#tablaTransaccioneXVenta') as any).DataTable({\r\n            destroy: true, // importante si recargas la tabla\r\n            data: datatransacciones,\r\n            columns: [{title: 'Fecha', data: 'fecha'}, {title: 'Toal venta', data: 'total_venta', render: (data: number) => `$${data.toLocaleString()}`}, {title: 'Numero de transacciones', data: 'num_transacciones'}, {title: 'Promedio por transacción', data: 'promedio_transaccion'}, {title: 'Transacción mas alta', data: 'transaccion_mas_alta'}, {title: 'Transacción mas baja', data: 'transaccion_mas_baja'}],\r\n        });\r\n    }\r\n\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      const f = event.target;\r\n      if (f === miDialogoMes || f === miDialogoDiario || (f as HTMLInputElement).closest('.salir')) {\r\n        miDialogoMes.close();\r\n        miDialogoDiario.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n})();\r\n   ","(():void=>{\r\n\r\n  if(document.querySelector('.ventasxcliente')){\r\n\r\n    const consultarFechaPersonalizada = document.querySelector('#consultarFechaPersonalizada') as HTMLButtonElement;\r\n    const btnmesactual = document.querySelector('#btnmesactual') as HTMLButtonElement;\r\n    const btnmesanterior = document.querySelector('#btnmesanterior') as HTMLButtonElement;\r\n    const btnhoy = document.querySelector('#btnhoy') as HTMLButtonElement;\r\n    const btnayer = document.querySelector('#btnayer') as HTMLButtonElement;\r\n    let fechainicio:string = \"\", fechafin:string = \"\", tablaVentasXCliente:HTMLElement;\r\n\r\n    interface ventaxcliente {\r\n        id:string,\r\n        nombre:string,\r\n        cantidad_facturas:string,\r\n        total_ventas:string\r\n    } \r\n\r\n    let datosVentaXCliente:ventaxcliente[] = [];\r\n\r\n    //////////////////  TABLA //////////////////////\r\n    tablaVentasXCliente = ($('#tablaVentasXCliente') as any).DataTable(configdatatables);\r\n\r\n    // SELECTOR DE FECHAS DEL CALENDARIO\r\n    ($('input[name=\"datetimes\"]')as any).daterangepicker({\r\n      timePicker: true,\r\n      //startDate: moment().startOf('hour'),\r\n      //endDate: moment().startOf('hour').add(32, 'hour'),\r\n      startDate: moment().set({ hour: 0, minute: 0, second: 1 }),\r\n      endDate: moment().set({ hour: 23, minute: 59, second: 59 }),\r\n      locale: {\r\n        format: 'M/DD hh:mm A'\r\n      }\r\n    });\r\n\r\n    $('input[name=\"datetimes\"]').on('apply.daterangepicker', function(ev, picker) {\r\n        var startDate = picker.startDate.format('YYYY-MM-DD HH:mm:ss');\r\n        var endDate = picker.endDate.format('YYYY-MM-DD HH:mm:ss');\r\n        fechainicio = startDate;\r\n        fechafin = endDate;\r\n        //(document.querySelector('#fechainicio') as HTMLParagraphElement).textContent = fechainicio;\r\n        //(document.querySelector('#fechafin') as HTMLParagraphElement).textContent = fechafin;\r\n    });\r\n\r\n    btnmesactual.addEventListener('click', (e:Event)=>{\r\n        const hoy = new Date();\r\n        // Primer día del mes actual\r\n        const primerDia = new Date(hoy.getFullYear(), hoy.getMonth(), 1);\r\n        // Último día del mes actual\r\n        const ultimoDia = new Date(hoy.getFullYear(), hoy.getMonth() + 1, 0);\r\n        const fechainiciobtn:string = primerDia.toISOString().split('T')[0];\r\n        const fechafinbtn:string = ultimoDia.toISOString().split('T')[0];\r\n        callApiVentasXCliente(fechainiciobtn, fechafinbtn);\r\n    });\r\n\r\n\r\n    btnmesanterior.addEventListener('click', (e:Event)=>{\r\n        // Fecha actual\r\n        const hoy = new Date();\r\n        // Primer día del mes anterior\r\n        const primerDiaMesAnterior = new Date(hoy.getFullYear(), hoy.getMonth() - 1, 1);\r\n        // Último día del mes anterior\r\n        const ultimoDiaMesAnterior = new Date(hoy.getFullYear(), hoy.getMonth(), 0);\r\n        const fechainiciobtn:string = primerDiaMesAnterior.toISOString().split('T')[0];\r\n        const fechafinbtn:string = ultimoDiaMesAnterior.toISOString().split('T')[0];\r\n        callApiVentasXCliente(fechainiciobtn, fechafinbtn);\r\n    });\r\n\r\n    btnhoy.addEventListener('click', (e:Event)=>{\r\n        const hoy = new Date();\r\n        const inicioDia = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate(), 0, 0, 0);\r\n        const finDia = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate(), 23, 59, 59);\r\n        const fechainiciobtn:string = formatoFecha(inicioDia);\r\n        const fechafinbtn:string = formatoFecha(finDia);\r\n        callApiVentasXCliente(fechainiciobtn, fechafinbtn);\r\n    });\r\n\r\n    btnayer.addEventListener('click', (e:Event)=>{\r\n        // Fecha actual\r\n        const hoy = new Date();\r\n        // Día anterior\r\n        const ayer = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate() - 1);\r\n        // Inicio y fin del día anterior\r\n        const inicioAyer = new Date(ayer.getFullYear(), ayer.getMonth(), ayer.getDate(), 0, 0, 0);\r\n        const finAyer = new Date(ayer.getFullYear(), ayer.getMonth(), ayer.getDate(), 23, 59, 59);\r\n        const fechainiciobtn:string = formatoFecha(inicioAyer);\r\n        const fechafinbtn:string = formatoFecha(finAyer);\r\n        callApiVentasXCliente(fechainiciobtn, fechafinbtn);\r\n    });\r\n\r\n    function formatoFecha(fecha: Date): string {\r\n        const año = fecha.getFullYear();\r\n        const mes = String(fecha.getMonth() + 1).padStart(2, \"0\");\r\n        const dia = String(fecha.getDate()).padStart(2, \"0\");\r\n        const hora = String(fecha.getHours()).padStart(2, \"0\");\r\n        const minuto = String(fecha.getMinutes()).padStart(2, \"0\");\r\n        const segundo = String(fecha.getSeconds()).padStart(2, \"0\");\r\n        return `${año}-${mes}-${dia} ${hora}:${minuto}:${segundo}`;\r\n    }\r\n\r\n\r\n    ////// consulta por fecha personalizada\r\n    consultarFechaPersonalizada.addEventListener('click', ()=>{\r\n      if(fechainicio == '' || fechafin == ''){\r\n         msjalertToast('error', '¡Error!', \"Elegir fechas a consultar\");\r\n         return;\r\n      }\r\n      callApiVentasXCliente(fechainicio, fechafin);\r\n    });\r\n\r\n    async function callApiVentasXCliente(dateinicio:string, datefin:string){\r\n        console.log(dateinicio, datefin);\r\n        (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"grid\";\r\n        const datos = new FormData();\r\n        datos.append('fechainicio', dateinicio);\r\n        datos.append('fechafin', datefin);\r\n        try {\r\n            const url = \"/admin/api/ventasxcliente\"; //llama a la api que esta en reportescontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            datosVentaXCliente = resultado;\r\n            printTableVentasXCliente();\r\n           (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n\r\n    printTableVentasXCliente();\r\n    function printTableVentasXCliente(){\r\n        tablaVentasXCliente = ($('#tablaVentasXCliente') as any).DataTable({\r\n            destroy: true, // importante si recargas la tabla\r\n            data: datosVentaXCliente,\r\n            columns: [{title: 'Nombre', data: 'nombre'}, {title: 'Cantidad_facturas', data: 'cantidad_facturas'}, {title: 'Total ventas', data: 'total_ventas'}],\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n})();","(function(){\r\n  if(document.querySelector('.contenedorsetup')){\r\n\r\n    const radios = document.querySelectorAll<HTMLInputElement>('.contenedorsetup input[type=\"radio\"]');\r\n    const claves = document.querySelectorAll<HTMLInputElement>('.keyinput');\r\n    const porcentaje_de_impuesto = document.querySelector('#porcentaje_de_impuesto') as HTMLSelectElement;\r\n\r\n    radios.forEach(radio => {\r\n      radio.addEventListener('change', () => {\r\n        // Obtenemos el grupo (name) del radio\r\n        const grupo:string = radio.name;\r\n        // Obtenemos la opción seleccionada de ese grupo\r\n        const seleccionado = document.querySelector(`input[name=\"${grupo}\"]:checked`) as HTMLInputElement;\r\n\r\n        console.log(`${grupo}, Opción seleccionada: ${seleccionado.value}`);\r\n        cambiarparametro(grupo, seleccionado.value);\r\n      });\r\n    });\r\n\r\n    ////////////// inputs tipo radio  ////////////////\r\n    function cambiarparametro(clave:string, valor:string){\r\n      const datos = new FormData();\r\n      datos.append(clave, valor);\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/parametrosSistema\";  //api llamada en parametroscontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    }\r\n\r\n    //////////  CLAVES  ////////////\r\n    ///////////  eventos a los inputs de las claves, limite de descuento, cantidad de zeta diarios etc 'Campos de entrada' /////////////\r\n    claves.forEach(c=>{\r\n      c.addEventListener('input', (e)=>{  \r\n        const inputClave = (e.target as HTMLInputElement);\r\n        const valorClave = (e.target as HTMLInputElement).value;\r\n        \r\n        (async ()=>{\r\n          const datos = new FormData();\r\n          datos.append(inputClave.name, valorClave);\r\n          try {\r\n              const url = \"/admin/api/parametrosSistemaClaves\";  //api llamada en parametroscontrolador.php\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();\r\n              if(resultado.exito !== undefined){\r\n                inputClave.style.color = \"#02db02\";\r\n                inputClave.style.fontWeight = \"500\";\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();\r\n      });\r\n    });\r\n\r\n\r\n\r\n    //////////////////   campo tipo de descuento   /////////////////////\r\n    porcentaje_de_impuesto?.addEventListener('input', (e)=>{\r\n      console.log((e.target as HTMLSelectElement).value);\r\n      (async ()=>{\r\n          const datos = new FormData();\r\n          datos.append('porcentaje_de_impuesto', (e.target as HTMLSelectElement).value);\r\n          try {\r\n              const url = \"/admin/api/parametrosSistemaPorcentajeImpuesto\";  //api llamada en parametroscontrolador.php\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();\r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n      })();\r\n\r\n    });\r\n\r\n    \r\n  }\r\n\r\n})();"]}
=======
{"version":3,"sources":["bundle.ts.js","app.ts","clientes.ts","dashboard.ts","menumovil.ts","perfil.ts","almacen/ajustarcostos.ts","almacen/almacen.ts","almacen/categoria.ts","almacen/compras.ts","almacen/ensamblaje.ts","almacen/gestionproveedores.ts","almacen/productos.ts","almacen/subproductos.ts","almacen/unidadesmedida.ts","caja/caja.ts","caja/cerrarcaja.ts","caja/detallecierrecaja.ts","caja/fechazetadiario.ts","caja/ordenresumen.ts","caja/pedidosguardados.ts","configuracion/empleados.ts","configuracion/gestionbancos.ts","configuracion/gestioncajas.ts","configuracion/gestiondian.ts","configuracion/gestionfacturadores.ts","reportes/inventarioxproducto.ts","reportes/reportes.ts","reportes/ventastransaccion.ts","reportes/ventasxcliente.ts","ventas/paginadorventas.ts","ventas/ventas.ts","configuracion/ajustesdelsistema/configparametros.ts"],"names":["mobilemenu","document","querySelector","sidebar","btnmenux","barra","nametop","window","POS","addEventListener","classList","toggle","e","$","toggleClass","configdatatables","paging","lengthChange","searching","ordering","info","autoWidth","responsive","deferRender","retrieve","processing","language","search","emptyTable","zeroRecords","lengthMenu","infoEmpty","infoFiltered","paginate","first","last","next","previous","configdatatablesstockrapido","layout","topStart","buttons","extend","text","exportOptions","columns","title","pageLength","configdatatablesajustarcostos","configdatatablescaja","order","msjAlert","tipo","msj","divmsjalerta","insertAdjacentHTML","borrarMsjAlert","divmsj","setTimeout","firstChild","removeChild","msjalertToast","icono","Swal","fire","icon","toast","position","showConfirmButton","timer","querySelectorAll","forEach","element","_a","textContent","parseInt","dataset","num","previousElementSibling","value","length","toString","target","cadena","slice","renderid","nextElementSibling","id","style","display","btns_navtabs","paginas","Element","pagina","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","done","then","apply","_b","_c","btncrearCliente","btncrearDireccion","miDialogoCliente","miDialogoCrearDireccion","miDialogoUpDireccion","selectdirecciones","btnCerrarUpDireccion","tablaClientes","uncliente","indiceFila","control","direcciones","clientes","cerrarDialogoExterno","event","close","removeEventListener","url","respuesta","fetch","json","console","log","error","DataTable","reset","limpiarformdialog","showModal","select2","dropdownParent","placeholder","maximumSelectionLength","_d","contains","parentElement","_e","_f","_g","_h","_j","idcliente","tagName","find","x","nombre","apellido","val","tipodocumento","identificacion","telefono","email","fecha_nacimiento","editarClientes","page","row","closest","index","customClass","confirmButton","cancelButton","showCancelButton","confirmButtonText","cancelButtonText","isConfirmed","datos","FormData","append","method","body","resultado","undefined","exito","start","remove","draw","eliminarClientes","addrs","dir","option","createElement","direccion","idtarifa","appendChild","departamento","ciudad","addDireccionSelect","upRemoveDir","preventDefault","a","Object","assign","cliente","datosActuales","data","select","idDir","options","selectedIndex","objDireccion","chartventas","getElementById","getContext","Chart","type","labels","datasets","label","borderColor","backgroundColor","tension","scales","y","beginAtZero","plugins","legend","mobilemenu1","miDialogomenumovil","setAttribute","removeAttribute","btnCambiarEmail","miDialogoUpEmail","tablaAjustarCostos","allConversionUnidades","subUnd","idsubproducto","children","idproducto","nombreunidaddestino","factor","factorconversion","input","tipoelemento","idelemento","tr","selectUnidad","Number","trx","previousSibling","costo","color","fontWeight","actualizarcostos","btntrasladoinvnetario","btnXCerrarTrasladoInvnetario","miDialogoTrasladoInvnetario","reinciarinv","miDialogoStock","modalStock","selectStockRapidoUndmedida","amount","miDialogoIngresarProduccion","selectitemAproducir","btnsproduccion","selectIngresarProduccionUnidadmedida","amountProduccion","tablaStockRapido","tablaInventarioSedes","cantidadactual","endponit","factorC","sedes","allproductsXsucursal","mostrarInfoItem","producto","stock","toLocaleString","precio_compra","precio_venta","actualizarStockRapido","insumosProductos","tipoItem","rows","every","rowNode","node","id_element","subproductoid","idAttr","getAttribute","productoid","cell","td","stockminimo","firstElementChild","add","location","reload","checked","sucursales","Set","map","d","sucursal","productos","nombreproducto","stocks","columnas","s","push","values","prod","fila","destroy","printstockXsucursal","filter","u","descontarStock","aumentarStock","ajustarStock","AmountItem","item","on","selectedOption","prodund","und","mostrarSelectUnidades","btnproduccion","AmountItemProduccion","insumos","crearCategoria","miDialogoCategoria","tablaCategorias","action","idcategoria","categoria","editarCategoria","eliminarCategoria","proveedor","impuesto","nfactura","fecha","origenPago","origenCaja","origenBanco","formapago","observacion","btnvaciar","miDialogoVaciar","miDialogoRegistrarcompra","tablaCompras","filteredData","carrito","resumen","reduce","total","valorcompra","vaciarcompra","f","some","isNaN","estado","cantidad","JSON","stringify","idsx","procesarpedido","tipoproducto","sku","unidadmedida","activarselect2","findIndex","iditem","itemselected","idpx","nombreitem","unidad","cantidadcomprado","valorunidad","subtotal","unItem","printItemTable","elementItem","tipoitem","itemCarrito","unit","listaSubproductos","selectUnidadMedida","calcularFactor","idConversionUnidad","reg","idsub","subund","inputRendimiendoEstandar","subproducto","AmountSubpx","sub","validarSubproducto","trigger","btn","desasociarSubproducto","crearProveedor","miDialogoProveedor","tablaProveedores","unproveedor","proveedores","idproveedor","nit","editarProveedor","eliminarProveedor","urlApi","count","created_at","crearProducto","miDialogoProducto","inputupImage","btncustomUpImage","imginputfile","tablaProductos","unproducto","products","divAlert","targetDom","preciocompra","habtipoproduccion","src","_k","_l","_m","_o","idunidadmedida","tipoproduccion","foto","editarProductos","s1","bloquearProductos","eliminarProductos","imgFile","includes","elements","namedItem","files","size","click","file","reader","FileReader","onload","resrult","readAsDataURL","crearSubProducto","miDialogoSubProducto","tablaSubProductos","unsubproducto","subproducts","id_unidadmedida","editarSubProductos","eliminarSubProductos","btnCrearUnidadMedida","miDialogoUnidadMedida","tablaUnidadesMedida","editarUnidadMedida","form","submit","eliminarUnidadMedida","modalGastosIngresos","modalcambioMedioPago","btnGastosingresos","operacion","origengasto","mediosPago","totalPagado","numfactura","tablaListaPedidos","estadofactura","contentMP","mediospagoDB","idfactura","nuevosMediosPago","setMediosPagoDB","mapMediospago","Map","showCajasBancos","selectorigen","tipodegasto","totalpagado","idmediopago","mediopago","i","valor","set","facturamediospago","cambiomediopago","open","printPOS","cotizacion","urlprintPDF","ventana","focus","print","printPDF","mp","totalmediospago","replace","has","get","totalotrosmedios","setNuevosMediosPago","mediospagocompartidos","nuevosMediosPagoNoEnDB","mediosPagoDBNoEnNuevos","mediosPagoUpdate","btnMP","button","updateMP","actualizarMediosPago","modalArqueocaja","Modalcerrarcaja","modalCambiarCaja","btnArqueocaja","btnCerrarcaja","btnImprimirDetalleCaja","btnCambiarCaja","inputsmediospago","formArqueocaja","formCambiarCaja","href","ultimocierre","confirmarcierre","ef","sum","Array","from","denominaicon","moneda","eventInput","Event","dispatchEvent","sumatoriaDenominaciones","m","inputmediopago","valormediopagodeclarado","name","valordeclarado","coldeclarado","coldif","useGrouping","colsistem","cuerpoanalisis","actualizarAnalisis","array","tbodyMediosPago","innerHTML","printdiscriminarmediospago","discriminarmediospagos","obj","basecaja","ventasenefectivo","gastoscaja","domicilios","ingresoventas","totaldescuentos","totalfacturas","totalcotizaciones","basegravable","valorimpuestototal","gastosbanco","facturaselectronicas","facturaspos","printindicadores","sobranteFaltante","nombremediopago","valorsistema","id_mediopago","printsobrantesfaltantes","sobrantefaltante","ventasxusuarios","Nombre","N_ventas","ventas","printventasxusuarios","tablaVentas","fechapago","mediosdepago","join","printventas","facturas","btnsmultiselect","selectedcajas","consultarZDiario","base","valorImpuestoTotal","ingresoVentas","totalDescuentos","realVentas","cantidadElectronicas","cantidadPOS","valorElectronicas","valorPOS","fechainicio","fechafin","cajas_seleccionadas","inputscaja","cajastext","inputcaja","btnmultiselect","cerrarlosmultiselect","c","daterangepicker","timePicker","startDate","moment","hour","minute","second","endDate","locale","format","ev","picker","cajas","facturadores","valuecajas","valuefacturadores","reiniciarTablas","datosmediospago","datosventa","subtotalventa","totalventa","ELECTRONICAS","total_ELECTRONICAS","total_POS","miDialogoFacturar","miDialogoEliminarOrden","btnfacturar","btneliminarorden","btnCaja","btnTipoFacturador","mediospago","btnsdevolverinv","inputsInv","printcarta","printcotizacion","valorTotal","dctox100","descuento","valortarifa","selectFacturadorSegunCaja","z","idfacturador","calcularCambio","recibido","inputinv","v","rendimientoestandar","idorden","eliminarorden","URLSearchParams","clear","delete","subirModalPagar","inv","qty","calcularmediospago","imprimir","id_factura","ordenpagada","tablaPedidosGuardados","idpedidoguardado","eliminarPedidoGuardado","crearempleado","dialogoEmpleado","dialogoContraseña","btnupImage","inputNombre","inputApellido","inputnickname","inputcedula","inputpassword","inputpassword2","inputMovil","inputEmail","inputDepartamento","inputCiudad","inputDireccion","inputPerfil","tablaempleados","unempleado","empleadosapi","_p","_q","idempleado","img","nickname","cedula","movil","perfil","leave","permisos","checkbox","editarEmpleado","updatePassword","eliminarEmpleado","arraypermisos","rutaimg","crearBanco","miDialogoBanco","tablaBancos","unbanco","bancos","idbanco","numerocuenta","editarBanco","eliminarBanco","banco","crearCaja","miDialogoCaja","tablaCajas","unacaja","idcaja","idtipoconsecutivo","editarCaja","eliminarCaja","caja","nombreconsecutivo","negocio","crearCompañia","obtenerresolucion","setpruebas","miDialogoCompañia","miDialogoGetResolucion","miDialogosetpruebas","crearFacturador","miDialogoFacturador","tablaFacturadores","unfacturador","idtipofacturador","rangoinicial","rangofinal","siguientevalor","resolucion","prefijo","editarFacturador","eliminarFacturador","facturador","graficaventa","chartutilidad","chartVentasInstance","callapiventasgrafica","borderWidth","grid","graficaVentas","btngrafica","valorventa","costoinv","hoverOffset","generateLabels","chart","fillStyle","btnmensual","btndiario","miDialogoMes","miDialogoDiario","tablaTransaccioneXVenta","datatransacciones","printTableTranscciones","render","inputselectaño","inputselectmesyaño","consultarFechaPersonalizada","btnmesactual","btnmesanterior","btnhoy","btnayer","tablaVentasXCliente","datosVentaXCliente","formatoFecha","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","callApiVentasXCliente","dateinicio","datefin","printTableVentasXCliente","hoy","Date","primerDia","ultimoDia","toISOString","split","primerDiaMesAnterior","ultimoDiaMesAnterior","inicioDia","finDia","ayer","inicioAyer","finAyer","filtrocategorias","hackerList","List","valueNames","pagination","btnCarritoMovil","contenidocarrito","contenedorDesktop","miDialogoCarritoMovil","btnCerrarCarritoMovil","innerWidth","btnAddCliente","btnAddDir","selectCliente","dirEntrega","facturarA","contentproducts","btnotros","btndescuento","btnEntrega","modalidadEntrega","totalunidades","tablaventa","btnguardar","miDialogoAddCliente","miDialogoAddDir","miDialogoOtrosProductos","miDialogoFacturarA","miDialogoDescuento","miDialogoGuardar","tipoDescts","inputDescuento","tarifas","nombretarifa","valorMax","constImp","excluido","0","5","8","16","19","factimpuestos","otrosproductos","setTarifas","tarifa","printTarifaEnvio","valorCarritoTotal","selectDir","objtarifa","printProduct","uncarrito","actualizarCarrito","stateinput","valorimp","parseFloat","toFixed","productovalorimp","productototal","idimpuesto","objbase","mapImpuesto","impValor","Obj","id_impuesto","facturaid","valorimpuesto","valorTotalImp","valorImp","minimumFractionDigits","maximumFractionDigits","vaciarventa","datosfactura","history","replaceState","key","ctz","idvendedor","clienteID","identidad","addClienteSelect","nextID","idcli","formelements","cantidadotros","preciootros","marca","codigo","descripcion","peso","medidas","funcion","uso","fabricante","garantia","fecha_ingreso","visible","elementProduct","popup","className","requestAnimationFrame","popupx","t","idProduct","productoCarrito","partes","startsWith","desc","valorInput","Math","round","factura","num_orden","radios","claves","porcentaje_de_impuesto","radio","grupo","seleccionado","clave","cambiarparametro","inputClave","valorClave"],"mappings":"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","file":"bundle.ts.js","sourcesContent":[null,"const mobilemenu = document.querySelector('#mobile-menu');  //seleccion por id\r\nconst sidebar = document.querySelector('.sidebar') as HTMLElement|null;  //seleccion por calses\r\nconst btnmenux = document.querySelector('#mobile-menux');\r\nconst barra = document.querySelector('.barra-mobile') as HTMLElement|null;\r\nconst nametop:HTMLElement|null = document.querySelector('.nametop');\r\ndeclare let Chart:any; //declare le indica a typescript que la variable chart viene de manera externa\r\ndeclare const Swal: any;\r\ndeclare var moment: any;\r\ndeclare let List: any; \r\n\r\n(window as any).POS = (window as any).POS || {};\r\n\r\nif(mobilemenu){\r\n    mobilemenu.addEventListener('click', function(){\r\n      if (sidebar && barra) {\r\n        sidebar.classList.toggle('mostrar');\r\n        barra.classList.toggle('ocultarmenu');\r\n      }\r\n    });\r\n}\r\nif(btnmenux){\r\n    btnmenux.addEventListener('click', function(){\r\n      if (sidebar && barra) {\r\n        sidebar.classList.toggle('mostrar');\r\n        barra.classList.toggle('ocultarmenu');\r\n      }\r\n    });\r\n}\r\n/////////////////////// animacion del sidebar toggle ///////////////////////////\r\ndocument.querySelector('.sidebartoggle')!.addEventListener('click', (e)=>{\r\n  if(sidebar)sidebar?.classList.toggle('minsidebar');\r\n  if(nametop)nametop.classList.toggle('noneElement');\r\n  $('.btnav').toggleClass('noneElement');\r\n});\r\n\r\n//------------------------------------------------------------------------------------------------------------------//\r\n///////////////////// OBJETO DE CONFIGURACION DEL PLUGIN DATATABLES /////////////////////\r\nconst configdatatables = {\r\n  \"paging\": true,\r\n  \"lengthChange\": true,\r\n  \"searching\": true,\r\n  \"ordering\": true,\r\n  \"info\": true,\r\n  \"autoWidth\": true,\r\n  \"responsive\": true,\r\n  \"deferRender\": true,\r\n  \"retrieve\": true,\r\n  \"processing\": true,\r\n  language: {\r\n      search: 'Busqueda',\r\n      emptyTable: 'No Hay datos disponibles',\r\n      zeroRecords:    \"No se encontraron registros coincidentes\",\r\n      lengthMenu: '_MENU_ Entradas por pagina',\r\n      info: 'Mostrando pagina _PAGE_ de _PAGES_',\r\n      infoEmpty: 'No hay entradas a mostrar',\r\n      infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n      paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n  }\r\n}\r\n\r\n///////////////////// OBJETO DE CONFIGURACION DEL PLUGIN DATATABLES PARA STOCK RAPIDO /////////////////////\r\nconst configdatatablesstockrapido = {\r\n  layout: {\r\n        topStart: {\r\n            buttons: [\r\n              {extend: 'copyHtml5', text: 'Copia'}, \r\n              {extend: 'excelHtml5', exportOptions: {columns: [1, 2, 3, 4, 5]}, title: 'Stock-inventario'}, \r\n              {extend: 'csvHtml5', exportOptions: {columns: [1, 2, 3, 4, 5]}, title: 'Stock-inventario'}, \r\n              {extend: 'pdfHtml5', exportOptions: {columns: [1, 2, 3, 4, 5]}, title: 'Stock-inventario'}, \r\n              {extend: 'print', exportOptions: {columns: [1, 3, 4]}, title: 'Stock-inventario', text: 'Imprimir'},\r\n              'colvis'\r\n            ],\r\n            pageLength: 'pageLength'\r\n        }\r\n  },\r\n  pageLength: 25,\r\n  \"paging\": true,\r\n  \"lengthChange\": true,\r\n  \"searching\": true,\r\n  \"ordering\": true,\r\n  \"info\": true,\r\n  \"autoWidth\": true,\r\n  \"responsive\": true,\r\n  \"deferRender\": true,\r\n  \"retrieve\": true,\r\n  \"processing\": true,\r\n  language: {\r\n      search: 'Busqueda',\r\n      emptyTable: 'No Hay datos disponibles',\r\n      zeroRecords:    \"No se encontraron registros coincidentes\",\r\n      lengthMenu: '_MENU_ Entradas por pagina',\r\n      info: 'Mostrando pagina _PAGE_ de _PAGES_',\r\n      infoEmpty: 'No hay entradas a mostrar',\r\n      infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n      paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n  }\r\n}\r\n\r\n///////////////////// OBJETO DE CONFIGURACION DEL PLUGIN DATATABLES PARA AJUSTAR COSTOS /////////////////////\r\nconst configdatatablesajustarcostos = {\r\n  layout: {\r\n        topStart: {\r\n            buttons: [\r\n              {extend: 'copyHtml5', text: 'Copia'}, \r\n              {extend: 'excelHtml5', exportOptions: {columns: [1, 3, 4, 5, 6]}, title: 'costo por producto'}, \r\n              {extend: 'csvHtml5', exportOptions: {columns: [1, 3, 4, 5, 6]}, title: 'costo por producto'}, \r\n              {extend: 'pdfHtml5', exportOptions: {columns: [1, 3, 4, 5, 6]}, title: 'costo por producto'}, \r\n              {extend: 'print', exportOptions: {columns: [1, 3, 4, 5, 6]}, title: 'costo por producto', text: 'Imprimir'},\r\n              'colvis'\r\n            ],\r\n            pageLength: 'pageLength'\r\n        }\r\n  },\r\n  pageLength: 25,\r\n  \"paging\": true,\r\n  \"lengthChange\": true,\r\n  \"searching\": true,\r\n  \"ordering\": true,\r\n  \"info\": true,\r\n  \"autoWidth\": true,\r\n  \"responsive\": true,\r\n  \"deferRender\": true,\r\n  \"retrieve\": true,\r\n  \"processing\": true,\r\n  language: {\r\n      search: 'Busqueda',\r\n      emptyTable: 'No Hay datos disponibles',\r\n      zeroRecords:    \"No se encontraron registros coincidentes\",\r\n      lengthMenu: '_MENU_ Entradas por pagina',\r\n      info: 'Mostrando pagina _PAGE_ de _PAGES_',\r\n      infoEmpty: 'No hay entradas a mostrar',\r\n      infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n      paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n  }\r\n}\r\n\r\n///////////////////// CONFIGURACION DEL PLUGIN DATATABLES PARA CAJA/////////////////////\r\nconst configdatatablescaja = {\r\n  \"paging\": false,\r\n  \"order\": [[ 3, 'desc' ]],\r\n  \"searching\": true,\r\n  \"ordering\": true,\r\n  \"info\": true,\r\n  \"autoWidth\": true,\r\n  \"responsive\": true,\r\n  \"deferRender\": true,\r\n  \"retrieve\": true,\r\n  \"processing\": true,\r\n  language: {\r\n      search: 'Busqueda',\r\n      emptyTable: 'No Hay datos disponibles',\r\n      zeroRecords:    \"No se encontraron registros coincidentes\",\r\n      lengthMenu: '_MENU_ Entradas por pagina',\r\n      info: 'Mostrando 1 de _MAX_ registros',\r\n      infoEmpty: 'No hay entradas a mostrar',\r\n      infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n      paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n  }\r\n}\r\n\r\n///////////////////// FUNCION QUE IMPRIME MENSAJE TIPO ALERTA /////////////////////\r\nfunction msjAlert(tipo:string, msj:string, divmsjalerta:HTMLElement):void{\r\n  divmsjalerta.insertAdjacentHTML('beforeend', `<div class=\"alerta alerta__${tipo}\">\r\n      <p><i class=\"fa-solid fa-circle-exclamation\"></i> ${msj}</p></div>`\r\n  );\r\n  borrarMsjAlert(divmsjalerta);\r\n}\r\n//////////////////// BORRAR MENSAJES TIPO ALERTA /////////////////////\r\n/*(borrarMsjAlert =()=>{  //se aplica de manera global\r\n  const msj = document.querySelector('#divmsjalerta');\r\n  if(document.querySelector('.alerta'))setTimeout(()=>{ while(msj.firstChild)msj.removeChild(msj.firstChild);}, 5000);\r\n})();*/\r\nfunction borrarMsjAlert(divmsj:HTMLElement):void{  //se aplica de manera global\r\n  //const msj = document.querySelector('#divmsjalerta')!;\r\n  if(document.querySelector('.alerta'))setTimeout(()=>{ while(divmsj.firstChild)divmsj.removeChild(divmsj.firstChild);}, 5000);\r\n}\r\n//////////////////// FUNCION QUE IMPRIME UN MENSAJE FORMATO TOAST ////////////////////\r\n//msjalertToast('error', '¡Error!', 'debe seleccionar una imagen')\r\nfunction msjalertToast(icono:string, tipo:string, msj:string){\r\n    Swal.fire({\r\n    icon: icono,  // Puedes cambiar el ícono (success, error, warning, info, etc.)\r\n    title: tipo,\r\n    text: msj,\r\n    toast: true,\r\n    position: 'top-end',  \r\n    showConfirmButton: false,  \r\n    timer: 2700  \r\n    });\r\n}\r\n\r\n/////////////////// FUNCION CONTADOR DE CARACTERES ////////////////////\r\n(function countchars():void{\r\n  const numinput = document.querySelectorAll('.count-charts') as NodeListOf<HTMLElement>;  \r\n  numinput.forEach(element =>{ //element es cada label\r\n      element.textContent = (parseInt(element.dataset.num!)-(element.previousElementSibling as HTMLInputElement).value.length).toString();\r\n      element.previousElementSibling?.addEventListener('input', (e)=>{ //seleccionamos el input o el textarea en donde se escribe y se le da el evento de teclas\r\n          element.textContent = parseInt(element.dataset.num!)-(e.target as HTMLInputElement).value.length+\"\";\r\n            \r\n          if(parseInt(element.dataset.num!)-(e.target as HTMLInputElement).value.length <= 0){\r\n              let cadena = (e.target as HTMLInputElement).value.slice(0, parseInt(element.dataset.num!));\r\n              (e.target as HTMLInputElement).value = cadena;\r\n              element.textContent =`${0}`;\r\n          }\r\n      });\r\n  });\r\n})();\r\n\r\n/////////////////// paginacion de negocio empleado, malla, config //////////////////\r\nif(document.querySelector('#tabulacion')){ // view/admin/adminconfig/index.php\r\n  const renderid = document.querySelector('#tabulacion input[type=\"radio\"]:checked')!.nextElementSibling as HTMLElement; //se selecciona el input cheked y luego su span q contiene el id de la pagina a mostrar\r\n  document.querySelector<HTMLElement>(`.${renderid.id}`)!.style.display = \"block\"; //mostramos la primera seccion\r\n  const btns_navtabs = document.querySelectorAll('.tabs span');\r\n  const paginas = document.querySelectorAll<HTMLElement>('.paginas'); //seleccionamos las secciones o paginas a mostrar\r\n  btns_navtabs.forEach(Element => {\r\n      Element.addEventListener('click', (e)=>{ //cada btn o enlace\r\n          const target = e.target as HTMLElement;\r\n          paginas.forEach(pagina =>pagina.style.display = \"none\"); ////quitamos la class mostrarseccion a todas las secciones\r\n          document.querySelector<HTMLElement>(`.${target.id}`)!.style.display = \"block\"; //añadimos la class mostrarseccion a la la seccion o pagina correspondiente\r\n      });\r\n  });\r\n}\r\n\r\n/*\r\n// PROCESO SOLICITUD DE INVENTARIO A OTRAS SEDES\r\nlet currentStep = 1;\r\nconst totalSteps = 3;\r\n\r\nconst btnAnterior = document.getElementById(\"btnAnteriorSolicitudInv\") as HTMLButtonElement;\r\nconst btnSiguiente = document.getElementById(\"btnSiguienteSolicitudInv\") as HTMLButtonElement;\r\nconst steps = document.querySelectorAll<HTMLDivElement>(\".step-circle\");\r\nconst stepSections = document.querySelectorAll<HTMLElement>(\".step-section\");\r\n\r\nfunction actualizarProgreso() {\r\n  // Actualizar barra de progreso\r\n  steps.forEach((step, index) => {\r\n    const stepNumber = index + 1;\r\n    if (stepNumber < currentStep) {\r\n      step.className =\r\n        \"step-circle w-10 h-10 rounded-full bg-green-500 text-white font-semibold flex items-center justify-center\";\r\n    } else if (stepNumber === currentStep) {\r\n      step.className =\r\n        \"step-circle w-10 h-10 rounded-full bg-indigo-600 text-white font-semibold flex items-center justify-center\";\r\n    } else {\r\n      step.className =\r\n        \"step-circle w-10 h-10 rounded-full border-2 border-gray-300 text-gray-400 font-semibold flex items-center justify-center\";\r\n    }\r\n  });\r\n\r\n  // Mostrar solo la sección actual\r\n  stepSections.forEach((section, index) => {\r\n    if (index + 1 === currentStep) {\r\n      section.style.display = \"block\";\r\n    } else {\r\n      section.style.display = \"none\";\r\n    }\r\n  });\r\n\r\n  // Deshabilitar/activar botones si es necesario\r\n  btnAnterior.disabled = currentStep === 1;\r\n  btnSiguiente.disabled = currentStep === totalSteps;\r\n}\r\n\r\n// Inicializar vista\r\nactualizarProgreso();\r\n\r\n// Eventos de navegación\r\nbtnSiguiente.addEventListener(\"click\", () => {\r\n  if (currentStep < totalSteps) {\r\n    currentStep++;\r\n    actualizarProgreso();\r\n  }\r\n});\r\n\r\nbtnAnterior.addEventListener(\"click\", () => {\r\n  if (currentStep > 1) {\r\n    currentStep--;\r\n    actualizarProgreso();\r\n  }\r\n});*/\r\n\r\n","(()=>{\r\n    if(document.querySelector('.clientes')){\r\n      const btncrearCliente = document.querySelector('#crearCliente');\r\n      const btncrearDireccion = document.querySelector('#crearDireccion');\r\n      const miDialogoCliente = document.querySelector('#miDialogoCliente') as any;\r\n      const miDialogoCrearDireccion = document.querySelector('#miDialogoCrearDireccion') as any;\r\n      const miDialogoUpDireccion = document.querySelector('#miDialogoUpDireccion') as any;\r\n      const selectdirecciones = document.querySelector('#selectdirecciones') as HTMLSelectElement;\r\n      const btnCerrarUpDireccion = document.querySelector('#btnCerrarUpDireccion') as HTMLButtonElement;\r\n      let indiceFila=0, control=0, tablaClientes:HTMLElement;\r\n      \r\n      type direccionesapi = {\r\n        id:string,\r\n        idcliente:string,\r\n        idtarifa:string,\r\n        tarifa:{id:string, idcliente:string, nombre:string, valor:string},\r\n        direccion:string,\r\n        ciudad:string,\r\n        departamento:string\r\n      };\r\n      let direcciones:direccionesapi[]=[];\r\n  \r\n      type clientesapi = {\r\n        id:string,\r\n        nombre: string,\r\n        apellido: string,\r\n        tipodocumento: string,\r\n        identificacion: string,\r\n        telefono: string,\r\n        email: string,\r\n        fecha_nacimiento: string,\r\n        total_compras: string,\r\n        ultima_compra: string;\r\n        data1: string,\r\n        //idservicios:{idempleado:string, idservicio:string}[]\r\n      };\r\n  \r\n      let clientes:clientesapi[]=[], uncliente:clientesapi;\r\n  \r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allclientes\"; //llamado a la API REST y se trae todos los productos\r\n            const respuesta = await fetch(url); \r\n            clientes = await respuesta.json(); \r\n            console.log(clientes);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n  \r\n      \r\n  \r\n      //////////////////  TABLA //////////////////////\r\n      tablaClientes = ($('#tablaClientes') as any).DataTable(configdatatables);\r\n  \r\n      btncrearCliente?.addEventListener('click', (e):void=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalCliente')!.textContent = \"Crear cliente\";\r\n        (document.querySelector('#btnEditarCrearCliente') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoCliente.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n\r\n\r\n      btncrearDireccion?.addEventListener('click', (e):void=>{\r\n        control = 0;\r\n        document.querySelector('#modalDireccion')!.textContent = \"Crear direccion\";\r\n        (document.querySelector('#btnEditarCrearDireccion') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoCrearDireccion.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        ($('#selectcliente') as any).select2({\r\n          dropdownParent: $('#miDialogoCrearDireccion'),\r\n          placeholder: \"Seleccionar el cliente\",\r\n          maximumSelectionLength: 1\r\n        });\r\n      });\r\n  \r\n      document.querySelector('#tablaClientes')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n        const target = e.target as HTMLElement;\r\n        if((e.target as HTMLElement)?.classList.contains(\"editarClientes\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarClientes\"))editarClientes(e);\r\n        if(target?.classList.contains(\"eliminarClientes\")||target.parentElement?.classList.contains(\"eliminarClientes\"))eliminarClientes(e);\r\n        if(target?.classList.contains(\"editarEliminarDireccion\")||target.parentElement?.classList.contains(\"editarEliminarDireccion\"))upRemoveDir(e);\r\n      });\r\n  \r\n      function editarClientes(e:Event){\r\n        let idcliente = (e.target as HTMLElement).parentElement?.id!;\r\n        if((e.target as HTMLElement)?.tagName === 'I')idcliente = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n        control = 1;\r\n        document.querySelector('#modalCliente')!.textContent = \"Actualizar cliente\";\r\n        (document.querySelector('#btnEditarCrearCliente') as HTMLInputElement)!.value = \"Actualizar\";\r\n        uncliente = clientes.find(x=>x.id === idcliente)!;\r\n        (document.querySelector('#nombre')as HTMLInputElement).value = uncliente?.nombre!;\r\n        (document.querySelector('#apellido')as HTMLInputElement).value = uncliente?.apellido!;\r\n        $('#tipodocumento').val(uncliente?.tipodocumento??'');\r\n        (document.querySelector('#identificacion')as HTMLInputElement).value = uncliente?.identificacion??'';\r\n        (document.querySelector('#telefono')as HTMLInputElement).value = uncliente?.telefono??'';\r\n        (document.querySelector('#email')as HTMLInputElement).value = uncliente?.email??'';\r\n        (document.querySelector('#fecha_nacimiento')as HTMLInputElement).value = uncliente?.fecha_nacimiento??'';\r\n        \r\n        miDialogoCliente.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n  \r\n      ////////////////////  Actualizar/Editar clientes  //////////////////////\r\n      document.querySelector('#formCrearUpdateCliente')?.addEventListener('submit', e=>{\r\n        if(control){\r\n          e.preventDefault();\r\n          var info = (tablaClientes as any).page.info();\r\n          \r\n          (async ()=>{ \r\n            const datos = new FormData();\r\n            datos.append('id', uncliente!.id);\r\n            datos.append('nombre', $('#nombre').val()as string);\r\n            datos.append('apellido', $('#apellido').val()as string);\r\n            datos.append('tipodocumento', $('#tipodocumento').val()as string);\r\n            datos.append('identificacion', $('#identificacion').val()as string);\r\n            datos.append('telefono', $('#telefono').val()as string);\r\n            datos.append('email', $('#email').val()as string);\r\n            datos.append('fecha_nacimiento', $('#fecha_nacimiento').val()as string);\r\n            try {\r\n                const url = \"/admin/api/actualizarCliente\";\r\n                const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                const resultado = await respuesta.json(); \r\n                console.log(resultado); \r\n                if(resultado.exito !== undefined){\r\n                  msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                  /// actualizar el arregle de clientes ///\r\n                  clientes.forEach(a=>{if(a.id == uncliente.id)a = Object.assign(a, resultado.cliente[0]);});\r\n                  ///////// cambiar la fila completa, su contenido //////////\r\n                  const datosActuales = (tablaClientes as any).row(indiceFila).data();\r\n                  /*NOMBRE*/datosActuales[1] = $('#nombre').val();\r\n                  /*APELLIDO*/datosActuales[2] = $('#apellido').val();\r\n                  /*TELEFONO*/datosActuales[3] = $('#telefono').val();\r\n                  /*EMAIL*/datosActuales[4] = $('#email').val();\r\n                  \r\n                  (tablaClientes as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaClientes as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }else{\r\n                  msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                }\r\n                miDialogoCliente.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n          })();//cierre de async()\r\n        } //fin if(control)\r\n      });\r\n  \r\n\r\n      function upRemoveDir(e:Event){ //actualizar o eliminar direccion\r\n        let idcliente = (e.target as HTMLElement).parentElement!.id, info = (tablaClientes as any).page.info();\r\n        if((e.target as HTMLElement).tagName === 'I')idcliente = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n        (async ()=>{\r\n          try {\r\n            const url = \"/admin/api/direccionesXcliente?id=\"+idcliente; //llamado a la API REST y se trae las direcciones segun cliente elegido\r\n            const respuesta = await fetch(url); \r\n            const resultado = await respuesta.json(); \r\n            direcciones = resultado;\r\n            addDireccionSelect(resultado);\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();\r\n        miDialogoUpDireccion.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n\r\n\r\n       ////// añade direccion al select de direcciones al miDialogoUpDireccion, cuando se desea actualizar o eliminar la direccion de un cliente\r\n      function addDireccionSelect<T extends {id:string, idcliente:string, idtarifa:string, tarifa:{id:string, idcliente:string, nombre:string, valor:string}, direccion:string, ciudad:string, departamento:string}>(addrs: T[]):void{\r\n        while(selectdirecciones?.firstChild)selectdirecciones.removeChild(selectdirecciones?.firstChild);\r\n        addrs.forEach(dir =>{\r\n          const option = document.createElement('option');\r\n          option.textContent = dir.direccion;\r\n          option.value = dir.id;\r\n          option.dataset.idcliente = dir.idcliente;\r\n          option.dataset.idtarifa = dir.idtarifa;\r\n          selectdirecciones.appendChild(option);\r\n        });\r\n        $('#uptarifa').val(addrs[0].idtarifa);\r\n        (document.querySelector('#updepartamento') as HTMLInputElement).value = addrs[0].departamento;\r\n        (document.querySelector('#upciudad') as HTMLInputElement).value = addrs[0].ciudad;\r\n        (document.querySelector('#updireccion') as HTMLInputElement).value = addrs[0].direccion;\r\n      }\r\n\r\n\r\n      ///////// Evento al select de direcciones en el modal actualizar direciones de cada cliente ////////////\r\n      selectdirecciones?.addEventListener('change', (e)=>{\r\n        const select = (e.target as HTMLSelectElement);\r\n        const idDir:string = select.options[select.selectedIndex].value;\r\n        const objDireccion = direcciones.find(x=>x.id == idDir)!;\r\n        $('#uptarifa').val(objDireccion?.idtarifa??1);\r\n        (document.querySelector('#updepartamento') as HTMLInputElement).value = objDireccion.departamento;\r\n        (document.querySelector('#upciudad') as HTMLInputElement).value = objDireccion.ciudad;\r\n        (document.querySelector('#updireccion') as HTMLInputElement).value = objDireccion.direccion;\r\n      });\r\n\r\n\r\n      document.querySelector('#formUpDireccion')?.addEventListener('submit', e=>{\r\n          e.preventDefault();\r\n          // verificar si se oprimio el btn eliminar o actualizar del modal actualizar direccion\r\n        });\r\n        \r\n\r\n      function eliminarClientes(e:Event){\r\n        let idcliente = (e.target as HTMLElement).parentElement!.id, info = (tablaClientes as any).page.info();\r\n        if((e.target as HTMLElement).tagName === 'I')idcliente = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n        indiceFila = (tablaClientes as any).row((e.target as HTMLElement).closest('tr')).index();\r\n        Swal.fire({\r\n            customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n            icon: 'question',\r\n            title: 'Desea eliminar el cliente?',\r\n            text: \"El cliente sera eliminado por completo.\",\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Si',\r\n            cancelButtonText: 'No',\r\n        }).then((result:any) => {\r\n            if (result.isConfirmed) {\r\n                (async ()=>{ \r\n                    const datos = new FormData();\r\n                    datos.append('id', idcliente);\r\n                    try {\r\n                        const url = \"/admin/api/eliminarCliente\";\r\n                        const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                        const resultado = await respuesta.json();  \r\n                        if(resultado.exito !== undefined){\r\n                          (tablaClientes as any).row(indiceFila+info.start).remove().draw(); \r\n                          (tablaClientes as any).page(info.page).draw('page');\r\n                          Swal.fire(resultado.exito[0], '', 'success') \r\n                        }else{\r\n                            Swal.fire(resultado.error[0], '', 'error')\r\n                        }\r\n                    } catch (error) {\r\n                        console.log(error);\r\n                    }\r\n                })();//cierre de async()\r\n            }\r\n        });\r\n      }\r\n\r\n\r\n      btnCerrarUpDireccion.addEventListener('click', ()=>miDialogoUpDireccion.close());\r\n  \r\n  \r\n      function limpiarformdialog(){\r\n        (document.querySelector('#formCrearUpdateCliente') as HTMLFormElement)?.reset();\r\n      }\r\n      function cerrarDialogoExterno(event:Event) {\r\n        if (event.target === miDialogoCliente || event.target === miDialogoCrearDireccion || event.target === miDialogoUpDireccion || (event.target as HTMLInputElement).value === 'salir') {\r\n          miDialogoCliente.close();\r\n          miDialogoCrearDireccion.close();\r\n          miDialogoUpDireccion.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n    }\r\n  \r\n  })();","(function():void{\r\n  if(document.querySelector('.inicio')){\r\n    const chartventas = (document.getElementById('chartventas') as HTMLCanvasElement)?.getContext('2d');\r\n\r\n    new Chart(chartventas, {\r\n      type: 'line',\r\n      data: {\r\n          labels: [\"25-8-2024\", \"26-8-2024\", \"27-8-2024\", \"28-8-2024\", \"29-8-2024\", \"30-8-2024\", \"31-8-2024\", \"01-09-2024\"],//resultado.map(programa=>programa.nombre),\r\n          datasets: [{\r\n          label: '# of Votes',\r\n          data: [8,9,3,5,8,4,2,5],//resultado.map(programa=>programa.total),\r\n          borderColor: '#7C3AED',\r\n          //backgroundColor: ['#ea580c', '#84cc16', '#22d3ee', '#a855f7'],\r\n          backgroundColor: '#00c8c2',\r\n          tension: 0.3,\r\n          //stepped: 'middle',\r\n          }]\r\n      },\r\n      options: {\r\n          scales: {\r\n              y: {\r\n                  beginAtZero: true\r\n              }\r\n          },\r\n          plugins: {legend: {display: false } } //elimina el label del dataset\r\n      }\r\n    });\r\n  }\r\n})();","\r\n\r\n// const mobilemenu1 = document.querySelector('#mobile-menu1')as HTMLButtonElement;\r\n// const miDialogomenumovil = document.querySelector('#miDialogomenumovil') as any;\r\n\r\n// mobilemenu1.addEventListener('click', ()=>{\r\n//     miDialogomenumovil.showModal();\r\n//     document.addEventListener('click', cerrarDialogoExterno);\r\n// });\r\n\r\n\r\n// function cerrarDialogoExterno(event:Event){\r\n//  const f = event.target;\r\n//  if(f === miDialogomenumovil){\r\n//     miDialogomenumovil.close();\r\n//  }\r\n// }\r\nconst mobilemenu1 = document.querySelector('#mobile-menu1') as HTMLButtonElement;\r\nconst miDialogomenumovil = document.querySelector('#miDialogomenumovil') as HTMLDialogElement;\r\n\r\n// aseguramos que al cargar la página el modal esté cerrado y oculto\r\nmiDialogomenumovil.close();\r\nmiDialogomenumovil.setAttribute('hidden', 'true');\r\n\r\nmobilemenu1.addEventListener('click', () => {\r\n  miDialogomenumovil.showModal();\r\n  miDialogomenumovil.removeAttribute('hidden');\r\n  document.addEventListener('click', cerrarDialogoExterno);\r\n});\r\n\r\nfunction cerrarDialogoExterno(event: Event) {\r\n  const f = event.target;\r\n  if (f === miDialogomenumovil) {\r\n    miDialogomenumovil.close();\r\n    miDialogomenumovil.setAttribute('hidden', 'true');\r\n    document.removeEventListener('click', cerrarDialogoExterno);\r\n  }\r\n}\r\n\r\n\r\n","(()=>{\r\n    if(document.querySelector('.perfil')){\r\n      const btnCambiarEmail = document.querySelector('#btnCambiarEmail');\r\n      const miDialogoUpEmail = document.querySelector('#miDialogoUpEmail') as any;\r\n      //const btnCerrarUpDireccion = document.querySelector('#btnCerrarUpDireccion') as HTMLButtonElement;\r\n      \r\n  \r\n      btnCambiarEmail?.addEventListener('click', (e):void=>{\r\n        miDialogoUpEmail.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }); \r\n\r\n      //btnCerrarUpDireccion.addEventListener('click', ()=>miDialogoUpDireccion.close());\r\n\r\n  \r\n      function cerrarDialogoExterno(event:Event) {\r\n        if (event.target === miDialogoUpEmail || (event.target as HTMLInputElement).value === 'salir') {\r\n          miDialogoUpEmail.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n    }\r\n  \r\n  })();","(()=>{\r\n    if(document.querySelector('.ajustarcostos')){\r\n        let tablaAjustarCostos:HTMLElement;\r\n\r\n        type conversionunidadesapi = {\r\n            id:string,\r\n            idproducto: string,\r\n            idsubproducto: string,\r\n            idunidadmedidabase: string,\r\n            idunidadmedidadestino: string,\r\n            nombreunidadbase: string,\r\n            nombreunidaddestino: string,\r\n            factorconversion: string,\r\n            //idservicios:{idempleado:string, idservicio:string}[]\r\n          };\r\n\r\n        let allConversionUnidades:conversionunidadesapi[] = [];\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/allConversionesUnidades\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas las conversiones de unidades\r\n                const respuesta = await fetch(url); \r\n                allConversionUnidades = await respuesta.json();\r\n                console.log(allConversionUnidades);\r\n                pirntUnidades();\r\n                tablaAjustarCostos = ($('#tablaAjustarCostos') as any).DataTable(configdatatablesajustarcostos);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n        //tablaAjustarCostos = ($('#tablaAjustarCostos') as any).DataTable(configdatatables);\r\n        //indiceFila = (tablaAjustarCostos as any).row(1).data();\r\n\r\n        function pirntUnidades():void{\r\n            allConversionUnidades.forEach(subUnd =>{\r\n                let select = document.querySelector(`tr[data-idsubproducto=\"${subUnd.idsubproducto}\"]`)?.children[5].children[0];\r\n                if(select == undefined)select = document.querySelector(`tr[data-idproducto=\"${subUnd.idproducto}\"]`)?.children[5].children[0];\r\n                const option = document.createElement('option');\r\n                option.textContent = subUnd.nombreunidaddestino;\r\n                option.dataset.factor = subUnd.factorconversion;\r\n                select?.appendChild(option);\r\n            });\r\n        }\r\n \r\n\r\n        /*const fila = (tablaAjustarCostos as any).row((idx:number, data:any, node:HTMLElement)=>{\r\n            return node.dataset.idproducto === subUnd.idsubproducto;\r\n        }).data();*/\r\n        //console.log(fila[4]);\r\n      /*fila[4] = `<select class=\"formulario__select\" required>\r\n                        <option value=\"\" disabled selected>-Seleccionar-</option>\r\n                        <option value=\"\"> Unidad </option>\r\n                    </select>`;\r\n        (tablaAjustarCostos as any).row(2).data(fila).draw();*/\r\n\r\n        //tablaAjustarCostos = ($('#tablaAjustarCostos') as any).DataTable(configdatatables);\r\n        \r\n        document.querySelector('#tablaAjustarCostos')?.addEventListener('input', (e:Event)=>{\r\n            var input = e.target as HTMLInputElement;\r\n            let tipoelemento:string = '', idelemento:string = '';\r\n            if((input as HTMLInputElement).classList.contains('inputAjustarCosto')){\r\n                \r\n                var tr = input.closest('tr');\r\n                const selectUnidad = tr?.querySelector('.formulario__select') as HTMLSelectElement;\r\n                const factor:number = Number(selectUnidad.options[selectUnidad.selectedIndex].dataset.factor);\r\n                \r\n                var trx = input.closest('.fila') as HTMLElement;\r\n                if(!trx)trx = input.closest('tr')?.previousSibling as HTMLElement;\r\n\r\n                if(trx.classList.contains('producto')){\r\n                    idelemento = trx.dataset.idproducto!;\r\n                    tipoelemento = '0'; //si es producto\r\n                }\r\n                else{\r\n                    idelemento = trx.dataset.idsubproducto!;\r\n                    tipoelemento = '1';  // si es un subproducto\r\n                }\r\n\r\n                ////////////// enviar datos por api para actualizar costos /////////////\r\n                actualizarcostos(tipoelemento, idelemento, factor, input);\r\n            }\r\n        });\r\n\r\n\r\n        function actualizarcostos(tipoelemento:string, idelemento:string, factor:number, input:HTMLInputElement){\r\n            if(input.value=='')input.value = '0';\r\n            const costo = Number(input.value)/factor;\r\n            console.log(costo);\r\n            (async ()=>{ \r\n                const datos = new FormData();\r\n                datos.append('tipoelemento', tipoelemento); //1 = subproducto\r\n                datos.append('idelemento', idelemento);\r\n                datos.append('precio_compra', costo+'');\r\n                try {\r\n                    const url = \"/admin/api/actualizarcostos\";  //asocia el producto con el sub producto en la tabla productos_sub\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                        input.style.color = \"#02db02\";\r\n                        input.style.fontWeight = \"500\";\r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            })();\r\n        }\r\n    }\r\n\r\n})();","(()=>{\r\n    if(document.querySelector('.almacen')){\r\n        const btntrasladoinvnetario = document.querySelector('#btntrasladoinvnetario') as HTMLInputElement;\r\n        const btnXCerrarTrasladoInvnetario = document.querySelector('#btnXCerrarTrasladoInvnetario') as HTMLButtonElement;\r\n        const miDialogoTrasladoInvnetario = document.querySelector('#miDialogoTrasladoInvnetario') as any;\r\n        const reinciarinv = document.querySelector('#reinciarinv') as HTMLButtonElement;\r\n        const miDialogoStock = document.querySelector('#miDialogoStock') as any;\r\n        const modalStock = document.querySelector('#modalStock') as HTMLElement;\r\n        const selectStockRapidoUndmedida = document.querySelector('#selectStockRapidoUndmedida') as HTMLSelectElement;\r\n        let amount = document.querySelector('#cantidadStockRapido') as HTMLInputElement; //input cantidad de modal de stock rapido\r\n\r\n        const miDialogoIngresarProduccion = document.querySelector('#miDialogoIngresarProduccion') as any;\r\n        const selectitemAproducir = document.querySelector('#itemAproducir') as HTMLSelectElement;\r\n        const btnsproduccion = document.querySelectorAll<HTMLButtonElement>('.btnproduccion');  //btns ingresar descontar ajustar produccion\r\n        const selectIngresarProduccionUnidadmedida = document.querySelector('#selectIngresarProduccionUnidadmedida') as HTMLSelectElement;\r\n        const amountProduccion = document.querySelector('#stockIngresarProduccion') as HTMLInputElement;  //input cantidad cuando se ingresa orden de produccion\r\n        let cantidadactual = 0, indiceFila=0, endponit:string='', factorC = 0, tipoelemento:string = '', idelemento:string = '', tablaStockRapido:HTMLElement, tablaInventarioSedes:HTMLTableElement;\r\n    \r\n        const sedes = document.querySelector('#sedes');\r\n\r\n        interface datosProducto { stock: string, precio_compra: string, precio_venta: string }\r\n\r\n        type conversionunidadesapi = {\r\n            id:string,\r\n            idproducto:string,\r\n            idsubproducto: string,\r\n            idunidadmedidabase: string,\r\n            idunidadmedidadestino: string,\r\n            nombreunidadbase: string,\r\n            nombreunidaddestino: string,\r\n            factorconversion: string,\r\n          };\r\n\r\n          type productosXsucursal = {\r\n            productoid:string,\r\n            subproductoid: string,\r\n            nombreproducto:string,\r\n            sucursalid: string,\r\n            sucursal: string,\r\n            stock: string,\r\n          };\r\n\r\n        let allproductsXsucursal:productosXsucursal[]=[], allConversionUnidades:conversionunidadesapi[] = [];\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/allConversionesUnidades\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas las conversiones de unidades\r\n                const respuesta = await fetch(url); \r\n                allConversionUnidades = await respuesta.json();\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n        //apertura de la venta modal para las opcionesde traslado de inventario\r\n        btntrasladoinvnetario.addEventListener('click', ()=>{\r\n            miDialogoTrasladoInvnetario.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        });\r\n\r\n        btnXCerrarTrasladoInvnetario.addEventListener('click', (e)=>{\r\n            miDialogoTrasladoInvnetario.close();\r\n            document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        });\r\n\r\n        reinciarinv.addEventListener('click', (e)=>{\r\n            Swal.fire({\r\n                customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n                icon: 'question',\r\n                title: 'Desea reiniciar el inventario a cero?',\r\n                text: \"Todos los productos e insumos del inventario se reiniciaran a cero.\",\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Si',\r\n                cancelButtonText: 'No',\r\n            }).then((result:any) => {\r\n                if (result.isConfirmed) {\r\n                    (async ()=>{\r\n                        try {\r\n                        const url = \"/admin/api/reiniciarinv\"; //llamado a la API REST y se trae las direcciones segun cliente elegido\r\n                        const respuesta = await fetch(url); \r\n                        const resultado = await respuesta.json();\r\n                        msjalertToast('success', '¡Éxito!', resultado);\r\n                        setTimeout(() => {\r\n                          window.location.reload();  \r\n                        }, 1200);\r\n                        } catch (error) {\r\n                            console.log(error);\r\n                        }\r\n                    })();\r\n                }\r\n            });\r\n        });\r\n\r\n\r\n        sedes?.addEventListener('change', (e:Event)=>{\r\n            if((e.target as HTMLInputElement).checked){\r\n                (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"grid\";\r\n                (async ()=>{\r\n                    try {\r\n                        const url = \"/admin/api/getStockproductosXsucursal\"; //llamado a la API REST en el controlador almacencontrolador para treaer todos los productos con su respectiva sucursal y stock\r\n                        const respuesta = await fetch(url); \r\n                        allproductsXsucursal = await respuesta.json();\r\n                        printstockXsucursal();\r\n                        (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n                    } catch (error) {\r\n                        console.log(error);\r\n                    }\r\n                })();\r\n            }\r\n        });\r\n\r\n\r\n        /////////////////////////////////////  SOTCK RAPIDO ////////////////////////////////////////\r\n        /*document.querySelector('#stockproducto')?.addEventListener('click', (e)=>{\r\n            if((e.target as HTMLInputElement).checked){\r\n                 tablaStockRapido = ($('#tablaStockRapido') as any).DataTable(configdatatables);\r\n            }\r\n        })*/\r\n        tablaStockRapido = ($('#tablaStockRapido') as any).DataTable(configdatatablesstockrapido);\r\n\r\n        document.querySelector('#tablaStockRapido')?.addEventListener(\"click\", (e:Event)=>{ //evento click sobre toda la tabla\r\n            let options:string = '';\r\n            const target = e.target as HTMLElement;\r\n\r\n           if(target.closest('.btnsproducto')){\r\n                idelemento = target.closest('.btnsproducto')!.id;\r\n                tipoelemento = '0'; //si es producto\r\n                cantidadactual = Number((target.closest('.btnsproducto') as HTMLElement).dataset.stock);\r\n                document.querySelector('#nombreItemstockrapido')!.textContent = (target.closest('.btnsproducto') as HTMLElement).dataset.nombre!;\r\n            }\r\n            if(target.closest('.btnssubproducto')){\r\n                idelemento = target.closest('.btnssubproducto')!.id;\r\n                tipoelemento = '1'; //si es un subproducto\r\n                cantidadactual = Number((target.closest('.btnssubproducto') as HTMLElement).dataset.stock);\r\n                document.querySelector('#nombreItemstockrapido')!.textContent = (target.closest('.btnssubproducto') as HTMLElement).dataset.nombre!;\r\n            }\r\n\r\n            while(selectStockRapidoUndmedida.firstChild)selectStockRapidoUndmedida.removeChild(selectStockRapidoUndmedida.firstChild);\r\n            if(tipoelemento == '0'){\r\n                const productounidades = allConversionUnidades.filter(x => x.idproducto == idelemento); \r\n                productounidades.forEach(u=>options+=`<option data-factor=\"${u.factorconversion}\" value=\"${u.idproducto}\" >${u.nombreunidaddestino}</option>`);\r\n                selectStockRapidoUndmedida.insertAdjacentHTML('afterbegin', options);\r\n            }\r\n            if(tipoelemento == '1'){\r\n                const subproductounidades = allConversionUnidades.filter(x => x.idsubproducto == idelemento); \r\n                subproductounidades.forEach(u=>options+=`<option data-factor=\"${u.factorconversion}\" value=\"${u.idsubproducto}\" >${u.nombreunidaddestino}</option>`);\r\n                selectStockRapidoUndmedida.insertAdjacentHTML('afterbegin', options);\r\n            }\r\n            \r\n            if((e.target as HTMLElement)?.classList.contains(\"descontarStock\")||(e.target as HTMLElement).parentElement?.classList.contains(\"descontarStock\"))descontarStock(e);\r\n            if((e.target as HTMLElement)?.classList.contains(\"aumentarStock\")||(e.target as HTMLElement).parentElement?.classList.contains(\"aumentarStock\"))aumentarStock(e);\r\n            if((e.target as HTMLElement)?.classList.contains(\"ajustarStock\")||(e.target as HTMLElement).parentElement?.classList.contains(\"ajustarStock\"))ajustarStock(e);\r\n        });\r\n\r\n        //EDITAR STOCK\r\n        function descontarStock(e:Event){\r\n            modalStock.textContent = \"Descontar cantidad a inventario\"\r\n            endponit = \"descontarstock\";\r\n            indiceFila = (tablaStockRapido as any).row((e.target as HTMLElement).closest('tr')).index();\r\n            miDialogoStock.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n\r\n        function aumentarStock(e:Event){\r\n            modalStock.textContent = \"Ingreasar cantidad a inventario\"\r\n            endponit = \"aumentarstock\";\r\n            indiceFila = (tablaStockRapido as any).row((e.target as HTMLElement).closest('tr')).index();\r\n            miDialogoStock.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n\r\n        function ajustarStock(e:Event){\r\n            modalStock.textContent = \"Ajustar cantidad a inventario\"\r\n            endponit = \"ajustarstock\";\r\n            indiceFila = (tablaStockRapido as any).row((e.target as HTMLElement).closest('tr')).index();\r\n            miDialogoStock.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n\r\n\r\n        document.querySelector('#formStock')?.addEventListener('submit', (e)=>{\r\n            e.preventDefault();\r\n            factorC = Number(selectStockRapidoUndmedida.options[selectStockRapidoUndmedida.selectedIndex].dataset.factor);\r\n            let info = (tablaStockRapido as any).page.info(), AmountItem:number = factorC*Number(amount.value);\r\n            \r\n            if(endponit == \"descontarstock\")cantidadactual = cantidadactual-AmountItem;\r\n            if(endponit == \"aumentarstock\")cantidadactual = cantidadactual+AmountItem;\r\n            if(endponit == \"ajustarstock\")cantidadactual = AmountItem;\r\n\r\n            (async ()=>{\r\n                const datos = new FormData();\r\n                datos.append('tipoitem', tipoelemento);\r\n                datos.append('iditem', idelemento);\r\n                datos.append('cantidad', AmountItem.toString());\r\n                try{\r\n                    const url = \"/admin/api/\"+endponit;  //asocia el producto con el sub producto en la tabla productos_sub\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                        msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                        ////// reset form ///////\r\n                        (document.querySelector('#formStock') as HTMLFormElement)?.reset();\r\n                        //actualizar fila\r\n                        //(tablaStockRapido as any).cell(indiceFila, 3).data(cantidadactual).draw();\r\n                        //(tablaStockRapido as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                        //actualiza tabla stock rapido\r\n                        actualizarStockRapido([resultado.item[0]], tipoelemento);\r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                    miDialogoStock.close();\r\n                    document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                }catch(error){\r\n                    console.log(error);\r\n                }\r\n            })();//cierre de async()\r\n        });\r\n\r\n\r\n    //////////////////////////// SOTCK POR SUCURSAL //////////////////////\r\n    function printstockXsucursal(){\r\n        const sucursales = [...new Set(allproductsXsucursal.map(d => d.sucursal))]; //lista unica de sucursales\r\n        \r\n        // 2. Reorganizar por producto\r\n        const productos: Record<string, { nombreproducto: string; stocks: Record<string, string> }> = {};\r\n        allproductsXsucursal.forEach(d => {\r\n            if(d.productoid){\r\n                if (!productos['p'+d.productoid]) { //si el obj no es creado se crea con el nombre del producto pero el stock vacio\r\n                    productos['p'+d.productoid] = { nombreproducto: d.nombreproducto, stocks: {} };\r\n                }\r\n                productos['p'+d.productoid].stocks[d.sucursal] = d.stock; //aqui se llena el stock, que es un obj y sus propiedades son las sedes\r\n            }\r\n            if(d.subproductoid){\r\n                if (!productos['s'+d.subproductoid]) { //si el obj no es creado se crea con el nombre del producto pero el stock vacio\r\n                    productos['s'+d.subproductoid] = { nombreproducto: 'S-'+d.nombreproducto, stocks: {} };\r\n                }\r\n                productos['s'+d.subproductoid].stocks[d.sucursal] = d.stock; //aqui se llena el stock, que es un obj y sus propiedades son las sedes\r\n            }\r\n        });\r\n\r\n        // 3. Columnas dinámicas\r\n        const columnas = [{ title: \"Producto\", data: \"nombreproducto\" }];\r\n        sucursales.forEach(s => {\r\n            columnas.push({ title: s, data: s });\r\n        });\r\n\r\n        // 4. Dataset\r\n        const dataset = Object.values(productos).map(prod => {\r\n            const fila: any = { nombreproducto: prod.nombreproducto };\r\n            sucursales.forEach(s => {\r\n                fila[s] = prod.stocks[s] ?? 0; //fila es un obj, se crea la propieadad con el nombre de la sucursal y se iguala al objeto stock copn propiedad sucursal.\r\n            });\r\n            return fila;\r\n        });\r\n\r\n        tablaInventarioSedes = ($('#tablaInventarioSedes') as any).DataTable({\r\n            data: dataset,\r\n            columns: columnas,\r\n            layout: {\r\n                topStart: {\r\n                    buttons: [\r\n                    {extend: 'copyHtml5', text: 'Copia'}, \r\n                    {extend: 'excelHtml5', title: 'InventarioXsede'}, \r\n                    {extend: 'pdfHtml5', title: 'InventarioXsede'}, \r\n                    {extend: 'print', title: 'InventarioXsede', text: 'Imprimir'},\r\n                    'colvis'\r\n                    ],\r\n                    pageLength: 'pageLength'\r\n                }\r\n            },\r\n            pageLength: 25,\r\n            paging: true,\r\n            lengthChange: true,\r\n            searching: true,\r\n            ordering: true,\r\n            info: true,\r\n            autoWidth: true,\r\n            responsive: true,\r\n            deferRender: true,\r\n            //retrieve: true,\r\n            processing: true,\r\n            language: {\r\n                search: 'Busqueda',\r\n                emptyTable: 'No Hay datos disponibles',\r\n                zeroRecords:    \"No se encontraron registros coincidentes\",\r\n                lengthMenu: '_MENU_ Entradas por pagina',\r\n                info: 'Mostrando 1 de _MAX_ registros',\r\n                infoEmpty: 'No hay entradas a mostrar',\r\n                infoFiltered: ' (filtrado desde _MAX_ registros)',\r\n                paginate: {\"first\": \"<<\", \"last\": \">>\", \"next\": \">\", \"previous\": \"<\"}\r\n            },\r\n            destroy: true, // importante si recargas la tabla\r\n        });\r\n\r\n    }\r\n\r\n\r\n    ///////////////////////////// INGRESAR ORDEN DE PRODUCCION /////////////////////////////////\r\n        \r\n        //SELECT2 DE itemAproducir\r\n        ($('#itemAproducir') as any).select2({\r\n            maximumSelectionLength: 1,\r\n        });\r\n\r\n        ////// evento al select del producto a producir ////// \r\n        $(\"#itemAproducir\").on('change', (e)=>{\r\n            const idproducto = (e.target as HTMLOptionElement).value;\r\n            const selectedOption = $(\"#itemAproducir option:selected\");\r\n            if(idproducto){\r\n                const prodund = allConversionUnidades.filter(x =>x.idproducto == idproducto);\r\n                mostrarSelectUnidades(prodund);\r\n                let producto: datosProducto; //inicializamos el objeto de tipo interfaz \r\n                producto = {\r\n                    stock: selectedOption.data('stock'),\r\n                    precio_compra: selectedOption.data('precio_compra'),\r\n                    precio_venta: selectedOption.data('precio_venta')\r\n                }\r\n                mostrarInfoItem(producto);\r\n            }\r\n        });\r\n\r\n        /////////// CARGAR LAS UNIDADES DE MEDIDA EN EL SELECT unidadmedida  ////////////\r\n        function mostrarSelectUnidades(prodund:conversionunidadesapi[]):void{\r\n            while(selectIngresarProduccionUnidadmedida?.firstChild)selectIngresarProduccionUnidadmedida.removeChild(selectIngresarProduccionUnidadmedida?.firstChild);\r\n            prodund.forEach(und =>{\r\n              const option = document.createElement('option');\r\n              option.textContent = und.nombreunidaddestino;\r\n              option.value = und.id;  //und.id  =  es el id de la tabla conversionunidades\r\n              option.dataset.factor = und.factorconversion;\r\n              selectIngresarProduccionUnidadmedida.appendChild(option);\r\n            });\r\n        }\r\n\r\n        btnsproduccion.forEach((btnproduccion, index) =>{\r\n            btnproduccion.addEventListener('click', (e)=>{\r\n               if(selectitemAproducir.value){    \r\n                    document.querySelector('#nombreItemAProducir')!.textContent = selectitemAproducir.options[selectitemAproducir.selectedIndex].textContent;\r\n                    if(index === 0){\r\n                        endponit = \"aumentarstock\";\r\n                        document.querySelector('#modalIngresarProduccion')!.textContent = \"Ingreasar produccion a inventario\";\r\n                    }\r\n                    if(index === 1){\r\n                        endponit = \"descontarstock\";\r\n                        document.querySelector('#modalIngresarProduccion')!.textContent = \"Descontar catnidad de inventario\";\r\n                    }\r\n                    if(index === 2){\r\n                        endponit = \"ajustarstock\";\r\n                        document.querySelector('#modalIngresarProduccion')!.textContent = \"Ajustar cantidad de inventario\";\r\n                    }\r\n                    miDialogoIngresarProduccion.showModal();\r\n                    document.addEventListener(\"click\", cerrarDialogoExterno);\r\n                }\r\n            });\r\n        });\r\n\r\n\r\n        document.querySelector('#formIngresarProduccion')?.addEventListener('submit', (e)=>{\r\n            e.preventDefault();\r\n            factorC = Number(selectIngresarProduccionUnidadmedida.options[selectIngresarProduccionUnidadmedida.selectedIndex].dataset.factor);\r\n            let AmountItemProduccion:number = factorC*Number(amountProduccion.value);\r\n\r\n            (async ()=>{\r\n                const datos = new FormData();\r\n                datos.append('tipoitem', '0'); //0 = producto,  1 = subproducto\r\n                datos.append('iditem', selectitemAproducir.value);\r\n                datos.append('cantidad', AmountItemProduccion.toString());\r\n                datos.append('construccion', '1');  //se indica al backend que es construccion y se debe descontar sus insumos\r\n                try{\r\n                    const url = \"/admin/api/\"+endponit;  //endpoint = aumentarstock para produccion, asocia el producto con el sub producto en la tabla productos_sub\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                        msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                        ////// reset form ///////\r\n                        (document.querySelector('#formIngresarProduccion') as HTMLFormElement)?.reset();\r\n                        //mostrar contaidad actual\r\n                        mostrarInfoItem(resultado.item[0]); //producto\r\n                        //actualizar tabla stock rapido\r\n                        if(resultado.insumos !== undefined)actualizarStockRapido(resultado.insumos[0], '1'); //subproductos\r\n                        //actualizar el selecto de los productos/insumos a producir\r\n                        $(\"#itemAproducir option:selected\").data('stock', resultado.item[0].stock);\r\n                        \r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                    miDialogoIngresarProduccion.close();\r\n                    document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                }catch(error){\r\n                    console.log(error);\r\n                }\r\n            })();//cierre de async()\r\n        });\r\n\r\n\r\n        function mostrarInfoItem(producto:{stock:string, precio_compra:string, precio_venta:string}){\r\n            document.querySelector('#stock')!.textContent = Number(producto.stock).toLocaleString();\r\n            document.querySelector('#costoProduccion')!.textContent = \"$\"+Number(producto.precio_compra).toLocaleString();\r\n            document.querySelector('#precioVenta')!.textContent = \"$\"+Number(producto.precio_venta).toLocaleString();\r\n        }\r\n\r\n\r\n        function actualizarStockRapido(insumosProductos:{id:string, productoid:string, subproductoid:string, sucursalid:string, stock:string, stockminimo:string}[], tipoItem:string){\r\n            insumosProductos.forEach(element => {\r\n                (tablaStockRapido as any).rows().every(function (this: any){\r\n                    const rowNode = this.node() as HTMLTableRowElement;\r\n                    let id_element = element.subproductoid, idAttr = rowNode.getAttribute('data-idsubproducto');\r\n                    if(tipoItem == '0'){\r\n                        idAttr = rowNode.getAttribute('data-idproducto');\r\n                        id_element = element.productoid;\r\n                    }\r\n                    if (idAttr && idAttr === id_element){\r\n                        this.cell(this.index(), 3).data(`<div class=\"text-center px-3 py-4 rounded-lg\">${element.stock}</div>`);\r\n\r\n                        // Obtén el <td> real\r\n                        const td = (tablaStockRapido as any).cell(this.index(), 3).node() as HTMLTableCellElement;\r\n                        if(Number(element.stock) <= Number(element.stockminimo)){\r\n                            td.firstElementChild?.classList.remove('bg-cyan-50', 'text-cyan-600');\r\n                            td.firstElementChild?.classList.add('bg-red-50', 'text-red-800');\r\n                        }else{\r\n                            td.firstElementChild?.classList.remove('bg-red-50', 'text-red-800');\r\n                            td.firstElementChild?.classList.add('bg-cyan-50', 'text-cyan-600');\r\n                        }\r\n                    } \r\n                });\r\n            })\r\n        }\r\n\r\n\r\n        function cerrarDialogoExterno(event:Event) {\r\n            \r\n            if (event.target === miDialogoTrasladoInvnetario || event.target === btnXCerrarTrasladoInvnetario || event.target === miDialogoStock || event.target === miDialogoIngresarProduccion || (event.target as HTMLInputElement).value === 'salir') {\r\n                miDialogoStock.close();\r\n                miDialogoIngresarProduccion.close();\r\n                miDialogoTrasladoInvnetario.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();","(()=>{\r\n  if(document.querySelector('.categorias')){\r\n    const crearCategoria = document.querySelector('#crearCategoria');\r\n    const miDialogoCategoria = document.querySelector('#miDialogoCategoria') as any;\r\n    let indiceFila=0, control=0, tablaCategorias:HTMLElement;\r\n\r\n    type productsapi = {\r\n      id:string,\r\n      idcategoria: string,\r\n      nombre: string,\r\n      foto: string,\r\n      marca: string,\r\n      codigo: string,\r\n      descripcion: string,\r\n      peso: string,\r\n      medidas: string,\r\n      color: string,\r\n      funcion: string,\r\n      uso:string,\r\n      fabricante: string,\r\n      garantia: string,\r\n      stock: string,\r\n      categoria: string,\r\n      precio_compra: string,\r\n      precio_venta: string,\r\n      fecha_ingreso: string,\r\n      //idservicios:{idempleado:string, idservicio:string}[]\r\n    };\r\n\r\n    let products:productsapi[]=[], unproducto:productsapi;\r\n\r\n    //////////////////  TABLA //////////////////////\r\n    tablaCategorias = ($('#tablaCategorias') as any).DataTable(configdatatables);\r\n\r\n    crearCategoria?.addEventListener('click', (e):void=>{\r\n      control = 0;\r\n      limpiarformdialog();\r\n      document.querySelector('#modalCategoria')!.textContent = \"Crear categoria\";\r\n      (document.querySelector('#btnEditarCrearCategoria') as HTMLInputElement).value = \"Crear\";\r\n      miDialogoCategoria.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    document.querySelector('#tablaCategorias')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarCategoria\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarCategoria\"))editarCategoria(e);\r\n      if(target?.classList.contains(\"eliminarCategoria\")||target.parentElement?.classList.contains(\"eliminarCategoria\"))eliminarCategoria(e);\r\n    });\r\n\r\n    function editarCategoria(e:Event){\r\n      control = 1;\r\n      let idcategoria = (e.target as HTMLElement).parentElement?.id!;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idcategoria = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n      //(document.querySelector('#formCrearUpdateCategoria') as HTMLFormElement).action = \"/admin/almacen/actualizar_categoria\";\r\n      document.querySelector('#modalCategoria')!.textContent = \"Actualizar categoria\";\r\n      (document.querySelector('#btnEditarCrearCategoria') as HTMLInputElement)!.value = \"Actualizar\";\r\n      (document.querySelector('#idcategoria') as HTMLInputElement).value = idcategoria;\r\n      (document.querySelector('#categoria') as HTMLInputElement).value = ((e.target as HTMLElement).closest('.acciones-btns') as HTMLElement)?.dataset.categoria!; \r\n      indiceFila = (tablaCategorias as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoCategoria.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar categoria  //////////////////////\r\n    document.querySelector('#formCrearUpdateCategoria')?.addEventListener('submit', e=>{\r\n      if(control){\r\n        e.preventDefault();\r\n        var info = (tablaCategorias as any).page.info();\r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', $('#idcategoria').val() as string);\r\n          datos.append('nombre', $('#categoria').val()as string);\r\n          try {\r\n              const url = \"/admin/api/actualizar_categoria\";\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json(); \r\n              console.log(resultado); \r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                ///////// cambiar la fila completa, su contenido //////////\r\n                const datosActuales = (tablaCategorias as any).row(indiceFila+=info.start).data();\r\n                /*Nombre categoria*/datosActuales[1] = $('#categoria').val();\r\n                /*data-categoria*/datosActuales[3] = `<div class=\"acciones-btns\" id=\"${$('#idcategoria').val()}\" data-categoria=\"${$('#categoria').val()}\"><button class=\"btn-md btn-turquoise editarCategoria\"><i class=\"fa-solid fa-pen-to-square\"></i></button><button class=\"btn-md btn-red eliminarCategoria\"><i class=\"fa-solid fa-trash-can\"></i></button></div>`;//$('#categoria').val();\r\n                \r\n                (tablaCategorias as any).row(indiceFila).data(datosActuales).draw();\r\n                (tablaCategorias as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n              document.addEventListener(\"click\", cerrarDialogoExterno);\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n      } //fin if(control)\r\n    });\r\n\r\n    function eliminarCategoria(e:Event){\r\n      let idcategoria = (e.target as HTMLElement).parentElement!.id, info = (tablaCategorias as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idcategoria = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaCategorias as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar la categoria?',\r\n          text: \"La categoria sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idcategoria);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarCategoria\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();\r\n                      if(resultado.length || resultado.exito !== undefined){\r\n                        (tablaCategorias as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaCategorias as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateCategoria') as HTMLFormElement)?.reset();\r\n      (document.querySelector('#formCrearUpdateCategoria') as HTMLFormElement).action = \"/admin/almacen/crear_categoria\";\r\n      (document.querySelector('#idcategoria') as HTMLInputElement).value = '0';\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoCategoria || (event.target as HTMLInputElement).value === 'Salir' || (event.target as HTMLInputElement).value === 'Actualizar') {\r\n        miDialogoCategoria.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n  }\r\n\r\n})();","\r\n(()=>{\r\n    if(document.querySelector('.compras')){\r\n        const proveedor = document.querySelector('#proveedor') as HTMLSelectElement;\r\n        const impuesto = document.querySelector('#inputimpuesto') as HTMLInputElement;\r\n        const nfactura = document.querySelector('#nfactura') as HTMLInputElement;\r\n        const fecha = document.querySelector('#fecha') as HTMLDataElement;\r\n        const origenPago = document.querySelector('#origenPago') as HTMLSelectElement;\r\n        const origenCaja = document.querySelector('#origenCaja') as HTMLSelectElement;\r\n        const origenBanco = document.querySelector('#origenBanco') as HTMLSelectElement;\r\n        const formapago = document.querySelector('#formapago') as HTMLSelectElement;\r\n        const observacion = document.querySelector('#observacion') as HTMLInputElement;\r\n        const btnvaciar = document.querySelector('#btnvaciar');\r\n        const miDialogoVaciar = document.querySelector('#miDialogoVaciar') as any;\r\n        const miDialogoRegistrarcompra = document.querySelector('#miDialogoRegistrarcompra') as any;\r\n        const tablaCompras = document.querySelector('#tablaCompras tbody');\r\n\r\n        type conversionunidadesapi = {\r\n            id:string,\r\n            idproducto: string,\r\n            idsubproducto: string,\r\n            idunidadmedidabase: string,\r\n            idunidadmedidadestino: string,\r\n            nombreunidadbase: string,\r\n            nombreunidaddestino: string,\r\n            factorconversion: string,\r\n            //idservicios:{idempleado:string, idservicio:string}[]\r\n          };\r\n\r\n        let carrito:{iditem:string, idpx:string, idsx:string, tipo: string, nombreitem:string, unidad:string, cantidad: number, cantidadcomprado: number, factor: number, impuesto: number, valorunidad: number, subtotal: number, precio_compra: number, valorcompra: number}[]=[];\r\n        let allConversionUnidades:conversionunidadesapi[] = [];\r\n        let filteredData: {id:string, text:string, tipo:string, sku:string, unidadmedida:string}[];   //tipo = 0 es producto simple,  1 = subproducto\r\n\r\n\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/allConversionesUnidades\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas las conversiones de unidades\r\n                const respuesta = await fetch(url); \r\n                allConversionUnidades = await respuesta.json();\r\n                console.log(allConversionUnidades);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/totalitems\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas los productos simples y subproductos\r\n                const respuesta = await fetch(url); \r\n                const resultado:{id:string, nombre:string, tipoproducto:string, sku:string, unidadmedida:string}[] = await respuesta.json(); \r\n                filteredData = resultado.map(item => ({ id: item.id, text: item.nombre, tipo: item.tipoproducto??'1', sku: item.sku, unidadmedida: item.unidadmedida }));\r\n                activarselect2(filteredData);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n\r\n        impuesto?.addEventListener('input', ()=>resumen());\r\n\r\n        function activarselect2(filteredData:{id:string, text:string, tipo:string, sku:string, unidadmedida:string}[]){\r\n            ($('#articulo') as any).select2({ \r\n                data: filteredData,\r\n                placeholder: \"Selecciona un item\",\r\n                maximumSelectionLength: 1,\r\n                /*\r\n                templateResult: function (data:{id:string, text:string, tipo:string}) {\r\n                    // Personalizar cómo se muestra cada opción en el dropdown\r\n                    if (!data.id) { return data.text; }  // Si no hay id, solo mostrar el texto\r\n                    const html = `\r\n                        <div class=\"custom-option\">\r\n                            <span class=\"item-name\">${data.text}</span> \r\n                            <span class=\"item-type\">${data.tipo}</span>  <!-- Mostrar tipo adicional -->\r\n                        </div>`;\r\n                    return $(html);  // Devolver el HTML personalizado\r\n                }*/\r\n            });\r\n        }\r\n\r\n\r\n        //////////  ELEGIR ORIGEN DEL PAGO DE LA COMPRA, CAJA O BANCO ///////////\r\n        origenPago.addEventListener('change', (e:Event)=>{\r\n            if((e.target as HTMLOptionElement).value == '0'){ //0 = origen caja\r\n                document.querySelector('#divBanco')?.classList.add('hidden');\r\n                document.querySelector('#divBanco')?.removeAttribute(\"required\");\r\n            }else{  //1 = origen banco\r\n                document.querySelector('#divBanco')?.classList.remove('hidden');\r\n                document.querySelector('#divBanco')?.setAttribute(\"required\", \"\");\r\n            }\r\n        });\r\n\r\n\r\n        ////// EVENTO AL SELECT ARTICULOS O ITEMS PARA SELECCIONAR EL ITEM Y AÑADIR AL CARRITO ////// \r\n        $(\"#articulo\").on('change', (e)=>{\r\n            let datos = ($('#articulo') as any).select2('data')[0];\r\n            if(datos){\r\n                const index = carrito.findIndex(x=>x.iditem==datos.id&&x.tipo==datos.tipo);\r\n                if(index == -1){  //si el item seleccionado no existe en el carrito, agregarlo.\r\n                    const itemselected = filteredData.find(x=>x.id==datos.id&&x.tipo==datos.tipo)!; //products es el arreglo de todos los productos traido por api\r\n                    const item:{iditem: string, idpx: string, idsx: string, tipo: string, nombreitem: string, unidad: string, cantidad: number, cantidadcomprado: number, factor: number, impuesto: number, valorunidad: number, subtotal: number, precio_compra:number, valorcompra: number} = {\r\n                        iditem: itemselected?.id!,\r\n                        idpx: itemselected.tipo=='0'?itemselected.id:'NULL',\r\n                        idsx: itemselected.tipo=='1'?itemselected.id:'NULL',\r\n                        tipo: itemselected.tipo,  ////tipo = 0 es producto simple,  1 = subproducto\r\n                        nombreitem: itemselected.text,\r\n                        unidad: itemselected.unidadmedida,\r\n                        cantidad: 1,\r\n                        cantidadcomprado: 1,\r\n                        factor: 1,\r\n                        impuesto: 0,\r\n                        valorunidad: 0,\r\n                        subtotal: 0,\r\n                        precio_compra: 0,\r\n                        valorcompra: 0,\r\n                    }\r\n                    carrito = [...carrito, item];\r\n                    printItemTable(datos.id, datos.tipo, datos.unidadmedida);\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        function printItemTable(id:string, tipo:string, unidadmedida:string){\r\n            let options = `<option data-factor=\"1\" value=\"\" >${unidadmedida}</option>`;\r\n            const unItem = filteredData.find(x=>x.id==id&&x.tipo==tipo)!;\r\n            if(tipo=='1'){   //si es un subproducto\r\n                options = \"\";\r\n                const subproductounidades = allConversionUnidades.filter(x => x.idsubproducto == id); \r\n                subproductounidades.forEach(u=>options+=`<option data-factor=\"${u.factorconversion}\" value=\"${u.idsubproducto}\" >${u.nombreunidaddestino}</option>`);\r\n            }\r\n            if(tipo=='0'){\r\n                options = \"\";\r\n                const productounidades = allConversionUnidades.filter(x => x.idproducto == id); \r\n                productounidades.forEach(u=>options+=`<option data-factor=\"${u.factorconversion}\" value=\"${u.idproducto}\" >${u.nombreunidaddestino}</option>`);\r\n            }\r\n            const tr = document.createElement('TR');\r\n            tr.classList.add('itemselect');\r\n            tr.dataset.id = `${id}`;\r\n            tr.dataset.tipo = `${tipo}`;\r\n            tr.insertAdjacentHTML('afterbegin', `<td class=\"!px-0 !py-2 text-xl text-gray-500 leading-5\">${unItem?.text}</td> \r\n            <td class=\"!p-2 text-xl text-gray-500 leading-5\">\r\n                <select class=\"formulario__select selectunidad\">\r\n                    ${options}  \r\n                </select>\r\n            </td>\r\n            <td class=\"!px-0 !py-2\"><div class=\"flex\"><button type=\"button\"><span class=\"menos material-symbols-outlined\">remove</span></button><input type=\"text\" class=\"inputcantidad w-20 px-2 text-center\" value=\"1\" oninput=\"this.value = parseInt(this.value.replace(/[,.]/g, '')||1)\"><button type=\"button\"><span class=\"mas material-symbols-outlined\">add</span></button></div></td>\r\n            <td class=\"!p-2 text-xl text-gray-500 leading-5\"><input type=\"text\" placeholder=\"Ingresa Valor Total Producto\" class=\"inputcompra text-base sm:text-lg md:text-xl lg:text-2xl placeholder:text-sm sm:placeholder:text-base md:placeholder:text-lg lg:placeholder:text-xl bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:border-indigo-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white h-14 focus:outline-none focus:ring-1\" value=\"\" oninput=\"this.value = parseInt(this.value.replace(/[,.]/g, '')||0)\"></td>\r\n            <td class=\"accionestd\"><div class=\"acciones-btns\"><button class=\"btn-md btn-red eliminarItem\"><i class=\"fa-solid fa-trash-can\"></i></button></div></td>`);\r\n            tablaCompras?.appendChild(tr);\r\n        }\r\n        \r\n\r\n        //////////////////////////////////// evento a la tabla de los productos seleccionados  ///////////////////////////////////\r\n        tablaCompras?.addEventListener('click', (e:Event)=>{\r\n            const elementItem = (e.target as HTMLElement)?.closest('.itemselect'); //seleccionamos el tr de la tabla\r\n            const iditem = (elementItem as HTMLElement).dataset.id!;\r\n            const tipoitem = (elementItem as HTMLElement).dataset.tipo!;\r\n\r\n            const itemCarrito = carrito.find(x=>x.iditem==iditem&&x.tipo==tipoitem)!;\r\n\r\n            if((e.target as HTMLElement).classList.contains('selectunidad')){\r\n                if((e.target as HTMLElement).dataset.event != \"eventSelect\"){\r\n                    e.target?.addEventListener('change', (e:Event)=>{\r\n                        const unit = e.target as HTMLSelectElement;\r\n                        itemCarrito.factor = Number(unit.options[unit.selectedIndex].dataset.factor);\r\n                    });\r\n                    (e.target as HTMLElement).dataset.event = \"eventSelect\"; //se marca al input que ya tiene evento añadido\r\n                }\r\n            }\r\n            \r\n            if((e.target as HTMLElement).classList.contains('menos')){\r\n                itemCarrito.cantidadcomprado--;\r\n                if(itemCarrito.cantidadcomprado<0)itemCarrito.cantidadcomprado = 0;\r\n            }\r\n\r\n            if((e.target as HTMLElement).classList.contains('inputcantidad')){\r\n                if((e.target as HTMLElement).dataset.event != \"eventInput\"){\r\n                    e.target?.addEventListener('input', (e:Event)=>{\r\n                        itemCarrito.cantidadcomprado = Number((e.target as HTMLInputElement).value);\r\n                        itemCarrito.cantidad = itemCarrito.cantidadcomprado*itemCarrito.factor;\r\n                    });\r\n                    (e.target as HTMLElement).dataset.event = \"eventInput\"; //se marca al input que ya tiene evento añadido\r\n                }\r\n            }\r\n\r\n            if((e.target as HTMLElement).classList.contains('mas'))itemCarrito.cantidadcomprado++;\r\n            \r\n            //////// INPUT CANTIDAD DE LA TABLA DE ITEMS DE COMPRA, SE ACTUALIZA CADA VEZ QUE SE DE CLICK EN MENOS O MAS\r\n            (tablaCompras?.querySelector(`TR[data-id=\"${iditem}\"][data-tipo=\"${tipoitem}\"] .inputcantidad`) as HTMLInputElement).value = itemCarrito?.cantidadcomprado+'';\r\n\r\n            /////// EVENTO AL INPUT VALOR DE COMPRA DE LA TABLA DE ITEMS DE COMPRA  ///////\r\n            if((e.target as HTMLElement).classList.contains('inputcompra')){\r\n                if((e.target as HTMLElement).dataset.event != \"eventInput\"){\r\n                    e.target?.addEventListener('input', (e:Event)=>{\r\n                        itemCarrito.valorcompra = Number((e.target as HTMLInputElement).value);\r\n                        itemCarrito.precio_compra = itemCarrito.valorcompra/itemCarrito.cantidad;\r\n                        resumen();\r\n                    });\r\n                    (e.target as HTMLElement).dataset.event = \"eventInput\"; //se marca al input que ya tiene evento añadido\r\n                }\r\n            }\r\n\r\n            if((e.target as HTMLElement).classList.contains('eliminarItem') || (e.target as HTMLElement).tagName == \"I\"){\r\n                carrito = carrito.filter(x=> {\r\n                    if(x.iditem==iditem){\r\n                        if(x.tipo==tipoitem){\r\n                            return false;\r\n                        }else{\r\n                            return true;\r\n                        }\r\n                    }else{\r\n                        return true;\r\n                    }\r\n                });\r\n                tablaCompras?.querySelector(`TR[data-id=\"${iditem}\"][data-tipo=\"${tipoitem}\"]`)?.remove();\r\n                resumen();\r\n            }\r\n\r\n            itemCarrito.cantidad = itemCarrito.cantidadcomprado*itemCarrito.factor;\r\n        });\r\n\r\n\r\n        btnvaciar?.addEventListener('click', ()=>{\r\n            if(carrito.length){\r\n              miDialogoVaciar.showModal();\r\n              document.addEventListener(\"click\", cerrarDialogoExterno);\r\n            }\r\n        });\r\n\r\n        document.querySelector('#formComprar')?.addEventListener('submit', e=>{\r\n            e.preventDefault();\r\n            miDialogoRegistrarcompra.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        });\r\n\r\n  \r\n        async function procesarpedido(estado:string){\r\n            const datos = new FormData();\r\n            datos.append('idproveedor', proveedor.options[proveedor.selectedIndex].value);\r\n            datos.append('idformapago', formapago.options[formapago.selectedIndex].value);\r\n            datos.append('idorigencaja', origenCaja.options[origenCaja.selectedIndex].value);\r\n            datos.append('idorigenbanco', origenBanco.options[origenBanco.selectedIndex].value);\r\n            datos.append('nombreproveedor', proveedor.options[proveedor.selectedIndex].textContent!);\r\n            datos.append('formapago', formapago.options[formapago.selectedIndex].text);\r\n            datos.append('nfactura', nfactura.value);\r\n            datos.append('impuesto', impuesto.value);\r\n            datos.append('origenpago', origenPago.options[origenPago.selectedIndex].value); //0 = si el origen viene de la caja,  1 = banco\r\n            datos.append('nombreorigenpago', origenPago.options[origenPago.selectedIndex].textContent+''); //caja o banco\r\n            datos.append('nombreorigencaja', origenCaja.options[origenCaja.selectedIndex].textContent+'');\r\n            datos.append('nombreorigenbanco', origenBanco.options[origenBanco.selectedIndex].value?origenBanco.options[origenBanco.selectedIndex].textContent+'':'');\r\n            datos.append('cantidaditems', carrito.reduce((total, item)=>item.cantidad+total, 0)+'');\r\n            datos.append('observacion', observacion.value);\r\n            datos.append('estado', estado);\r\n            datos.append('subtotal', carrito.reduce((total, item)=>item.valorcompra+total, 0)+'');\r\n            datos.append('valortotal', carrito.reduce((total, item)=>item.valorcompra+total, 0)+'');\r\n            datos.append('fechacompra', fecha.value);\r\n            datos.append('carrito', JSON.stringify(carrito));  ////arreglo de objetos de producto simple y subproducto\r\n            datos.append('subID', JSON.stringify(carrito.map(item=>{if(item.idsx){return item.idsx}}))); //envia solo los id de los subproductos\r\n            try {\r\n                const url = \"/admin/api/registrarCompra\";  //va al controlador ventascontrolador\r\n                const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                const resultado = await respuesta.json();\r\n                if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                /////// reinciar campos de la compra\r\n                vaciarcompra();\r\n                (document.querySelector('#formComprar') as HTMLFormElement)?.reset();\r\n                }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        function validarValorCompra():boolean{\r\n            return carrito.some(item=>Number.isNaN(item.valorcompra)||item.valorcompra==0);\r\n        }\r\n\r\n        function resumen():void{\r\n            document.querySelector('#impuesto')!.textContent = '% '+impuesto.value;\r\n            document.querySelector('#total')!.textContent = '$ '+carrito.reduce((total, item)=>item.valorcompra+total, 0).toLocaleString()+'';\r\n        \r\n        }\r\n\r\n        function vaciarcompra():void\r\n        {\r\n            carrito.length = 0;\r\n            while(tablaCompras?.firstChild)tablaCompras.removeChild(tablaCompras?.firstChild);\r\n            document.querySelector('#impuesto')!.textContent = '% 0';\r\n            document.querySelector('#total')!.textContent = '$ 0';\r\n        }\r\n\r\n        function cerrarDialogoExterno(event:Event) {\r\n            const f = event.target;\r\n            if (f === miDialogoVaciar || f === miDialogoRegistrarcompra || (f as HTMLInputElement).closest('.novaciar') || (f as HTMLInputElement).closest('.sivaciar') || (f as HTMLInputElement).closest('.nocomprar') || (f as HTMLInputElement).closest('.sicomprar')) {\r\n              miDialogoVaciar.close();\r\n              miDialogoRegistrarcompra.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n              if((f as HTMLInputElement).closest('.sicomprar')){\r\n                if(!validarValorCompra()){\r\n                    procesarpedido('paga');\r\n                }else{\r\n                    msjalertToast('error', '¡Error!', 'Verifica el valor de compra de la lista de productos');\r\n                }\r\n              }\r\n              if((f as HTMLInputElement).closest('.sivaciar'))vaciarcompra();\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n})();","(()=>{\r\n    \r\n    if(document.querySelector('.ensamblaje')){\r\n        const listaSubproductos = document.querySelector('.listaSubproductos');\r\n        //const subproducto:HTMLSelectElement = document.querySelector('#subproducto')!;\r\n        const selectUnidadMedida = document.querySelector('#unidadmedida')! as HTMLSelectElement;\r\n        let amount = document.querySelector('#cantidad') as HTMLInputElement; //input cantidad\r\n\r\n        type conversionunidadesapi = {\r\n            id:string,\r\n            idsubproducto: string,\r\n            idunidadmedidabase: string,\r\n            idunidadmedidadestino: string,\r\n            nombreunidadbase: string,\r\n            nombreunidaddestino: string,\r\n            factorconversion: string,\r\n            //idservicios:{idempleado:string, idservicio:string}[]\r\n          };\r\n\r\n        let allConversionUnidades:conversionunidadesapi[] = [], factorC = 0;\r\n\r\n        (async ()=>{\r\n            try {\r\n                const url = \"/admin/api/allConversionesUnidades\"; //llamado a la API REST en el controlador almacencontrolador para treaer todas las conversiones de unidades\r\n                const respuesta = await fetch(url); \r\n                allConversionUnidades = await respuesta.json(); \r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        })();\r\n\r\n        \r\n        ($('#subproducto') as any).select2({\r\n            maximumSelectionLength: 1,\r\n        });\r\n\r\n\r\n        ////// EVENTO AL SUBPRODUCTO PARA CARGAR LAS UNIDADES DE MEDIDA EQUIVALENTES ////// \r\n        $(\"#subproducto\").on('change', (e)=>{\r\n            const idsub = (e.target as HTMLOptionElement).value;\r\n            const subund = allConversionUnidades.filter(x =>x.idsubproducto == idsub);\r\n            mostrarSelectUnidades(subund);\r\n        });\r\n\r\n        /////////// CARGAR LAS UNIDADES DE MEDIDA EN EL SELECT unidadmedida  ////////////\r\n        function mostrarSelectUnidades(subund:conversionunidadesapi[]):void{\r\n            while(selectUnidadMedida?.firstChild)selectUnidadMedida.removeChild(selectUnidadMedida?.firstChild);\r\n            subund.forEach(und =>{\r\n              const option = document.createElement('option');\r\n              option.textContent = und.nombreunidaddestino;\r\n              option.value = und.id;  //und.id  =  es el id de la tabla conversionunidades\r\n              //option.dataset.idunidadmedidabase = und.idunidadmedidabase;\r\n              //option.dataset.nombreunidadbase = und.nombreunidadbase;\r\n              selectUnidadMedida.appendChild(option);\r\n            });\r\n            calcularFactor();\r\n        }\r\n\r\n        ////////// EVENTO AL SELECT DE UNIDAD DE MEDIDA ///////////\r\n        selectUnidadMedida.addEventListener('change', calcularFactor);\r\n\r\n        (document.querySelector('#cantidad') as HTMLInputElement).addEventListener('input', (e:Event)=>{\r\n            calcularFactor();\r\n        });\r\n\r\n        function calcularFactor():void{\r\n            const idConversionUnidad:string|undefined = selectUnidadMedida.options[selectUnidadMedida.selectedIndex]?.value;\r\n            const reg = allConversionUnidades.find(x=>x.id == idConversionUnidad);\r\n            factorC = Number(reg?.factorconversion);\r\n        }\r\n\r\n        //////////////  EVENTO AL INPUT RENDIMIENTO ESTANDAR /////////////////\r\n        document.querySelector('#rendimientoestandar')?.addEventListener('input', (e:Event)=>{\r\n            const inputRendimiendoEstandar = (e.target as HTMLInputElement);\r\n            (async ()=>{ \r\n                const datos = new FormData();\r\n                datos.append('id', (document.querySelector('#idproducto') as HTMLInputElement).value);\r\n                datos.append('rendimientoestandar', inputRendimiendoEstandar.value);\r\n                try {\r\n                    const url = \"/admin/api/setrendimientoestandar\";\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                        inputRendimiendoEstandar.style.color = \"#02db02\";\r\n                        inputRendimiendoEstandar.style.fontWeight = \"500\";\r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            })();\r\n        \r\n        });\r\n\r\n        ///////////////// EVENTO AL FORMULARIO ASOCIAR SUBPRODUCTO //////////////////\r\n        document.querySelector('#formAddSubproducto')?.addEventListener('submit', (e)=>{\r\n            e.preventDefault();\r\n            const subproducto = $('#subproducto').find('option:selected');\r\n            const unidadmedida:string = $('#unidadmedida').find('option:selected').text();\r\n            let AmountSubpx:number = factorC*Number(amount.value);\r\n            (async ()=>{ \r\n                const datos = new FormData();\r\n                datos.append('id_producto', (document.querySelector('#idproducto') as HTMLInputElement).value);\r\n                datos.append('id_subproducto', $('#subproducto').val()as string);\r\n                datos.append('cantidadsubproducto', AmountSubpx.toString());\r\n                datos.append('costo', (Number(subproducto.data('costo'))*AmountSubpx)+'');\r\n                try {\r\n                    const url = \"/admin/api/ensamblar\";  //asocia el producto con el sub producto en la tabla productos_sub\r\n                    const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                    const resultado = await respuesta.json();\r\n                    if(resultado.exito !== undefined){\r\n                      msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                        /////validar si es el mismo subproducto, y actualizar \r\n                        validarSubproducto($('#subproducto').val()as string, unidadmedida, subproducto.data('subproducto'));\r\n                        ////// reset form ///////\r\n                        ($('#subproducto') as any).val([]).trigger('change');\r\n                        //$(`#subproducto option[value=\"${$('#subproducto').val()}\"]`).remove();\r\n                        (document.querySelector('#formAddSubproducto') as HTMLFormElement)?.reset();\r\n                    }else{\r\n                      msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            })();//cierre de async()\r\n        });\r\n\r\n\r\n        function validarSubproducto(idsubproducto:string, unidadmedida:string, subproducto:string){\r\n            const sub = document.querySelector(`.listaSubproductos div[id=\"${idsubproducto}\"]`);\r\n            if(sub){\r\n                sub.querySelector('strong')!.textContent = amount.value+' '+unidadmedida;\r\n            }else{\r\n                listaSubproductos?.insertAdjacentHTML('beforeend', `\r\n                <div id=\"${idsubproducto}\" class=\"mb-4 flex items-center justify-between p-4 text-blue-600 bg-blue-100 rounded-lg shadow-md shadow-blue-500/30\" role=\"alert\">\r\n                    <p class=\"m-0\"><strong>${amount.value} ${unidadmedida}</strong>.  ${subproducto}</p>\r\n                    <button type=\"button\"><span id=\"${idsubproducto}\" class=\"material-symbols-outlined\">cancel</span></button>\r\n                </div>`\r\n                );\r\n            }\r\n        }\r\n\r\n\r\n        listaSubproductos?.addEventListener('click', (e:Event)=>{\r\n            const btn = (e.target as HTMLSpanElement);\r\n            if(btn.tagName == \"SPAN\")desasociarSubproducto((document.querySelector('#idproducto') as HTMLInputElement).value, btn.id);\r\n        });\r\n\r\n\r\n        function desasociarSubproducto(idproducto:string, idsubproducto:string){\r\n            const sub = document.querySelector(`.listaSubproductos div[id=\"${idsubproducto}\"]`);\r\n            (async ()=>{\r\n                try {\r\n                  const url = \"/admin/api/desasociarsubproducto?idproducto=\"+idproducto+\"&idsubproducto=\"+idsubproducto; //llamado a la API REST para desasociar subproducto del producto principal\r\n                  const respuesta = await fetch(url); \r\n                  const resultado = await respuesta.json();\r\n                  if(resultado.exito !== undefined){\r\n                    sub?.remove();\r\n                    msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                  }else{\r\n                    msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                  }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            })();\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();","(():void=>{\r\n  if(document.querySelector('.gestionproveedores')){\r\n    const crearProveedor = document.querySelector('#crearProveedor') as HTMLButtonElement;\r\n    const miDialogoProveedor = document.querySelector('#miDialogoProveedor') as any;\r\n\r\n    let indiceFila=0, control=0, tablaProveedores:HTMLElement;\r\n\r\n    type proveedoresapi = {\r\n        id:string,\r\n        nit: string,\r\n        nombre: string,\r\n        telefono: string,\r\n        email: string,\r\n        direccion: string,\r\n        pais: string,\r\n        ciudad: string,\r\n        created_at: string\r\n      };\r\n  \r\n      let proveedores:proveedoresapi[]=[], unproveedor:proveedoresapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allproveedores\"; //llamado a la API REST y se trae todos los proveedores\r\n            const respuesta = await fetch(url); \r\n            proveedores = await respuesta.json(); \r\n            console.log(proveedores);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaProveedores = ($('#tablaProveedores') as any).DataTable(configdatatables);\r\n\r\n    crearProveedor.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalProveedor')!.textContent = \"Crear proveedor\";\r\n        (document.querySelector('#btnEditarCrearProveedor') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoProveedor.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaProveedores')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarProveedor\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarProveedor\"))editarProveedor(e);\r\n      if(target?.classList.contains(\"eliminarProveedor\")||target.parentElement?.classList.contains(\"eliminarProveedor\"))eliminarProveedor(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar proveedor  //////////////////////\r\n    function editarProveedor(e:Event){\r\n      let idproveedor = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idproveedor = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalProveedor')!.textContent = \"Actualizar proveedor\";\r\n      (document.querySelector('#btnEditarCrearProveedor') as HTMLInputElement)!.value = \"Actualizar\";\r\n      \r\n      unproveedor = proveedores.find(x => x.id==idproveedor); //me trae a la proveedor seleccionada\r\n      (document.querySelector('#nit')as HTMLInputElement).value = unproveedor?.nit!;\r\n      (document.querySelector('#nombreProveedor')as HTMLInputElement).value = unproveedor?.nombre!;\r\n      \r\n      indiceFila = (tablaProveedores as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoProveedor.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar proveedor  //////////////////////\r\n    document.querySelector('#formCrearUpdateProveedor')?.addEventListener('submit', e=>{\r\n      let urlApi = \"crearProveedor\";\r\n      if(control)urlApi = \"actualizarProveedor\";\r\n\r\n        e.preventDefault();\r\n        var info = (tablaProveedores as any).page.info();\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unproveedor?.id?unproveedor?.id:'');\r\n          datos.append('nit', $('#nit').val()as string);\r\n          datos.append('nombre', $('#nombreProveedor').val()as string);\r\n          try {\r\n              const url = \"/admin/api/\"+urlApi;\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                miDialogoProveedor.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                if(!control){ //si es crear registro\r\n                  /// actualizar el arregle de los proveedores ///\r\n                  proveedores = [...proveedores, resultado.proveedor];\r\n                  (tablaProveedores as any).row.add([\r\n                      (tablaProveedores as any).rows().count() + 1,\r\n                      resultado.proveedor.nit,\r\n                      resultado.proveedor.nombre,\r\n                      resultado.proveedor.created_at,\r\n                      `<div class=\"acciones-btns\" id=\"${resultado.proveedor.id}\" data-proveedor=\"${resultado.proveedor.nombre}\">\r\n                          <button class=\"btn-md btn-turquoise editarProveedor\"><i class=\"fa-solid fa-pen-to-square\"></i></button>\r\n                          <button class=\"btn-md btn-red eliminarProveedor\"><i class=\"fa-solid fa-trash-can\"></i></button>\r\n                      </div>`\r\n                  ]).draw(false); // draw(false) evita recargar toda la tabla\r\n                }else{ //si es actualizar\r\n                  /// actualizar el arregle de proveedores ///\r\n                  proveedores.forEach(a=>{if(a.id == unproveedor?.id)a = Object.assign(a, resultado.proveedor[0]);});\r\n                  const datosActuales = (tablaProveedores as any).row(indiceFila+=info.start).data();\r\n                  /*NIT*/       datosActuales[1] = resultado.proveedor[0].nit;\r\n                  /*PROVEEDOR*/ datosActuales[2] = resultado.proveedor[0].nombre;\r\n                  (tablaProveedores as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaProveedores as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar proveedor  //////////////////////\r\n    function eliminarProveedor(e:Event){\r\n      let idproveedor = (e.target as HTMLElement).parentElement!.id, info = (tablaProveedores as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idproveedor = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaProveedores as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar el proveedor?',\r\n          text: \"el proveedor sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idproveedor);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarProveedor\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaProveedores as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaProveedores as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoProveedor || (event.target as HTMLInputElement).value === 'Salir') {\r\n          miDialogoProveedor.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateProveedor') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","(()=>{\r\n  if(document.querySelector('.productos')){\r\n    const crearProducto = document.querySelector('#crearProducto');\r\n    const miDialogoProducto = document.querySelector('#miDialogoProducto') as any;\r\n    const inputupImage = document.querySelector('#upImage') as HTMLInputElement;  //input para cargar el archivo imagen\r\n    const btncustomUpImage = document.querySelector('#customUpImage');\r\n    const imginputfile = document.querySelector('#imginputfile') as HTMLImageElement;  //img\r\n    const tipoproducto = document.querySelector('#tipoproducto') as HTMLSelectElement;\r\n    let indiceFila=0, control=0, tablaProductos:HTMLElement;\r\n    \r\n\r\n    type productsapi = {\r\n      id:string,\r\n      idcategoria: string,\r\n      idunidadmedida: string,\r\n      nombre: string,\r\n      foto: string,\r\n      impuesto: string,\r\n      marca: string,\r\n      tipoproducto: string,\r\n      tipoproduccion: string,\r\n      sku: string,\r\n      unidadmedida: string;\r\n      descripcion: string,\r\n      peso: string,\r\n      medidas: string,\r\n      color: string,\r\n      funcion: string,\r\n      uso:string,\r\n      fabricante: string,\r\n      garantia: string,\r\n      stock: string,\r\n      stockminimo: string,\r\n      categoria: string,\r\n      precio_compra: string,\r\n      precio_venta: string,\r\n      fecha_ingreso: string,\r\n      //idservicios:{idempleado:string, idservicio:string}[]\r\n    };\r\n\r\n    let products:productsapi[]=[], unproducto:productsapi;\r\n\r\n    (async ()=>{\r\n      try {\r\n          const url = \"/admin/api/allproducts\"; //llamado a la API REST y se trae todos los productos\r\n          const respuesta = await fetch(url); \r\n          products = await respuesta.json(); \r\n          console.log(products);\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n    })();\r\n\r\n    const divAlert = document.querySelector('.divmsjalerta0') as HTMLElement;\r\n    if(divAlert)borrarMsjAlert(divAlert);\r\n\r\n    ///////// Habilita el select precio de compra, y deshabilita el select de tipo de produccion si es producto simple, si es compuesto lo deshabilita y habilita el select de tipo de produccion\r\n    tipoproducto?.addEventListener('change', (e:Event)=>{\r\n      const targetDom = e.target as HTMLSelectElement;\r\n      const preciocompra = document.querySelector('.preciocompra') as HTMLElement;\r\n      const stock = document.querySelector('.stock') as HTMLElement;\r\n      const habtipoproduccion = document.querySelector('.habtipoproduccion') as HTMLElement;\r\n      if(targetDom.value == '0'){  //  0 = simple\r\n        stock.style.display = 'flex';\r\n        preciocompra.style.display = 'flex';\r\n        habtipoproduccion.style.display = \"none\";\r\n        document.querySelector('#preciocompra')?.setAttribute(\"required\", \"\");\r\n        document.querySelector('#tipoproduccion')?.removeAttribute(\"required\");\r\n      }\r\n      else{\r\n        stock.style.display = 'none';\r\n        preciocompra.style.display = 'none';\r\n        habtipoproduccion.style.display = \"flex\";\r\n        document.querySelector('#preciocompra')?.removeAttribute(\"required\");\r\n        document.querySelector('#tipoproduccion')?.setAttribute(\"required\", \"\");\r\n      }\r\n    });\r\n\r\n    //////////////////  TABLA //////////////////////\r\n    tablaProductos = ($('#tablaProductos') as any).DataTable(configdatatables);\r\n\r\n    //btn para crear producto\r\n    crearProducto?.addEventListener('click', (e):void=>{\r\n      control = 0;\r\n      limpiarformdialog();\r\n      document.querySelector('#modalProducto')!.textContent = \"Crear producto\";\r\n      (document.querySelector('#btnEditarCrearProducto') as HTMLInputElement).value = \"Crear\";\r\n      (document.querySelector('.stock')as HTMLInputElement).style.display = \"block\";\r\n      (document.querySelector('.preciocompra')as HTMLInputElement).style.display = \"block\";\r\n      miDialogoProducto.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    //evento a la tabla\r\n    document.querySelector('#tablaProductos')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarProductos\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarProductos\"))editarProductos(e);\r\n      if(target?.classList.contains(\"bloquearProductos\")||target.parentElement?.classList.contains(\"bloquearProductos\"))bloquearProductos(e);\r\n      if(target?.classList.contains(\"eliminarProductos\")||target.parentElement?.classList.contains(\"eliminarProductos\"))eliminarProductos(e);\r\n    });\r\n\r\n    function editarProductos(e:Event){\r\n      let idproducto = (e.target as HTMLElement).parentElement?.id!;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idproducto = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n      control = 1;\r\n      document.querySelector('#modalProducto')!.textContent = \"Actualizar producto\";\r\n      (document.querySelector('#btnEditarCrearProducto') as HTMLInputElement)!.value = \"Actualizar\";\r\n      unproducto = products.find(x=>x.id === idproducto)!; //obtengo el producto.\r\n      $('#categoria').val(unproducto?.idcategoria??'');\r\n      (document.querySelector('#nombre')as HTMLInputElement).value = unproducto?.nombre!;\r\n      $('#tipoproducto').val(unproducto?.tipoproducto??'0');  //0 = simple,  1 = compuesto\r\n      $('#idunidadmedida').val(unproducto?.idunidadmedida??'1');\r\n      (document.querySelector('.stock')as HTMLInputElement).style.display = \"block\";\r\n      (document.querySelector('.preciocompra')as HTMLInputElement).style.display = \"block\";\r\n      (document.querySelector('.habtipoproduccion') as HTMLElement).style.display = \"none\";\r\n      if(unproducto?.tipoproducto == '1'){\r\n        (document.querySelector('.stock')as HTMLInputElement).style.display = \"none\";\r\n        (document.querySelector('.preciocompra')as HTMLInputElement).style.display = \"none\";\r\n        (document.querySelector('.habtipoproduccion') as HTMLElement).style.display = \"block\";\r\n        $('#tipoproduccion').val(unproducto.tipoproduccion);\r\n      }\r\n      (document.querySelector('#stock')as HTMLInputElement).value = unproducto?.stock??'';\r\n      (document.querySelector('#preciocompra')as HTMLInputElement).value = unproducto?.precio_compra??'';\r\n      (document.querySelector('#precioventa')as HTMLInputElement).value = unproducto?.precio_venta??'';\r\n      (document.querySelector('#sku')as HTMLInputElement).value = unproducto?.sku??'';\r\n      (document.querySelector('#impuesto')as HTMLInputElement).value = unproducto?.impuesto??'';\r\n      (document.querySelector('#stockminimo')as HTMLInputElement).value = unproducto?.stockminimo??'';\r\n      imginputfile.src = \"/build/img/\"+unproducto?.foto;\r\n      indiceFila = (tablaProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoProducto.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar producto  //////////////////////\r\n    document.querySelector('#formCrearUpdateProducto')?.addEventListener('submit', e=>{\r\n      if(control){\r\n        e.preventDefault();\r\n        var imgFile:(string|File), info = (tablaProductos as any).page.info();\r\n        imgFile=unproducto.foto;\r\n        if(!imginputfile.src.includes(unproducto.foto)){ //se lee la etiqueta img para cambio de imagen\r\n          imgFile = ((e.target as HTMLFormElement).elements.namedItem(\"upImage\") as HTMLInputElement).files?.[0]!; //obtengo el archivo\r\n          if(imgFile){\r\n            if(imgFile.type!==\"image/png\"&&imgFile.type!==\"image/jpeg\"){\r\n              msjAlert('error', 'No es un formato valido para la foto', (document.querySelector('#divmsjalerta1') as HTMLElement));\r\n              return;\r\n            }\r\n            if(imgFile.size>550000){ //si es mayor a 550KB\r\n              msjAlert('error', 'La imagen no debe superar los 500KB', document.querySelector('#divmsjalerta1')!);\r\n              return;\r\n            }\r\n          }\r\n        }\r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unproducto!.id);\r\n          datos.append('idcategoria', $('#categoria').val()as string);\r\n          datos.append('nombre', $('#nombre').val()as string);\r\n          datos.append('foto', imgFile); //en el backend no se lee con $_POST, se lee con $_FILES\r\n          datos.append('tipoproducto', $('#tipoproducto').val()as string);  //0=simple o 1=compuesto\r\n          datos.append('idunidadmedida', $('#idunidadmedida').val()as string);\r\n          datos.append('unidadmedida', $('#idunidadmedida option:selected').text());\r\n          datos.append('stock', $('#stock').val()as string);\r\n          datos.append('precio_compra', $('#preciocompra').val()as string);\r\n          datos.append('precio_venta', $('#precioventa').val()as string);\r\n          datos.append('sku', $('#sku').val()as string);\r\n          datos.append('tipoproduccion', ($('#tipoproduccion').val()as string)==null?'0':($('#tipoproduccion').val()as string));\r\n          datos.append('impuesto', $('#impuesto').val()as string);\r\n          datos.append('stockminimo', $('#stockminimo').val()as string);\r\n          try {\r\n              const url = \"/admin/api/actualizarproducto\";\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json(); \r\n              console.log(resultado); \r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                /// actualizar el arregle del producto ///\r\n                products.forEach(a=>{if(a.id == unproducto.id)a = Object.assign(a, resultado.producto[0]);});\r\n                ///////// cambiar la fila completa, su contenido //////////\r\n                const datosActuales = (tablaProductos as any).row(indiceFila).data();\r\n                /*img*/datosActuales[1] = `<div class=\"text-center\"><img class=\"inline\" style=\"width: 50px;\" src=\"/build/img/${resultado.producto[0].foto}\" alt=\"\"></div>`;\r\n                /*NOMBRE*/datosActuales[2] ='<div class=\"w-80 whitespace-normal\">'+$('#nombre').val()+'</div>';\r\n                /*CATEGORIA*/datosActuales[3] = $('#categoria option:selected').text();\r\n                /*MARCA*/datosActuales[4] = '';\r\n                /*CODIGO*/datosActuales[5] = $('#sku').val();\r\n                /*PRECIOVENTA*/datosActuales[6] = $('#precioventa').val();\r\n                \r\n                (tablaProductos as any).row(indiceFila).data(datosActuales).draw();\r\n                (tablaProductos as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n              miDialogoProducto.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n      } //fin if(control)\r\n    });\r\n\r\n\r\n    function bloquearProductos(e:Event){\r\n      let reg = (e.target as HTMLElement).parentElement, info = (tablaProductos as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'SPAN')reg = (e.target as HTMLElement).parentElement!.parentElement;\r\n      indiceFila = (tablaProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      (async ()=>{\r\n\r\n          const datos = new FormData();\r\n          datos.append('id', reg!.id);\r\n          try {\r\n              const url = \"/admin/api/cambiarestadoproducto\";\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                \r\n                const s1 = `<div class=\"acciones-btns my-[0.7rem]\" id=\"${reg!.id}\">\r\n                              ${resultado.tipoproducto[0] == 1?`<a class=\"btn-xs btn-blue\" title=\"Agregar Materia Prima\" href=\"/admin/almacen/componer?id=${reg!.id}\"><i class=\"fa-solid fa-subscript text-[17px] leading-none\"></i></a>`:''}\r\n                              <button class=\"btn-xs btn-lima\" title=\"Más opciones\"><i class=\"fa-solid fa-circle-plus text-[17px] leading-none\"></i></button>\r\n                              <button class=\"btn-xs btn-turquoise editarProductos\" title=\"Actualizar Producto\"><i class=\"fa-solid fa-pen-to-square text-[17px] leading-none\"></i></button>\r\n                              <button class=\"btn-xs ${resultado.estado[0]==1?'btn-light':'btn-orange'} bloquearProductos\" title=\"Bloquear Producto\"><span class=\"material-symbols-outlined text-[18px] leading-none\">hide_source</span></button>\r\n                              <button class=\"btn-xs btn-red eliminarProductos\" title=\"Eliminar Producto\"><i class=\"fa-solid fa-trash-can text-[17px] leading-none\"></i></button>\r\n                            </div>`;\r\n                            \r\n                (tablaProductos as any).cell((tablaProductos as any).row(indiceFila+=info.start), 7).data(s1).draw(); //se modifica solo la columna con la fila correspondiente, y destruye la que habai antes\r\n                (tablaProductos as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              }else{\r\n                  Swal.fire(resultado.error[0], '', 'error')\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n      })();//cierre de async()\r\n    }\r\n\r\n    function eliminarProductos(e:Event){\r\n      let idproducto = (e.target as HTMLElement).parentElement!.id, info = (tablaProductos as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idproducto = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar el prducto?',\r\n          text: \"El prducto sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idproducto);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarProducto\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaProductos as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaProductos as any).page(info.page).draw('page');\r\n                        Swal.fire(resultado.exito[0], '', 'success') \r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    //////////////////// Cargar imagen como preview  //////////////////////\r\n    btncustomUpImage?.addEventListener('click', ()=>inputupImage?.click());\r\n    inputupImage?.addEventListener('change', function(){\r\n      const file = this.files?.[0];\r\n      if(file){\r\n        const reader = new FileReader();\r\n        reader.onload = function(){\r\n          const resrult = reader.result;\r\n          if(typeof resrult == \"string\")imginputfile.src = resrult;\r\n        } \r\n        reader.readAsDataURL(file);\r\n      }\r\n    });\r\n\r\n    function limpiarformdialog():void{\r\n      (document.querySelector('#formCrearUpdateProducto') as HTMLFormElement)?.reset();\r\n      imginputfile.src = '';\r\n    }\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoProducto || (event.target as HTMLInputElement).value === 'salir') {\r\n        miDialogoProducto.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n  }\r\n\r\n})();","(()=>{\r\n    if(document.querySelector('.subproductos')){\r\n      const crearSubProducto = document.querySelector('#crearSubProducto');\r\n      const miDialogoSubProducto = document.querySelector('#miDialogoSubProducto') as any;\r\n      let indiceFila=0, control=0, tablaSubProductos:HTMLElement;\r\n      \r\n      type subproductsapi = {\r\n        id:string,\r\n        id_unidadmedida: string,\r\n        unidadmedida: string,\r\n        nombre: string,\r\n        sku: string,\r\n        proveedor: string,\r\n        descripcion: string,\r\n        medidas: string,\r\n        color: string,\r\n        uso:string,\r\n        stock: string,\r\n        stockminimo: string,\r\n        precio_compra: string,\r\n        fecha_ingreso: string,\r\n      };\r\n  \r\n      let subproducts:subproductsapi[]=[], unsubproducto:subproductsapi;\r\n  \r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allsubproducts\"; //llamado a la API REST\r\n            const respuesta = await fetch(url); \r\n            subproducts = await respuesta.json(); \r\n            console.log(subproducts);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n  \r\n      //////////////////  TABLA //////////////////////\r\n      tablaSubProductos = ($('#tablaSubProductos') as any).DataTable(configdatatables);\r\n  \r\n      crearSubProducto?.addEventListener('click', (e):void=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalSubProducto')!.textContent = \"Crear sub producto\";\r\n        (document.querySelector('#btnEditarCrearSubProducto') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoSubProducto.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n  \r\n      ///////////// EVENTOS A LA TABLA SUBPRODUCTOS /////////////\r\n      document.querySelector('#tablaSubProductos')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n        const target = e.target as HTMLElement;\r\n        if(target?.classList.contains(\"editarSubProductos\")||target.parentElement?.classList.contains(\"editarSubProductos\"))editarSubProductos(e);\r\n        if(target?.classList.contains(\"eliminarSubProductos\")||target.parentElement?.classList.contains(\"eliminarSubProductos\"))eliminarSubProductos(e);\r\n      });\r\n  \r\n      function editarSubProductos(e:Event){\r\n        let idsubproducto = (e.target as HTMLElement).parentElement?.id!;\r\n        if((e.target as HTMLElement)?.tagName === 'I')idsubproducto = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n        control = 1;\r\n        document.querySelector('#modalSubProducto')!.textContent = \"Actualizar producto\";\r\n        (document.querySelector('#btnEditarCrearSubProducto') as HTMLInputElement)!.value = \"Actualizar\";\r\n        unsubproducto = subproducts.find(x=>x.id === idsubproducto)!;\r\n        $('#unidadmedida').val(unsubproducto?.id_unidadmedida??'');\r\n        (document.querySelector('#nombre')as HTMLInputElement).value = unsubproducto?.nombre!;\r\n        (document.querySelector('#sku')as HTMLInputElement).value = unsubproducto?.sku!;\r\n        (document.querySelector('#preciocompra')as HTMLInputElement).value = unsubproducto?.precio_compra??'';\r\n        (document.querySelector('#stockminimo')as HTMLInputElement).value = unsubproducto?.stockminimo??'';\r\n        \r\n        indiceFila = (tablaSubProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n        miDialogoSubProducto.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n  \r\n      ////////////////////  Actualizar/Editar producto  //////////////////////\r\n      document.querySelector('#formCrearUpdateSubProducto')?.addEventListener('submit', e=>{\r\n        if(control){\r\n          e.preventDefault();\r\n          var info = (tablaSubProductos as any).page.info();\r\n          \r\n          (async ()=>{ \r\n            const datos = new FormData();\r\n            datos.append('id', unsubproducto!.id);\r\n            datos.append('id_unidadmedida', $('#unidadmedida').val()as string);\r\n            datos.append('unidadmedida', $('#unidadmedida').find('option:selected').text());\r\n            datos.append('nombre', $('#nombre').val()as string);\r\n            datos.append('sku', $('#sku').val()as string);\r\n            datos.append('precio_compra', $('#preciocompra').val()as string);\r\n             datos.append('stockminimo', $('#stockminimo').val()as string);\r\n            try {\r\n                const url = \"/admin/api/actualizarsubproducto\";\r\n                const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                const resultado = await respuesta.json(); \r\n                console.log(resultado); \r\n                if(resultado.exito !== undefined){\r\n                  msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                  /// actualizar el arregle del subproducto ///\r\n                  subproducts.forEach(a=>{if(a.id == unsubproducto.id)a = Object.assign(a, resultado.subproducto[0]);});\r\n                  ///////// cambiar la fila completa, su contenido //////////\r\n                  const datosActuales = (tablaSubProductos as any).row(indiceFila+=info.start).data();\r\n                  /*NOMBRE*/datosActuales[1] ='<div class=\"w-80 whitespace-normal\">'+$('#nombre').val()+'</div>';\r\n                  /*proveedor*/datosActuales[2] = '';\r\n                  /*SKU*/datosActuales[3] = $('#sku').val();\r\n                  /*UNIDADMEDIDA*/datosActuales[4] = $('#unidadmedida option:selected').text();\r\n                  /*PRECIOCOMPRA*/datosActuales[5] = '$'+Number($('#preciocompra').val())?.toLocaleString();\r\n                  (tablaSubProductos as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaSubProductos as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }else{\r\n                  msjalertToast('error', '¡Error!', resultado.error[0]);\r\n                }\r\n                document.addEventListener(\"click\", cerrarDialogoExterno);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n          })();//cierre de async()\r\n        } //fin if(control)\r\n      });\r\n  \r\n      function eliminarSubProductos(e:Event){\r\n        let idsubproducto = (e.target as HTMLElement).parentElement!.id, info = (tablaSubProductos as any).page.info();\r\n        if((e.target as HTMLElement).tagName === 'I')idsubproducto = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n        indiceFila = (tablaSubProductos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n        Swal.fire({\r\n            customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n            icon: 'question',\r\n            title: 'Desea eliminar el sub prducto?',\r\n            text: \"El sub prducto sera eliminado definitivamente.\",\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Si',\r\n            cancelButtonText: 'No',\r\n        }).then((result:any) => {\r\n            if (result.isConfirmed) {\r\n                (async ()=>{ \r\n                    const datos = new FormData();\r\n                    datos.append('id', idsubproducto);\r\n                    try {\r\n                        const url = \"/admin/api/eliminarSubProducto\";\r\n                        const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                        const resultado = await respuesta.json();  \r\n                        if(resultado.exito !== undefined){\r\n                          (tablaSubProductos as any).row(indiceFila+info.start).remove().draw(); \r\n                          (tablaSubProductos as any).page(info.page).draw('page');\r\n                          Swal.fire(resultado.exito[0], '', 'success') \r\n                        }else{\r\n                            Swal.fire(resultado.error[0], '', 'error')\r\n                        }\r\n                    } catch (error) {\r\n                        console.log(error);\r\n                    }\r\n                })();//cierre de async()\r\n            }\r\n        });\r\n      }\r\n\r\n  \r\n      function limpiarformdialog(){\r\n        (document.querySelector('#formCrearUpdateSubProducto') as HTMLFormElement)?.reset();\r\n        (document.querySelector('#formCrearUpdateSubProducto') as HTMLFormElement).action = \"/admin/almacen/crear_subproducto\";\r\n      }\r\n      function cerrarDialogoExterno(event:Event) {\r\n        if (event.target === miDialogoSubProducto || (event.target as HTMLInputElement).value === 'salir' || (event.target as HTMLInputElement).value === 'Actualizar') {\r\n            miDialogoSubProducto.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n    }\r\n  \r\n  })();","(()=>{\r\n\r\n    if(document.querySelector('.unidadesmedida')){\r\n        const btnCrearUnidadMedida = document.querySelector('#btnCrearUnidadMedida');\r\n        const miDialogoUnidadMedida = document.querySelector('#miDialogoUnidadMedida') as any;\r\n        let tablaUnidadesMedida:HTMLElement;\r\n\r\n        tablaUnidadesMedida = ($('#tablaUnidadesMedida') as any).DataTable(configdatatables);\r\n\r\n        ///////////////BTN PARA CREAR UNIDAD DE MEDIDA////////////////\r\n        btnCrearUnidadMedida?.addEventListener('click', (e):void=>{\r\n            limpiarformdialog();\r\n            document.querySelector('#modalUnidadMedida')!.textContent = \"Crear unidad de medida\";\r\n            (document.querySelector('#btnEditarCrearUnidadMedida') as HTMLInputElement).value = \"Crear\";\r\n            miDialogoUnidadMedida.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        });\r\n\r\n        document.querySelector('#tablaUnidadesMedida')?.addEventListener('click', (e:Event)=>{\r\n            var btn = e.target as HTMLElement;\r\n            if(btn?.classList.contains('editarUnidadMedida')||btn.parentElement?.classList.contains(\"editarUnidadMedida\"))editarUnidadMedida(e);\r\n            if(btn?.classList.contains('eliminarUnidadMedida')||btn.parentElement?.classList.contains(\"eliminarUnidadMedida\"))eliminarUnidadMedida(e);   \r\n        });\r\n\r\n\r\n        ///////////////EDITAR UNIDAD DE MEDIDA////////////////\r\n        function editarUnidadMedida(e:Event){\r\n            let idunidadmedida = (e.target as HTMLElement).parentElement?.id!;\r\n            if((e.target as HTMLElement)?.tagName === 'I')idunidadmedida = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n            (document.querySelector('#formCrearUpdateUnidad') as HTMLFormElement).action = \"/admin/almacen/editarunidademedida\";\r\n            document.querySelector('#modalUnidadMedida')!.textContent = \"Actualizar unidad de medida\";\r\n            (document.querySelector('#btnEditarCrearUnidadMedida') as HTMLInputElement)!.value = \"Actualizar\";\r\n            (document.querySelector('#idunidadmedida') as HTMLInputElement).value = idunidadmedida;\r\n            (document.querySelector('#unidad') as HTMLInputElement).value = ((e.target as HTMLElement).closest('.acciones-btns') as HTMLElement)?.dataset.unidadmedida!; \r\n            miDialogoUnidadMedida.showModal();\r\n            document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n\r\n\r\n        function eliminarUnidadMedida(e:Event):void{\r\n            let form = (e.target as HTMLElement).parentElement!;\r\n            if((e.target as HTMLElement).tagName === 'I')form = form.parentElement!;\r\n            Swal.fire({\r\n                customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n                icon: 'question',\r\n                title: 'Desea eliminar la unidad de medida?',\r\n                text: \"La unidad de medida sera eliminado definitivamente.\",\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Si',\r\n                cancelButtonText: 'No',\r\n            }).then((result:any) => {\r\n                if (result.isConfirmed)(form as HTMLFormElement).submit();\r\n            });\r\n        }\r\n\r\n        /*document.querySelector('.eliminarUnidadMedida')?.addEventListener('submit', (e:Event)=>{\r\n            console.log(55);\r\n            e.preventDefault();\r\n        });*/\r\n\r\n        /*function eliminarUnidadMedida(e:Event):void{\r\n            let idunidadmedida = (e.target as HTMLElement).parentElement?.id!;\r\n            if((e.target as HTMLElement)?.tagName === 'I')idunidadmedida = (e.target as HTMLElement).parentElement?.parentElement?.id!;\r\n            console.log(idunidadmedida);\r\n            Swal.fire({\r\n                customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n                icon: 'question',\r\n                title: 'Desea eliminar la unidad de medida?',\r\n                text: \"La unidad de medida sera eliminado definitivamente.\",\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Si',\r\n                cancelButtonText: 'No',\r\n            }).then((result:any) => {\r\n                if (result.isConfirmed) {*/\r\n                    /*(async ()=>{ \r\n                        const datos = new FormData();\r\n                        datos.append('id', idproducto);\r\n                        try {\r\n                            const url = \"/admin/api/eliminarProducto\";\r\n                            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                            const resultado = await respuesta.json();  \r\n                            if(resultado.exito !== undefined){\r\n                              (tablaProductos as any).row(indiceFila+info.start).remove().draw(); \r\n                              (tablaProductos as any).page(info.page).draw('page');\r\n                              Swal.fire(resultado.exito[0], '', 'success') \r\n                            }else{\r\n                                Swal.fire(resultado.error[0], '', 'error')\r\n                            }\r\n                        } catch (error) {\r\n                            console.log(error);\r\n                        }\r\n                    })();*///cierre de async()\r\n                /*}\r\n            });\r\n        }*/\r\n        \r\n        function limpiarformdialog(){\r\n            (document.querySelector('#formCrearUpdateUnidad') as HTMLFormElement)?.reset();\r\n            (document.querySelector('#formCrearUpdateUnidad') as HTMLFormElement).action = \"/admin/almacen/crear_unidadmedida\";\r\n        }\r\n\r\n        function cerrarDialogoExterno(event:Event) {\r\n            const f = event.target;\r\n        if (f === miDialogoUnidadMedida || (f as HTMLInputElement).value === 'Salir' || (f as HTMLInputElement).value === 'Actualizar') {\r\n            miDialogoUnidadMedida.close();\r\n            document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n        }\r\n    }\r\n\r\n})();","(():void=>{\r\n  if(document.querySelector('.caja')){\r\n    const modalGastosIngresos:any = document.querySelector(\"#gastosIngresos\");\r\n    const modalcambioMedioPago:any = document.querySelector(\"#cambioMedioPago\");\r\n    const btnGastosingresos = document.querySelector<HTMLButtonElement>(\"#btnGastosingresos\");\r\n    const operacion = document.querySelector('#operacion') as HTMLSelectElement;\r\n    const origengasto = document.querySelectorAll<HTMLInputElement>('input[name=\"origengasto\"]');\r\n    const mediosPago = document.querySelectorAll<HTMLInputElement>('.mediopago'); //todos los medios de pago del modal\r\n    const totalPagado = document.querySelector('#totalPagado') as HTMLSpanElement;\r\n    const numfactura = document.querySelector('#numfactura') as HTMLLabelElement;\r\n\r\n    let tablaListaPedidos:HTMLElement;\r\n    let estadofactura:string, contentMP:HTMLElement, idfactura:string = '0';\r\n    let mediospagoDB:{id:string, idmediopago:string, id_factura:string, valor:string}[];\r\n    let nuevosMediosPago:{idmediopago:string, valor: string}[]=[];  // guardar los medios de pago a enviar a backend\r\n    const setMediosPagoDB = new Set();\r\n    const mapMediospago = new Map();\r\n\r\n    tablaListaPedidos = ($('#tablaListaPedidos') as any).DataTable(configdatatablescaja);\r\n\r\n    //////// clic al btn gastos/ingresos\r\n    btnGastosingresos?.addEventListener('click', ():void=>{\r\n      modalGastosIngresos.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    ///////// cambio de tipo de operacion si ingreso o gasto, si es gasto habilita el select de los tipos de gastos\r\n    operacion?.addEventListener('change', (e:Event)=>{\r\n      const targetDom = e.target as HTMLSelectElement;\r\n      const tipodegasto = document.querySelector('.tipodegasto') as HTMLElement;\r\n\r\n      if(targetDom.value == 'gasto'){\r\n        tipodegasto.style.display = 'flex';\r\n        document.querySelector('#tipodegasto')?.setAttribute(\"required\", \"\"); //categoria de los gastos\r\n        document.querySelector('#origengasto')?.classList.remove('hidden');  //origen del gasto ya sea por caja o banco\r\n        document.querySelector('#origengasto')?.classList.add('flex');\r\n        showCajasBancos();\r\n      }\r\n      else{ // ingreso a caja\r\n        tipodegasto.style.display = 'none';\r\n        document.querySelector('#tipodegasto')?.removeAttribute(\"required\");\r\n        document.querySelector('#origengasto')?.classList.add('hidden');\r\n        document.querySelector('#origengasto')?.classList.remove('flex');\r\n         document.querySelector('#showcajas')?.classList.remove('hidden'); //mostar caja\r\n        document.querySelector('#showbancos')?.classList.add('hidden'); //oculta banco\r\n      }\r\n    });\r\n\r\n    /// evento a los inputs type radio para elegir origne del gasto = caja o bancos\r\n    origengasto.forEach(element =>element.addEventListener('click', showCajasBancos));\r\n\r\n\r\n    function showCajasBancos(){\r\n      const selectorigen = document.querySelector('input[name=\"origengasto\"]:checked');\r\n      if(selectorigen?.id == 'gastocaja'){\r\n        document.querySelector('#showcajas')?.classList.remove('hidden');\r\n        document.querySelector('#showcajas')?.setAttribute(\"required\", \"\");\r\n        document.querySelector('#showbancos')?.classList.add('hidden');\r\n        document.querySelector('#showbancos')?.removeAttribute(\"required\");\r\n      }else{\r\n        //document.querySelector('#showcajas')?.classList.add('hidden');\r\n        //document.querySelector('#showcajas')?.removeAttribute(\"required\");\r\n        document.querySelector('#showbancos')?.classList.remove('hidden');\r\n        document.querySelector('#showbancos')?.setAttribute(\"required\", \"\");\r\n      }\r\n    }\r\n\r\n    ////////////// Evento a la tabla lista de pedidos ///////////////\r\n    document.querySelector('#tablaListaPedidos')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if(target?.classList.contains(\"mediosdepago\")||target.parentElement?.classList.contains(\"mediosdepago\"))cambiomediopago(target);\r\n      if(target?.classList.contains(\"printPOS\")||target.parentElement?.classList.contains(\"printPOS\"))printPOS(target);\r\n      if(target?.classList.contains(\"printPDF\")||target.parentElement?.classList.contains(\"printPDF\"))printPDF(target);\r\n    });\r\n\r\n\r\n    //////////// Modal para el cambio de medio de pago ////////////\r\n    function cambiomediopago(target:HTMLElement){\r\n      idfactura = target.id;\r\n      contentMP = target;\r\n      estadofactura = target.dataset.estado??'';\r\n      totalPagado.textContent = Number(target.dataset.totalpagado??'0').toLocaleString();\r\n      if(target.tagName == \"BUTTON\"){\r\n        idfactura = target.parentElement!.id;\r\n        contentMP = target.parentElement!;\r\n        estadofactura = target.parentElement?.dataset.estado??'';\r\n        totalPagado.textContent = Number(target.parentElement!.dataset.totalpagado??'0').toLocaleString();\r\n      }\r\n      facturamediospago();     //muestra los valores de los medios de pago de cada factura\r\n      if(estadofactura == \"Eliminada\")document.querySelector('#btnEnviarCambioMedioPago')?.classList.add('!hidden');\r\n      if(estadofactura == \"Paga\")document.querySelector('#btnEnviarCambioMedioPago')?.classList.remove('!hidden');\r\n      modalcambioMedioPago.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    function facturamediospago(){  //muestra los valores de los medios de pago de cada factura\r\n      numfactura.textContent = 'Factura N° : '+idfactura;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/mediospagoXfactura?id=\"+idfactura; //llamado a la API REST y se trae los medios de pago segun factura\r\n          const respuesta = await fetch(url); \r\n          mediospagoDB = await respuesta.json(); \r\n          console.log(mediospagoDB);\r\n          //const setMediosPagoDB = new Set(mediospagoDB.map(x=>x.idmediopago));\r\n          //console.log(setMediosPagoDB);\r\n          mediospagoDB.forEach(x => setMediosPagoDB.add(x.idmediopago));//se llena el set con los medios de pago de la DB\r\n          mediosPago.forEach(mediopago =>{  //se llena los inputs medios de pago con los medios de pago de la DB\r\n            mediopago.value = '0';\r\n            for(let i=0; i<mediospagoDB.length; i++)\r\n              if(mediopago.id == mediospagoDB[i].idmediopago){\r\n                mediopago.value =  Number(mediospagoDB[i].valor).toLocaleString();\r\n                mapMediospago.set(mediopago.id, Number(mediospagoDB[i].valor));\r\n                break;\r\n              }\r\n          });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    }\r\n\r\n    mediosPago.forEach(mp =>{\r\n      mp.addEventListener('input', (e)=>{\r\n        let totalmediospago = 0;\r\n        mediosPago.forEach((item, index)=>{ //sumar todos los medios de pago\r\n          totalmediospago += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n        });\r\n\r\n        if(totalmediospago<=parseInt(totalPagado.textContent!.replace(/[,.]/g, ''))){\r\n          mapMediospago.set((e.target as HTMLInputElement).id, parseInt((e.target as HTMLInputElement).value.replace(/[,.]/g, '')));\r\n          document.querySelector('#diferencia')!.textContent = (parseInt(totalPagado.textContent!.replace(/[,.]/g, ''))-totalmediospago).toLocaleString();\r\n        }else{\r\n          if(mapMediospago.has((e.target as HTMLInputElement).id)){\r\n            (e.target as HTMLInputElement).value = mapMediospago.get((e.target as HTMLInputElement).id).toLocaleString();\r\n          }else{ (e.target as HTMLInputElement).value = '0'; }\r\n        }\r\n      });\r\n    });\r\n\r\n\r\n    function printPOS(target: HTMLElement){\r\n      let idfactura = target.parentElement!.id;\r\n      if(target.tagName === 'I')idfactura = target.parentElement!.parentElement!.id;\r\n      window.open(\"/admin/printPDFPOS?id=\" + idfactura, \"_blank\");  //controlador printcontrolador\r\n    }\r\n\r\n    function printPDF(target: HTMLElement){\r\n      let idfactura = target.parentElement!.id;\r\n      let cotizacion:string = target.parentElement?.dataset.cotizacion!;\r\n      let urlprintPDF:string = \"/printfacturacarta?id=\";\r\n      if(target.tagName === 'I'){\r\n        idfactura = target.parentElement!.parentElement!.id;\r\n        cotizacion = target.parentElement!.parentElement?.dataset.cotizacion!;\r\n      }\r\n      if(cotizacion === '1')urlprintPDF = \"/printcotizacion?id=\";\r\n      const ventana = window.open(urlprintPDF + idfactura, \"_blank\");  //cajacontrolador\r\n      if(ventana){\r\n        ventana.onload = ()=>{\r\n          ventana?.focus();\r\n          ventana?.print();\r\n          setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n        };\r\n      }\r\n    }\r\n\r\n    ////////////////// evento al bton pagar del modal facturar //////////////////////\r\n    document.querySelector('#formCambioMedioPago')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      let totalotrosmedios = 0;\r\n      nuevosMediosPago.length = 0;\r\n      mediosPago.forEach((item, index)=>{ \r\n        totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, '')); //sumar todos los medios de pago de los inputs\r\n        if(item.value != '0')\r\n          nuevosMediosPago = [...nuevosMediosPago, {idmediopago: item.id, valor: item.value.replace(/[,.]/g, '')}];  //obtengo los nuevos medios de pago difente a cero\r\n      });\r\n\r\n      if(totalotrosmedios != parseInt(totalPagado.textContent!.replace(/[,.]/g, ''))){\r\n        msjAlert('error', 'Valor diferente al pagado', (document.querySelector('#divmsjalerta2') as HTMLElement));\r\n        return;\r\n      }\r\n      actualizarMediosPago();\r\n    });\r\n\r\n\r\n    async function actualizarMediosPago(){\r\n      const setNuevosMediosPago = new Set(nuevosMediosPago.map(x=>x.idmediopago));\r\n      ////cruzar los datos de los medios de pago de la DB y de los nuevos medios de pago////\r\n      //////// medios de pago iguales o compartidos ///////////\r\n      const mediospagocompartidos = mediospagoDB.filter(x=>setNuevosMediosPago.has(x.idmediopago));\r\n      //////// nuevos medios de pago que no estan en DB, crear o agregar\r\n      const nuevosMediosPagoNoEnDB = nuevosMediosPago.filter(x=>!setMediosPagoDB.has(x.idmediopago));\r\n      //////// medios de pago de la DB que no estan en los nuevos medios de pago, eliminar\r\n      const mediosPagoDBNoEnNuevos = mediospagoDB.filter(x=>!setNuevosMediosPago.has(x.idmediopago));\r\n\r\n      const datos = new FormData();\r\n      datos.append('id_factura', idfactura);\r\n      datos.append('efectivoDB', mediospagoDB.find(x=>x.idmediopago=='1')?.valor??'0'+'');\r\n      datos.append('nuevoEfectivo', nuevosMediosPago.find(x=>x.idmediopago=='1')?.valor??'0'+'');\r\n      datos.append('mediospagocompartidos', JSON.stringify(mediospagocompartidos));\r\n      datos.append('nuevosMediosPagoNoEnDB', JSON.stringify(nuevosMediosPagoNoEnDB));\r\n      datos.append('mediosPagoDBNoEnNuevos', JSON.stringify(mediosPagoDBNoEnNuevos));\r\n      datos.append('nuevosMediosPago', JSON.stringify(nuevosMediosPago));  \r\n      try {\r\n          const url = \"/admin/api/cambioMedioPago\";  //va al controlador ventascontrolador\r\n          const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n          const resultado = await respuesta.json();\r\n          if(resultado.exito !== undefined){\r\n            msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            updateMP(resultado.mediosPagoUpdate);\r\n          }else{\r\n            msjalertToast('error', '¡Error!', resultado.error[0]);\r\n          }\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n      modalcambioMedioPago.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    function updateMP(mediosPagoUpdate:{id:string, idmediopago:string, id_factura:string, valor:string, mediopago:string}[]){\r\n      while(contentMP.firstChild)contentMP.removeChild(contentMP.firstChild);\r\n      mediosPagoUpdate.forEach(btnMP=>{\r\n        const button = document.createElement('button');\r\n        button.classList.add('btn-xs', 'btn-light', 'mr-2');\r\n        button.textContent = btnMP.mediopago;\r\n        contentMP.appendChild(button);\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === modalGastosIngresos || event.target === modalcambioMedioPago || (event.target as HTMLInputElement).value === 'cancelar') {\r\n          modalGastosIngresos.close();\r\n          modalcambioMedioPago.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.cerrarcaja')){\r\n    const modalArqueocaja:any = document.querySelector(\"#modalArqueocaja\");\r\n    const Modalcerrarcaja:any = document.querySelector(\"#Modalcerrarcaja\");\r\n    const modalCambiarCaja:any = document.querySelector(\"#modalCambiarCaja\");\r\n    const btnArqueocaja = document.querySelector<HTMLButtonElement>(\"#btnArqueocaja\");\r\n    const btnCerrarcaja = document.querySelector<HTMLButtonElement>(\"#btnCerrarcaja\");\r\n    const btnImprimirDetalleCaja = document.querySelector('#btnImprimirDetalleCaja') as HTMLButtonElement;\r\n    const btnCambiarCaja = document.querySelector<HTMLButtonElement>(\"#btnCambiarCaja\");\r\n    const inputsmediospago = document.querySelectorAll<HTMLInputElement>('.inputmediopago');\r\n    const formArqueocaja = document.querySelector('#formArqueocaja') as HTMLFormElement;\r\n    const formCambiarCaja = document.querySelector('#formCambiarCaja') as HTMLFormElement;\r\n\r\n    btnArqueocaja?.addEventListener('click', ():void=>{\r\n      modalArqueocaja.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    btnCerrarcaja?.addEventListener('click', ():void=>{\r\n      Modalcerrarcaja.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    btnCambiarCaja?.addEventListener('click', ():void=>{\r\n      modalCambiarCaja.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n    \r\n\r\n    //////////////////     Arqueo de caja      //////////////////////\r\n    formArqueocaja?.addEventListener('submit', (e:Event)=>{\r\n      e.preventDefault();\r\n      sumatoriaDenominaciones();\r\n      const datos = new FormData(formArqueocaja);\r\n      datos.append('idcierrecaja', document.querySelector('#idCierrecaja')?.textContent!);\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/arqueocaja\";  //api llamada en cajacontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              modalArqueocaja.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      \r\n    });\r\n\r\n    function sumatoriaDenominaciones():void{\r\n      const ef = document.querySelector('#Efectivo') as HTMLInputElement;\r\n      const inputsDenominaciones = Array.from( document.querySelectorAll<HTMLInputElement>('.denominacion'));\r\n      const sum = inputsDenominaciones.reduce((total, denominaicon)=>(Number(denominaicon.dataset.moneda)*Number(denominaicon.value))+total, 0);\r\n      ef.value = sum+'';\r\n      const eventInput = new Event('input');  //crea un evento\r\n      ef.dispatchEvent(eventInput); // se dispara el evento de manera manual, --->abajo<--, es decir cuando se introduce un valor en el campo efectivo se dispara el evento.\r\n    }\r\n\r\n    ///////////  eventos a los inputs medios de pago de declarar valores /////////////\r\n    inputsmediospago.forEach(m=>{\r\n      m.addEventListener('input', (e)=>{  \r\n        const inputmediopago = (e.target as HTMLInputElement);\r\n        const valormediopagodeclarado:number =  parseInt((e.target as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n        (async ()=>{\r\n          const datos = new FormData();\r\n          datos.append('id_mediopago', inputmediopago.dataset.idmediopago+'');\r\n          datos.append('nombremediopago', inputmediopago.name);\r\n          datos.append('valordeclarado', valormediopagodeclarado+'');\r\n          datos.append('idcierrecaja', document.querySelector('#idCierrecaja')?.textContent!);\r\n          try {\r\n              const url = \"/admin/api/declaracionDinero\";  //api llamada en cajacontrolador.php\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();\r\n              if(resultado.exito !== undefined){\r\n                inputmediopago.style.color = \"#02db02\";\r\n                inputmediopago.style.fontWeight = \"500\";\r\n                actualizarAnalisis(inputmediopago.dataset.idmediopago!, valormediopagodeclarado+'', inputmediopago.name);\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();\r\n      });\r\n    }); \r\n\r\n\r\n    function actualizarAnalisis(id: string, valordeclarado: string, mediopago:string):void{\r\n      const coldeclarado = document.querySelector(`.coldeclarado[data-mediopagoid=\"${id}\"]`);\r\n      if(coldeclarado){\r\n        const coldif = coldeclarado.nextElementSibling;\r\n        coldeclarado.textContent = Number(valordeclarado).toLocaleString('es-ES', { useGrouping: true });\r\n        const colsistem = coldeclarado.previousElementSibling?.textContent?.replace(/[.,]/g, '');\r\n        coldif!.textContent = ((Number(valordeclarado) - Number(colsistem))).toLocaleString('es-ES', { useGrouping: true }); \r\n      }else{\r\n        const cuerpoanalisis = document.querySelector('.cuerpoanalisis');\r\n        cuerpoanalisis?.insertAdjacentHTML('beforeend', `\r\n          <tr class=\"${mediopago=='Efectivo'?'!border-2 !border-indigo-600':''}\">\r\n            <td class=\"\">${mediopago}</td> \r\n            <td class=\"colsistem\">0</td>\r\n            <td class=\"coldeclarado\" data-mediopagoid=\"${id}\">${Number(valordeclarado).toLocaleString('es-ES', { useGrouping: true })}</td>\r\n            <td class=\"coldif\">${Number(valordeclarado).toLocaleString('es-ES', { useGrouping: true })}</td>\r\n          </tr>`\r\n        );\r\n      }\r\n    }\r\n\r\n    function confirmarcierre(){\r\n      const datos = new FormData();\r\n      \r\n      datos.append('idcierrecaja', document.querySelector('#idCierrecaja')?.textContent!);\r\n      \r\n      (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"grid\";\r\n      Modalcerrarcaja.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      (async ()=>{\r\n        try {\r\n\r\n            const url = \"/admin/api/cierrecajaconfirmado\";  //api llamada en cajacontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              setTimeout(() => {\r\n                (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n                window.location.href = `/admin/caja/detallecierrecaja?id=${resultado.ultimocierre[0]}`;\r\n              }, 1600);\r\n            }else{\r\n              (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    }\r\n\r\n    ///////// imprimir detalle cierre\r\n    btnImprimirDetalleCaja?.addEventListener('click', ()=>{\r\n        const ventana = window.open('/printdetallecierre?id=1', '_blank');\r\n        if(ventana){\r\n          ventana.onload = ()=>{\r\n            ventana?.focus();\r\n            ventana?.print();\r\n            setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n          };\r\n        }\r\n    });\r\n\r\n    //////////////////     Cambio de caja      //////////////////////\r\n    formCambiarCaja?.addEventListener('submit', (e:Event)=>{\r\n      e.preventDefault();\r\n      const datos = new FormData();\r\n      datos.append('idcaja', $('#CambiarCaja').val()as string); //select del modal de cambio de caja\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/datoscajaseleccionada\";  //api llamada en cajacontrolador.php para traer datos de venta de la caja seleccionada \r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              modalCambiarCaja.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n              console.log(resultado);\r\n              //cambiar el id del cierre de caja en id=\"#idCierrecaja\"\r\n              document.querySelector('#nombreCaja')!.textContent = $('#CambiarCaja option:selected').text();\r\n              document.querySelector('#idCierrecaja')!.textContent = resultado.ultimocierre.id;\r\n              //mostar datos de la caja seleccionada\r\n              printdiscriminarmediospago(resultado.discriminarmediospagos);\r\n              printindicadores(resultado.ultimocierre);\r\n              printsobrantesfaltantes(resultado.sobrantefaltante);\r\n              printventasxusuarios(resultado.ventasxusuarios);\r\n              printventas(resultado.facturas);\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      \r\n    });\r\n\r\n    function printdiscriminarmediospago(array: {idmediopago:string, mediopago:string, valor:string}[]){\r\n      const tbodyMediosPago = document.querySelector('#tablaMediosPago tbody') as HTMLTableElement;\r\n      while(tbodyMediosPago.firstChild)tbodyMediosPago.removeChild(tbodyMediosPago.firstChild);\r\n      array.forEach(row=>{\r\n        const tr = document.createElement('tr');\r\n        tr.innerHTML = `<td class=\"\">${row.mediopago}</td> \r\n                        <td class=\"\"><strong>$ </strong>${Number(row.valor).toLocaleString()}</td>\r\n                      `;\r\n        tbodyMediosPago.appendChild(tr);\r\n      });\r\n    }\r\n\r\n    function printindicadores(obj:{id:string, idcaja:string, id_usuario:string, nombrecaja:string, nombreusuario:string, fechainicio:string, fechacierre:string, ncambiosaventa:string, totalcotizaciones:string, totalfacturas:string, facturaselectronicas:string, facturaspos:string, valorfe:string, descuentofe:string, valorpos:string, descuentopos:string, basecaja:string, ventasenefectivo:string, gastoscaja:string, gastosbanco:string, dineroencaja:string, domicilios:string, ndomicilios:string, realencaja:string, ingresoventas:string, totaldescuentos:string, realventas:string, valorimpuestototal:string, basegravable:string, estado:string}){\r\n      const basecaja = Number(obj.basecaja);\r\n      const ventasenefectivo = Number(obj.ventasenefectivo);\r\n      const gastoscaja = Number(obj.gastoscaja);\r\n      const domicilios = Number(obj.domicilios);\r\n      const ingresoventas = Number(obj.ingresoventas);\r\n      const totaldescuentos = Number(obj.totaldescuentos);\r\n\r\n      document.querySelector('#basecajaResumen')!.textContent = '$'+basecaja.toLocaleString();\r\n      document.querySelector('#gastoscajaResumen')!.textContent = '$'+gastoscaja.toLocaleString();\r\n      document.querySelector('#domiciliosResumen')!.textContent = '$'+domicilios.toLocaleString();\r\n      document.querySelector('#ingresoventasResumen')!.textContent = '$'+(ingresoventas).toLocaleString();\r\n      document.querySelector('#totalfacturasResumen')!.textContent = obj.totalfacturas;\r\n      document.querySelector('#totalcotizacionesResumen')!.textContent = obj.totalcotizaciones;\r\n\r\n      document.querySelector('#baseIngresoCaja')!.textContent = '+ $'+basecaja.toLocaleString();\r\n      document.querySelector('#ventasEfectivo')!.textContent = '+ $'+ventasenefectivo.toLocaleString();\r\n      document.querySelector('#gastosCaja')!.textContent = '- $'+gastoscaja.toLocaleString();\r\n      document.querySelector('#dineroCaja')!.textContent = '= $'+(basecaja+ventasenefectivo-gastoscaja).toLocaleString();\r\n      document.querySelector('#domicilios')!.textContent = '- $'+domicilios.toLocaleString();\r\n      document.querySelector('#realCaja')!.textContent = '= $'+(basecaja+ventasenefectivo-gastoscaja-domicilios).toLocaleString();\r\n      document.querySelector('#ingresoVentasTotal')!.textContent = '+ $'+ingresoventas.toLocaleString();\r\n      document.querySelector('#totalGastosCaja')!.textContent = '- $'+gastoscaja.toLocaleString();\r\n      document.querySelector('#totalDescuentos')!.textContent = '- $'+totaldescuentos.toLocaleString();\r\n      document.querySelector('#totalDomicilios')!.textContent = '= $'+(domicilios).toLocaleString();\r\n      document.querySelector('#realVentas')!.textContent = '= $'+(ingresoventas-totaldescuentos-domicilios-gastoscaja).toLocaleString();\r\n      document.querySelector('#totalBaseGravable')!.textContent = '+ $'+Number(obj.basegravable).toLocaleString();\r\n      document.querySelector('#impuestoTotal')!.textContent = '+ $'+Number(obj.valorimpuestototal).toLocaleString();\r\n      document.querySelector('#otrosGastosBancarios')!.textContent = '+ $'+Number(obj.gastosbanco).toLocaleString();\r\n      document.querySelector('#cantidadFacturasFE')!.textContent = obj.facturaselectronicas;\r\n      document.querySelector('#cantidadFacturasPOS')!.textContent = obj.facturaspos;\r\n    }\r\n\r\n    function printsobrantesfaltantes(array: {id_mediopago:string, idcierrecajaid:string, nombremediopago:string, valordeclarado:number, valorsistema:number}[]){\r\n      const sobranteFaltante = document.querySelector('#sobranteFaltante tbody') as HTMLTableElement;\r\n      while(sobranteFaltante.firstChild)sobranteFaltante.removeChild(sobranteFaltante.firstChild);\r\n      array.forEach(row=>{\r\n        const tr = document.createElement('tr');\r\n        if(row.nombremediopago=='Efectivo')tr.classList.add('!border-2', '!border-indigo-600');\r\n        tr.innerHTML = `<td class=\"\">${row.nombremediopago}</td> \r\n                        <td class=\"colsistem\">${row.valorsistema.toLocaleString()}</td>\r\n                        <td class=\"coldeclarado\" data-mediopagoid=\"${row.id_mediopago}\">${row.valordeclarado.toLocaleString()}</td>\r\n                        <td class=\"coldif\">${(row.valordeclarado - row.valorsistema).toLocaleString()}</td>\r\n                      `;\r\n        sobranteFaltante.appendChild(tr);\r\n      });\r\n    }\r\n\r\n    function printventasxusuarios(array: {Nombre:string, N_ventas:string, ventas:string}[]){\r\n      const ventasxusuarios = document.querySelector('#ventasXUsuario tbody') as HTMLTableElement;\r\n      while(ventasxusuarios.firstChild)ventasxusuarios.removeChild(ventasxusuarios.firstChild);\r\n      array.forEach(row=>{\r\n        const tr = document.createElement('tr');\r\n        tr.innerHTML = `<td class=\"\">${row.Nombre}</td>\r\n                        <td class=\"\">${row.N_ventas}</td>\r\n                        <td class=\"\"><strong>$ </strong>${Number(row.ventas).toLocaleString()}</td>\r\n                      `;\r\n        ventasxusuarios.appendChild(tr);\r\n      });\r\n    }\r\n\r\n    function printventas(array: {id:string, idcliente:string, idvendedor:string, idcaja:string, idconsecutivo:string, iddireccion:string, idtarifazona:string, idcierrecaja:string, cliente:string, vendedor:string, caja:string, tipofacturador:string, mediosdepago:{id:string, id_factura:string, mediopago:string, valor:string}[], direccion:string, tarifazona:string, totalunidades:string, recibido:string, transaccion:string, tipoventa:string, cotizacion:string, estado:string, cambioaventa:string, subtotal:string, base:string, valorimpuestototal:string, dctox100:string, descuento:string, total:string, observacion:string, departamento:string, ciudad:string, entrega:string, valortarifa:string, fechacreacion:string, fechapago:string}[]){\r\n      const tablaVentas = document.querySelector('#tablaVentas tbody') as HTMLTableElement;\r\n      while(tablaVentas.firstChild)tablaVentas.removeChild(tablaVentas.firstChild);\r\n      array.forEach((row, i)=>{\r\n        const tr = document.createElement('tr');\r\n        tr.innerHTML = `<td class=\"\">${i}</td>        \r\n                        <td class=\"\">${row.fechapago}</td> \r\n                        <td class=\"\">${row.cliente}</td> \r\n                        <td class=\"\">${row.id}</td>\r\n                        <td>\r\n                            <div data-estado=\"${row.estado}\" data-totalpagado=\"${row.total}\" id=\"${row.id}\" class=\"mediosdepago max-w-full flex flex-wrap gap-2\">\r\n                                ${row.mediosdepago.map(mp=>`<button class=\"btn-xs btn-light\">${mp.mediopago}</button>`).join(' ')}\r\n                            </div>\r\n                        </td>\r\n                        <td class=\"${row.estado=='Paga'?'btn-xs btn-lima':'btn-xs btn-blueintense'}\">${row.estado}</td>\r\n                        <td class=\"\">$ ${Number(row.subtotal).toLocaleString()}</td>\r\n                        <td class=\"\">$ ${Number(row.total).toLocaleString()}</td>\r\n                        <td class=\"accionestd\"><div class=\"acciones-btns\" id=\"${row.id}\">\r\n                                <a class=\"btn-xs btn-turquoise\" href=\"/admin/caja/ordenresumen?id=${row.id}\">Ver</a> <button class=\"btn-xs btn-light\"><i class=\"fa-solid fa-print\"></i></button>\r\n                            </div>\r\n                        </td>\r\n                      `;\r\n        tablaVentas.appendChild(tr);\r\n      });\r\n    }\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === modalArqueocaja || event.target === Modalcerrarcaja || event.target === modalCambiarCaja || (event.target as HTMLInputElement).value === 'Cancelar' || (event.target as HTMLElement).closest('.salircerrarcaja') || (event.target as HTMLElement).closest('.finCerrarcaja')) {\r\n          modalArqueocaja.close();\r\n          Modalcerrarcaja.close();\r\n          modalCambiarCaja.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n\r\n          if((event.target as HTMLElement).closest('.finCerrarcaja')){  //Cuando se hace el cierre de caja\r\n            confirmarcierre();\r\n          }\r\n      }\r\n    }\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.detallecierrecaja')){\r\n    const btnImprimirDetalleCaja = document.querySelector('#btnImprimirDetalleCaja') as HTMLButtonElement;\r\n\r\n    ///////// imprimir detalle cierre\r\n    btnImprimirDetalleCaja?.addEventListener('click', ()=>{\r\n        const ventana = window.open('/printdetallecierre?id=1', '_blank');\r\n        if(ventana){\r\n            ventana.onload = ()=>{\r\n                ventana?.focus();\r\n                ventana?.print();\r\n                setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n            };\r\n        }\r\n    });\r\n\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.fechazetadiario')){\r\n\r\n    const btnsmultiselect = document.querySelectorAll<HTMLElement>('.btnmultiselect');\r\n    const selectedcajas = document.querySelectorAll<HTMLLIElement>('.caja');\r\n    const consultarZDiario = document.querySelector('#consultarZDiario') as HTMLButtonElement;\r\n    const tbodyMediosPago = document.querySelector('#tablaMediosPago tbody') as HTMLTableElement;\r\n    const base = document.querySelector('#base') as HTMLElement;\r\n    const valorImpuestoTotal = document.querySelector('#valorImpuestoTotal') as HTMLElement;\r\n    const ingresoVentas = document.querySelector('#ingresoVentas') as HTMLElement;\r\n    const totalDescuentos = document.querySelector('#totalDescuentos') as HTMLElement;\r\n    const realVentas = document.querySelector('#realVentas') as HTMLElement;\r\n    const cantidadElectronicas = document.querySelector('#cantidadElectronicas') as HTMLElement;\r\n    const cantidadPOS = document.querySelector('#cantidadPOS') as HTMLElement;\r\n    const valorElectronicas = document.querySelector('#valorElectronicas') as HTMLElement;\r\n    const valorPOS = document.querySelector('#valorPOS') as HTMLElement;\r\n    let fechainicio:string = \"\", fechafin:string = \"\";\r\n\r\n    //evento a los select drop dawn para abrir y cerrar\r\n    btnsmultiselect.forEach((btnmultiselect, index) =>{\r\n      btnmultiselect.addEventListener('click', (e:Event)=>{\r\n        cerrarlosmultiselect(index);\r\n        btnmultiselect.classList.toggle('open');\r\n      });\r\n    });\r\n    function cerrarlosmultiselect(index:number){\r\n      btnsmultiselect.forEach((element, i) =>{\r\n        if(i != index || !element.classList.contains('open'))element.classList.remove('open');\r\n      });\r\n    }\r\n    document.querySelector('.fechazetadiario')?.addEventListener('click', (e:Event)=>{\r\n      if(!(e.target as HTMLElement).closest('.btnmultiselect')&&!(e.target as HTMLElement).closest('.list-items')){\r\n        const btnmultiselect = document.querySelector('.open');\r\n        if(btnmultiselect)btnmultiselect.classList.toggle('open');\r\n      }\r\n    });\r\n    // mostrar el nombre de las cajas,segun se selecciona\r\n    selectedcajas.forEach(c=>{c.addEventListener('click', cajas_seleccionadas);});\r\n\r\n    function cajas_seleccionadas(){\r\n      const inputscaja = document.querySelectorAll<HTMLInputElement>('input.caja[type=\"checkbox\"]:checked');\r\n      const cajastext = document.querySelector('#cajastext') as HTMLElement;\r\n      cajastext.textContent = \". \";\r\n      inputscaja.forEach((inputcaja, i) =>{\r\n        if(i<inputscaja.length-1){\r\n          cajastext.textContent += inputcaja.nextElementSibling?.textContent!+' - ';\r\n        }else{\r\n          cajastext.textContent += inputcaja.nextElementSibling?.textContent!;\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    // SELECTOR DE FECHAS DEL CALENDARIO\r\n    ($('input[name=\"datetimes\"]')as any).daterangepicker({\r\n      timePicker: true,\r\n      //startDate: moment().startOf('hour'),\r\n      //endDate: moment().startOf('hour').add(32, 'hour'),\r\n      startDate: moment().set({ hour: 0, minute: 0, second: 1 }),\r\n      endDate: moment().set({ hour: 23, minute: 59, second: 59 }),\r\n      locale: {\r\n        format: 'M/DD hh:mm A'\r\n      }\r\n    });\r\n\r\n    $('input[name=\"datetimes\"]').on('apply.daterangepicker', function(ev, picker) {\r\n        var startDate = picker.startDate.format('YYYY-MM-DD HH:mm:ss');\r\n        var endDate = picker.endDate.format('YYYY-MM-DD HH:mm:ss');\r\n        fechainicio = startDate;\r\n        fechafin = endDate;\r\n        (document.querySelector('#fechainicio') as HTMLParagraphElement).textContent = fechainicio;\r\n        (document.querySelector('#fechafin') as HTMLParagraphElement).textContent = fechafin;\r\n    });\r\n\r\n    consultarZDiario.addEventListener('click', ()=>{\r\n      if(fechainicio == '' || fechafin == ''){\r\n         msjalertToast('error', '¡Error!', \"Elegir fechas a consultar\");\r\n         return;\r\n      }\r\n      const cajas = document.querySelectorAll<HTMLInputElement>('input.caja[type=\"checkbox\"]:checked');\r\n      const facturadores = document.querySelectorAll<HTMLInputElement>('input.facturador[type=\"checkbox\"]:checked');\r\n      \r\n      const valuecajas:string[] = Array.from(cajas).map(c=>c.value);\r\n      const valuefacturadores:string[] = Array.from(facturadores).map(f=>f.value);\r\n\r\n      (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"grid\";\r\n      (async ()=>{\r\n        const datos = new FormData();\r\n        datos.append('fechainicio', fechainicio);\r\n        datos.append('fechafin', fechafin);\r\n        datos.append('cajas', JSON.stringify(valuecajas));\r\n        datos.append('facturadores', JSON.stringify(valuefacturadores));\r\n        try {\r\n            const url = \"/admin/api/consultafechazetadiario\"; //llama a la api que esta en reportescontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            console.log(resultado);\r\n           (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n           reiniciarTablas();\r\n           imprimirtablaMediosPago(resultado.datosmediospago);\r\n           imprimirIngresos(resultado.datosventa);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n    });\r\n\r\n\r\n    function imprimirtablaMediosPago(datosmediospago:{id:string, nombre:string, valor:string}[]){\r\n      datosmediospago.forEach(mp =>{\r\n        const tr = document.createElement('tr');\r\n        tr.innerHTML = `<td class=\"\">${mp.nombre}</td> \r\n                        <td class=\"\">$${Number(mp.valor).toLocaleString()}</td>`;\r\n        tbodyMediosPago.appendChild(tr);\r\n      });\r\n    }\r\n\r\n    function imprimirIngresos(datosventa:{subtotalventa:string, base:string, valorimpuestototal:string, totalventa:string, ELECTRONICAS:string, POS:string, total_ELECTRONICAS:string, total_POS:string}){\r\n      base.textContent = '$'+Number(datosventa.base).toLocaleString();\r\n      valorImpuestoTotal.textContent = '$'+Number(datosventa.valorimpuestototal).toLocaleString();\r\n      ingresoVentas.textContent = '$'+Number(datosventa.subtotalventa).toLocaleString();\r\n      totalDescuentos.textContent = '$'+(Number(datosventa.subtotalventa)-Number(datosventa.totalventa)).toLocaleString();\r\n      realVentas.textContent = '$'+Number(datosventa.totalventa).toLocaleString();\r\n      cantidadElectronicas.textContent = datosventa.ELECTRONICAS;\r\n      cantidadPOS.textContent = datosventa.POS;\r\n      valorElectronicas.textContent = '$'+Number(datosventa.total_ELECTRONICAS).toLocaleString();\r\n      valorPOS.textContent = '$'+Number(datosventa.total_POS).toLocaleString();\r\n    }\r\n\r\n    function reiniciarTablas(){\r\n      while(tbodyMediosPago.firstChild)tbodyMediosPago.removeChild(tbodyMediosPago.firstChild);\r\n      ingresoVentas.textContent = '';\r\n      totalDescuentos.textContent = \"\";\r\n      realVentas.textContent = \"\";\r\n      cantidadElectronicas.textContent = '';\r\n      cantidadPOS.textContent = '';\r\n      valorElectronicas.textContent = '';\r\n      valorPOS.textContent = '';\r\n    }\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n    if(document.querySelector('.ordenresumen')){\r\n\r\n      const miDialogoFacturar:any = document.querySelector(\"#miDialogoFacturar\");\r\n      const miDialogoEliminarOrden = document.querySelector('#miDialogoEliminarOrden') as any;\r\n      const btnfacturar = document.querySelector<HTMLButtonElement>(\"#btnfacturar\");\r\n      const btneliminarorden = document.querySelector('#btneliminarorden') as HTMLButtonElement;\r\n      const btnCaja = document.querySelector('#caja') as HTMLSelectElement;\r\n      const btnTipoFacturador = document.querySelector('#facturador') as HTMLSelectElement;\r\n      const mediospago = document.querySelectorAll('.mediopago');\r\n      const btnsdevolverinv = document.querySelectorAll<HTMLInputElement>('input[name=\"devolverinventario\"]'); //radio buttom\r\n      const inputsInv = document.querySelectorAll<HTMLInputElement>('.inputInv');\r\n      const printcarta = document.querySelector('#printcarta');\r\n      const printcotizacion = document.querySelector('#printcotizacion');\r\n      const numOrden = document.querySelector('#numOrden');\r\n      const referenciaFactura = document.querySelector('#referenciaFactura');\r\n\r\n      const valorTotal = {subtotal: 0, impuesto: 0, dctox100: 0, descuento: 0, idtarifa: 0, valortarifa: 0, total: 0}; //datos global de la venta\r\n      const mapMediospago = new Map();\r\n  \r\n      valorTotal.subtotal = Number(document.querySelector('#subTotal')?.textContent);\r\n      valorTotal.total = Number(document.querySelector('#total')?.textContent?.replace(/[^\\d]/g, ''));\r\n      \r\n      \r\n      selectFacturadorSegunCaja(btnCaja);\r\n    \r\n      btnCaja.addEventListener('change', (e:Event)=>selectFacturadorSegunCaja(e.target as HTMLSelectElement));\r\n    \r\n      function selectFacturadorSegunCaja(z:HTMLSelectElement){\r\n        $('#facturador').val(z.options[z.selectedIndex].dataset.idfacturador??'1');\r\n      }\r\n\r\n      printcarta?.addEventListener('click', ()=>{\r\n        //leer parametros de url\r\n        const parametrosURL = new URLSearchParams(window.location.search);\r\n        const id = parametrosURL.get('id');\r\n        const ventana = window.open('/printfacturacarta?id='+id, '_blank');\r\n        if(ventana){\r\n          ventana.onload = ()=>{\r\n            ventana?.focus();\r\n            ventana?.print();\r\n            setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n          };\r\n        }\r\n      });\r\n\r\n      printcotizacion?.addEventListener('click', ()=>{\r\n        //leer parametros de url\r\n        const parametrosURL = new URLSearchParams(window.location.search);\r\n        const id = parametrosURL.get('id');\r\n        const ventana = window.open('/printcotizacion?id='+id, '_blank');\r\n        if(ventana){\r\n          ventana.onload = ()=>{\r\n            ventana?.focus();\r\n            ventana?.print();\r\n            setTimeout(() => { ventana?.close(); }, 200); // Cerrar la ventana después de unos segundos\r\n          };\r\n        }\r\n      });\r\n\r\n      btnfacturar?.addEventListener('click', ()=>{\r\n        /*if(modalidadEntrega.textContent === \": Domicilio\" && (selectCliente.value =='1' || selectCliente.value =='2' || !dirEntrega.value)){\r\n          msjAlert('error', 'Cliente o direccion no seleccionado', (document.querySelector('#divmsjalerta1') as HTMLElement));\r\n          return;\r\n        }*/\r\n        /*if(carrito.length){*/\r\n          subirModalPagar();\r\n          miDialogoFacturar.showModal();\r\n          document.addEventListener(\"click\", cerrarDialogoExterno);\r\n        //}\r\n      });\r\n      \r\n\r\n      btneliminarorden?.addEventListener('click', ()=>{\r\n          miDialogoEliminarOrden.showModal();\r\n          document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n\r\n      ///////////////////// Logica botones devolver inventario ////////////////////////\r\n      btnsdevolverinv.forEach(inv=>{ //evento a los radiobutton\r\n        inv.addEventListener('change', (e:Event)=>{\r\n          document.querySelector('#productsInv')?.classList.toggle('hidden');\r\n          if((e.target as HTMLInputElement).value === \"1\"){\r\n            document.querySelectorAll('.inputInv').forEach(x=>x.setAttribute('required', ''));\r\n          }else{\r\n            document.querySelectorAll('.inputInv').forEach(x=>x.removeAttribute('required'));\r\n          }\r\n        });\r\n      });\r\n\r\n      inputsInv.forEach(inputinv =>{\r\n        inputinv.addEventListener('input', e=>{\r\n          const qty = (e.target as HTMLInputElement);\r\n          if(qty.value != qty.parentElement?.dataset.qty){\r\n            qty.classList.add('border-2', 'border-rose-600');\r\n            if(!document.querySelector('.alerta'))\r\n              msjAlert('error', 'Cantidad diferente a devolver a inventario', (document.querySelector('#divmsjalerta1') as HTMLElement));\r\n          }else{\r\n            qty.classList.remove('border-2', 'border-rose-600');\r\n            document.querySelector('.alerta')?.remove();\r\n          }\r\n        });\r\n      });\r\n\r\n      /////////////////////  logica del modal de pago  //////////////////////////\r\n      function subirModalPagar(){\r\n        document.querySelector('#totalPagar')!.textContent = `${valorTotal.total.toLocaleString()}`;\r\n        //como se puede cerrar el modal y aumentar los productos, hay calcular los inputs\r\n        let totalotrosmedios = 0;\r\n        mediospago.forEach((item, index)=>{\r\n          if(index>0)totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n        });\r\n\r\n        if(valorTotal.total<totalotrosmedios){\r\n          totalotrosmedios = 0;\r\n          mapMediospago.clear();\r\n          $('.mediopago').val(0);\r\n        }\r\n        (document.querySelector('.Efectivo')! as HTMLInputElement).value =  `${(valorTotal.total-totalotrosmedios).toLocaleString()}`;\r\n        mapMediospago.set('1', valorTotal.total-totalotrosmedios);\r\n        if(valorTotal.total-totalotrosmedios == 0 && mapMediospago.has('1'))mapMediospago.delete('1');\r\n        calcularCambio(document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n      }\r\n  \r\n      //eventos a los inputs medios de pago\r\n      mediospago.forEach(m=>{m.addEventListener('input', (e)=>{ calcularmediospago(e);});}); \r\n\r\n      function calcularmediospago(e:Event){\r\n        let totalotrosmedios = 0;\r\n        mediospago.forEach((item, index)=>{ //sumar todos los medios de pago menos el efectivo\r\n          if(index>0)totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n        });\r\n        if(totalotrosmedios<=valorTotal.total){\r\n          mapMediospago.set('1', valorTotal.total-totalotrosmedios);\r\n          if(valorTotal.total-totalotrosmedios == 0 && mapMediospago.has('1'))mapMediospago.delete('1');\r\n          mapMediospago.set((e.target as HTMLInputElement).id, parseInt((e.target as HTMLInputElement).value.replace(/[,.]/g, '')));\r\n          if((e.target as HTMLInputElement).value == '0' && mapMediospago.has((e.target as HTMLInputElement).id))mapMediospago.delete((e.target as HTMLInputElement).id);\r\n        }else{ //si la suma de los medios de pago superan el valor total, toma el ultimo input digitado y lo reestablece a su ultimo valor\r\n          if(mapMediospago.has((e.target as HTMLInputElement).id)){\r\n            (e.target as HTMLInputElement).value = mapMediospago.get((e.target as HTMLInputElement).id).toLocaleString();\r\n          }else{\r\n            (e.target as HTMLInputElement).value = '0';\r\n          }\r\n        }\r\n        (mediospago[0] as HTMLInputElement).value = (mapMediospago.get('1')??0).toLocaleString();\r\n        calcularCambio(document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n      }\r\n\r\n      /////////////////////  evento al input recibido  //////////////////////////\r\n      document.querySelector<HTMLInputElement>('#recibio')?.addEventListener('input', (e)=>{\r\n        calcularCambio((e.target as HTMLInputElement).value);\r\n      });\r\n      function calcularCambio(recibido:string):void{\r\n        recibido = recibido.replace(/[,.]/g, '');\r\n        if(Number(recibido)>mapMediospago.get('1')){\r\n          (document.querySelector('#cambio') as HTMLElement).textContent = (Number(recibido)-mapMediospago.get('1')).toLocaleString()+'';\r\n          return;\r\n        }\r\n        (document.querySelector('#cambio') as HTMLElement).textContent = '0';\r\n      }\r\n\r\n\r\n      ////////////////// evento al bton pagar del modal facturar //////////////////////\r\n      document.querySelector('#formfacturar')?.addEventListener('submit', e=>{\r\n        e.preventDefault();\r\n        procesarpedido('Guardado');\r\n      });\r\n\r\n      async function procesarpedido(estado:string){ //////PROCESAR PAGO DE COTIZACION SiN CAMBIAR DATOS DE LOS PRODUCTOS//////\r\n        const imprimir = document.querySelector('input[name=\"imprimir\"]:checked') as HTMLInputElement;\r\n        const datos = new FormData();\r\n        datos.append('id', (document.querySelector('#idorden') as HTMLElement).dataset.idorden!);\r\n        //datos.append('idcliente', (document.querySelector('#selectCliente') as HTMLSelectElement).value);\r\n        //datos.append('idvendedor', (document.querySelector('#vendedor') as HTMLInputElement).dataset.idvendedor!);\r\n        datos.append('idcaja', btnCaja.value);\r\n        datos.append('idconsecutivo', btnTipoFacturador.value);\r\n        //datos.append('iddireccion', dirEntrega.value);\r\n        //datos.append('idtarifazona', valorTotal.idtarifa+'');\r\n        //datos.append('cliente', selectCliente.options[selectCliente.selectedIndex].textContent!);\r\n        //datos.append('vendedor', (document.querySelector('#vendedor') as HTMLInputElement).value);\r\n        datos.append('caja', (document.querySelector('#caja option:checked') as HTMLSelectElement).textContent!);\r\n        datos.append('tipofacturador', btnTipoFacturador.options[btnTipoFacturador.selectedIndex].textContent!);\r\n        //datos.append('direccion', dirEntrega.options[dirEntrega.selectedIndex].text);\r\n        //datos.append('tarifazona', nombretarifa||'');\r\n        //datos.append('carrito', JSON.stringify(carrito));\r\n        //datos.append('totalunidades', totalunidades.textContent!);\r\n        //datos.append('mediosPago', JSON.stringify(Object.fromEntries(mapMediospago)));\r\n        datos.append('mediosPago', JSON.stringify(Array.from(mapMediospago, ([idmediopago, valor])=>({idmediopago, id_factura:0, valor}))));\r\n        datos.append('recibido', document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n        datos.append('transaccion', '');\r\n        datos.append('estado', estado);\r\n        datos.append('cambioaventa', '1');  //cambioaventa por defecto es 0\r\n        //datos.append('subtotal', valorTotal.subtotal+'');\r\n        //datos.append('impuesto', valorTotal.impuesto+'');\r\n        //datos.append('dctox100',valorTotal.dctox100+'');\r\n        //datos.append('descuento',valorTotal.descuento+'');\r\n        //datos.append('total', valorTotal.total.toString());\r\n        datos.append('observacion', document.querySelector<HTMLTextAreaElement>('#observacion')!.value);\r\n        //datos.append('departamento', '');\r\n        //datos.append('ciudad', (document.querySelector('#ciudadEntrega') as HTMLInputElement).value);\r\n        //datos.append('entrega', modalidadEntrega.textContent!.replace(': ', ''));\r\n        //datos.append('valortarifa', valorTotal.valortarifa+'');\r\n        //datos.append('opc1', '');\r\n        //datos.append('opc2', '');\r\n        try {\r\n            const url = \"/admin/api/facturarCotizacion\";  //va al controlador ventascontrolador\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            console.log(resultado);\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              /////// reinciar modulo de ventas\r\n              if(resultado.idfactura && imprimir.value === '1')printTicketPOS(resultado.idfactura);\r\n              ordenpagada();\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        miDialogoFacturar.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n  \r\n      function printTicketPOS(idfactura:string){\r\n      setTimeout(() => {\r\n        window.open(\"/admin/printPDFPOS?id=\" + idfactura, \"_blank\");\r\n      }, 1200);\r\n    }\r\n\r\n      function ordenpagada(){\r\n        if(btnfacturar)btnfacturar.style.display = \"none\";\r\n        (document.querySelector('#abrirOrden') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#estadoOrden') as HTMLElement).textContent = \"Paga\";\r\n      }\r\n  \r\n      function cerrarDialogoExterno(event:Event) {\r\n        const f = event.target;\r\n        if (event.target === miDialogoFacturar || event.target === miDialogoEliminarOrden || (event.target as HTMLInputElement).value === 'cancelar' || (f as HTMLInputElement).closest('.noeliminar') || (f as HTMLInputElement).closest('.sieliminar')) {\r\n            miDialogoFacturar.close();\r\n            miDialogoEliminarOrden.close();\r\n            if((f as HTMLInputElement).closest('.sieliminar'))eliminarorden();\r\n            document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n\r\n\r\n      function eliminarorden():void{\r\n        ///////*** crear arreglo de obj de los productos y sus cantidades ***///////\r\n        type producto = {id:string, idproducto:string, tipoproducto:string, tipoproduccion:string, rendimientoestandar:string, cantidad: string };\r\n        var products:producto[] = [];\r\n\r\n        inputsInv.forEach(inputinv =>{\r\n          const v = inputinv as HTMLInputElement;\r\n          products = [...products, {id: v.id, idproducto: v.id, tipoproducto: v.dataset.tipoproducto!, tipoproduccion: v.dataset.tipoproduccion!, rendimientoestandar: v.dataset.rendimientoestandar!, cantidad: v.value}];\r\n        });\r\n\r\n        (async ()=>{\r\n          const datos = new FormData();\r\n          datos.append('id', (document.querySelector('#idorden') as HTMLElement).dataset.idorden!); //id de la factura\r\n          datos.append('inv', JSON.stringify(products));\r\n          datos.append('devolverinv', (document.querySelector('input[name=\"devolverinventario\"]:checked') as HTMLInputElement).value);\r\n          //datos.append('domicilio', 0);\r\n          try {\r\n              const url = \"/admin/api/eliminarOrden\";  //api llamada en cajacontrolador.php\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();\r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                btneliminarorden.style.display = \"none\";\r\n                (document.querySelector('#estadoOrden') as HTMLElement).textContent = \"Eliminada\";\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();\r\n      }\r\n\r\n    }\r\n  \r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.pedidosguardados')){\r\n\r\n    let indiceFila=0, control=0, tablaPedidosGuardados:HTMLElement;\r\n/*\r\n    type cajasapi = {\r\n        id:string,\r\n        idtipoconsecutivo: string,\r\n        nombre: string,\r\n        negocio: string\r\n      };\r\n  \r\n      let cajas:cajasapi[]=[], unacaja:cajasapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allcajas\"; //llamado a la API REST y se trae todos los productos\r\n            const respuesta = await fetch(url); \r\n            cajas = await respuesta.json(); \r\n            console.log(cajas);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();*/\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaPedidosGuardados = ($('#tablaPedidosGuardados') as any).DataTable(configdatatables);\r\n\r\n    document.querySelector('#tablaPedidosGuardados')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if(target?.classList.contains(\"eliminarPedidoGuardado\")||target.parentElement?.classList.contains(\"eliminarPedidoGuardado\"))eliminarPedidoGuardado(e);\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar caja  //////////////////////\r\n    function eliminarPedidoGuardado(e:Event){\r\n      let idpedidoguardado = (e.target as HTMLElement).parentElement!.id, info = (tablaPedidosGuardados as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idpedidoguardado = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaPedidosGuardados as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: `Desea eliminar la orden guardado #${idpedidoguardado}?`,\r\n          text: \"La orden/cotizacion guardado sera eliminado definitivamente del sistema.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idpedidoguardado);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarPedidoGuardado\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaPedidosGuardados as any).row(indiceFila).remove().draw(); \r\n                        (tablaPedidosGuardados as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n    \r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateCaja') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","(function(){\r\n  if(document.querySelector('.empleados')){\r\n    const crearempleado = document.querySelector('#crearempleado') as HTMLElement;\r\n    const dialogoEmpleado:any = document.getElementById(\"miDialogoEmpleado\");\r\n    const dialogoContraseña = document.getElementById(\"miDialogoContraseña\");\r\n    const btnupImage = document.querySelector('#upImage') as HTMLInputElement;\r\n    const btncustomUpImage = document.querySelector('#customUpImage') as HTMLButtonElement;\r\n    const imginputfile = document.querySelector('#imginputfile') as HTMLImageElement;  //img\r\n\r\n    const inputNombre = document.querySelector('#nombreempleado') as HTMLInputElement;\r\n    const inputApellido = document.querySelector('#apellidoempleado') as HTMLInputElement;\r\n    const inputnickname = document.querySelector('#nicknameempleado') as HTMLInputElement;\r\n    const inputcedula = document.querySelector('#cedulaempleado') as HTMLInputElement;\r\n    const inputpassword = document.querySelector('#passwordempleado') as HTMLInputElement;\r\n    const inputpassword2 = document.querySelector('#passwordempleado2 ') as HTMLInputElement;\r\n    const inputMovil = document.querySelector('#movilempleado ') as HTMLInputElement;\r\n    const inputEmail = document.querySelector('#emailempleado') as HTMLInputElement;\r\n    const inputDepartamento = document.querySelector('#departamentoempleado') as HTMLInputElement;\r\n    const inputCiudad = document.querySelector('#ciudadempleado') as HTMLInputElement;\r\n    const inputDireccion = document.querySelector('#direccionempleado') as HTMLInputElement;\r\n    const inputPerfil = document.querySelector('#perfilempleado') as HTMLInputElement;\r\n\r\n    let indiceFila=0, control=0, tablaempleados:HTMLElement;\r\n    let empleadosapi: {\r\n      id:string, \r\n      nombre: string,\r\n      apellido: string,\r\n      nickname: string,\r\n      cedula: string,\r\n      movil: string,\r\n      email: string,\r\n      departamento: string,\r\n      ciudad: string,\r\n      direccion: string,\r\n      perfil: string,\r\n      img:string,\r\n      idusuariospermisos:{id:string, usuarioid:string, permisoid:string}[]\r\n      permisos:{id:string, nombre:string}[]\r\n    }[] =[];\r\n      \r\n    let unempleado:{\r\n      id:string,\r\n      nombre: string,\r\n      apellido: string,\r\n      nickname: string,\r\n      cedula: string,\r\n      movil: string,\r\n      email: string,\r\n      departamento: string,\r\n      ciudad: string,\r\n      direccion: string,\r\n      perfil: string, \r\n      img:string,\r\n      idusuariospermisos:{id:string, usuarioid:string, permisoid:string}[]\r\n      permisos:{id:string, nombre:string}[]\r\n    }|undefined;\r\n\r\n    /////////////////  traer todos los empleados con sus skills  ///////////////////\r\n    (async ()=>{\r\n      try {\r\n          const url = \"/admin/api/getAllemployee\"; //llamado a la API REST\r\n          const respuesta = await fetch(url); \r\n          empleadosapi = await respuesta.json(); \r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n    })();\r\n\r\n    inputPerfil.addEventListener('change', (e)=>{\r\n      if((e.target as HTMLSelectElement).value == '2'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"none\";\r\n      }\r\n      if((e.target as HTMLSelectElement).value == '3'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"block\";\r\n      }\r\n      if((e.target as HTMLSelectElement).value == '4'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"block\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"none\";\r\n      }\r\n    });\r\n\r\n    //////////////////  TABLA //////////////////////\r\n    tablaempleados = ($('#tablaempleados') as any).DataTable(configdatatables);\r\n\r\n    //////////////////// ventana modal al crear empleado  //////////////////////\r\n    crearempleado.addEventListener('click', (e)=>{\r\n      control = 0;\r\n      limpiarformdialog();\r\n      document.querySelector('#modalEmpleado')!.textContent = \"Crear empleado\";\r\n      (document.querySelector('#btnEditarCrearEmpleado') as HTMLInputElement).value = \"Crear\";\r\n      dialogoEmpleado.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n     //////////////////// Cargar imagen como preview  //////////////////////\r\n    btncustomUpImage.addEventListener('click', ()=>btnupImage.click());\r\n    btnupImage.addEventListener('change', function(){\r\n      const file = this.files?.[0];\r\n      if(file){\r\n        const reader = new FileReader();\r\n        reader.onload = function(){\r\n          const resrult:(string | ArrayBuffer | null) = reader.result;\r\n          if(typeof resrult == \"string\")imginputfile.src = resrult;\r\n        } \r\n        reader.readAsDataURL(file);\r\n      }\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaempleados')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarEmpleado\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarEmpleado\"))editarEmpleado(e);\r\n      if((e.target as HTMLElement)?.classList.contains(\"updatePassword\")||(e.target as HTMLElement).parentElement?.classList.contains(\"updatePassword\"))updatePassword(e);\r\n      if(target?.classList.contains(\"eliminarEmpleado\")||target.parentElement?.classList.contains(\"eliminarEmpleado\"))eliminarEmpleado(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar empleado  //////////////////////\r\n    function editarEmpleado(e:Event){\r\n      let idempleado = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idempleado = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalEmpleado')!.textContent = \"Actualizar Empleado\";\r\n      (document.querySelector('#btnEditarCrearEmpleado') as HTMLInputElement)!.value = \"Actualizar\";\r\n      unempleado = empleadosapi.find(x => x.id==idempleado); //me trae al empleado seleccionado\r\n      imginputfile.src = \"/build/img/\"+unempleado?.img;\r\n      inputNombre.value = unempleado?.nombre??'';\r\n      inputApellido.value = unempleado?.apellido??'';\r\n      inputnickname.value = unempleado?.nickname??'';\r\n      inputcedula.value = unempleado?.cedula??'';\r\n      inputMovil.value = unempleado?.movil??'';\r\n      inputEmail.value = unempleado?.email??'';\r\n      inputDepartamento.value = unempleado?.departamento??'';\r\n      inputCiudad.value = unempleado?.ciudad??'';\r\n      inputDireccion.value = unempleado?.direccion??'';\r\n      $('#perfilempleado').val(unempleado?.perfil??'');\r\n      if(unempleado?.perfil == '2'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"none\";\r\n      }\r\n      if(unempleado?.perfil == '3'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"none\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"block\";\r\n      }\r\n      if(unempleado?.perfil == '4'){\r\n        (document.querySelector('#contentpermisos') as HTMLElement).style.display = \"block\";\r\n        (document.querySelector('#contentpermisosadmin') as HTMLElement).style.display = \"none\";\r\n      }\r\n      printpermisos(unempleado?.permisos??[]);\r\n      indiceFila = (tablaempleados as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      dialogoEmpleado.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    function printpermisos(leave:{id:string, nombre:string}[]){\r\n      document.querySelectorAll<HTMLInputElement>('#contentpermisos input[type=\"checkbox\"]').forEach(checkbox=>{checkbox.checked=false}); //limpia los checkbox\r\n      leave.forEach(s =>{\r\n        const inputpermiso = document.querySelector(`input[value=\"${s.id}\"]`) as HTMLInputElement;\r\n        inputpermiso.checked = true;\r\n      });\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar empleado  //////////////////////\r\n    document.querySelector('#formCrearUpdateEmpleado')?.addEventListener('submit', e=>{\r\n      if(control){\r\n        e.preventDefault();\r\n        var imgFile:(string|File), info = (tablaempleados as any).page.info();\r\n        imgFile=unempleado!.img;\r\n        if(!imginputfile.src.includes(unempleado!.img)){ //cambio de imagen\r\n          imgFile = ((e.target as HTMLFormElement).elements.namedItem(\"upImage\") as HTMLInputElement).files?.[0]!; //obtengo el archivo\r\n          if(imgFile){\r\n            if(imgFile.type!==\"image/png\"&&imgFile.type!==\"image/jpeg\"){\r\n              msjAlert('error', 'No es un formato valido para la foto', (document.querySelector('#divmsjalertaempleado1') as HTMLElement));\r\n              return;\r\n            }\r\n            if(imgFile.size>550000){ //si es mayor a 550KB\r\n              msjAlert('error', 'La imagen no debe superar los 500KB', document.querySelector('#divmsjalertaempleado1')!);\r\n              return;\r\n            }\r\n          }\r\n        }\r\n\r\n        var arraypermisos:{id:string, nombre:string}[] = [];\r\n        document.querySelectorAll<HTMLInputElement>('#contentpermisos input[type=\"checkbox\"]').forEach(x=>{\r\n          if(x.checked)arraypermisos = [...arraypermisos, {id:x.value, nombre: x.nextElementSibling?.textContent??'permiso'}];\r\n        });\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unempleado!.id);\r\n          datos.append('img', imgFile); //en el backend no se lee con $_POST, se lee con $_FILES\r\n          datos.append('nombre', inputNombre.value);\r\n          datos.append('apellido', inputApellido.value);\r\n          datos.append('nickname', inputnickname.value);\r\n          datos.append('cedula', inputcedula.value);\r\n          datos.append('password', inputpassword.value);\r\n          datos.append('password2', inputpassword2.value);\r\n          datos.append('movil', inputMovil.value);\r\n          datos.append('email', inputEmail.value);\r\n          datos.append('departamento', inputDepartamento.value);\r\n          datos.append('ciudad', inputCiudad.value);\r\n          datos.append('direccion', inputDireccion.value);\r\n          datos.append('perfil', inputPerfil.value);\r\n          datos.append('idpermisos', JSON.stringify(arraypermisos.map(v=>v.id)));\r\n          try {\r\n              const url = \"/admin/api/actualizarEmpleado\";\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                ///////// cambiar la fila completa, su contenido //////////\r\n                const datosActuales = (tablaempleados as any).row(indiceFila+=info.start).data();\r\n                /*NOMBRE*/datosActuales[1] = inputNombre.value +' '+inputApellido.value;\r\n                /*img*/datosActuales[2] = `<div class=\"text-center\"><img style=\"width: 40px;\" src=\"/build/img/${resultado.rutaimg}\" alt=\"\"></div>`;\r\n                /*USER*/datosActuales[3] = inputnickname.value;\r\n                /*PERFIL*/datosActuales[6] = inputPerfil.value==='1'?'Empleado':inputPerfil.value=='2'?'Admin':'Propietario';\r\n                //actualizar arreglo de permisos\r\n                empleadosapi.forEach(a=>{\r\n                  if(a.id == unempleado?.id){\r\n                    a.permisos = arraypermisos;\r\n                    a.img = resultado.rutaimg;\r\n                  }\r\n                });\r\n                (tablaempleados as any).row(indiceFila).data(datosActuales).draw();\r\n                (tablaempleados as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n              dialogoEmpleado.close();\r\n              document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n      } //fin if(control)\r\n    });\r\n\r\n\r\n    ////////////////////  Actualizar contraseña del empleado  //////////////////////\r\n    function updatePassword(e:Event){\r\n      let idempleado = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement).tagName === 'I')idempleado = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      unempleado = empleadosapi.find(x => x.id==idempleado);\r\n      (document.querySelector('#nombreEmpleadoPass') as HTMLElement).textContent = unempleado?.nombre+\" \"+(unempleado?.apellido??'');\r\n      (dialogoContraseña as any)?.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    document.querySelector('#formContraseña')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      (async ()=>{\r\n        const datos = new FormData();\r\n        datos.append('id', unempleado!.id);\r\n        datos.append('password', (document.querySelector('#changePassword') as HTMLInputElement).value);\r\n        try {\r\n            const url = \"/admin/api/updatepassword\";\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.exito[0]);\r\n            }\r\n            (dialogoContraseña as any)?.close();\r\n            document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar el empleado  //////////////////////\r\n    function eliminarEmpleado(e:Event){\r\n      let idempleado = (e.target as HTMLElement).parentElement!.id, info = (tablaempleados as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idempleado = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaempleados as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar el empleado?',\r\n          text: \"El empleado sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idempleado);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarEmpleado\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaempleados as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaempleados as any).page(info.page).draw('page');\r\n                        empleadosapi = empleadosapi.filter(x=>x.id!=idempleado);\r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === dialogoEmpleado || event.target === dialogoContraseña || (event.target as HTMLInputElement).value === 'Cancelar') {\r\n          dialogoEmpleado.close();\r\n          (dialogoContraseña as any)?.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      imginputfile.src = ' ';\r\n      (document.querySelector('#formCrearUpdateEmpleado') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.gestionbancos')){\r\n    const crearBanco = document.querySelector('#crearBanco') as HTMLButtonElement;\r\n    const miDialogoBanco = document.querySelector('#miDialogoBanco') as any;\r\n\r\n    let indiceFila=0, control=0, tablaBancos:HTMLElement;\r\n\r\n    type bancosapi = {\r\n        id:string,\r\n        nombre: string,\r\n        numerocuenta: string,\r\n        saldo: string,\r\n        estado: string,\r\n        created_at: string\r\n      };\r\n  \r\n      let bancos:bancosapi[]=[], unbanco:bancosapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allbancos\"; //llamado a la API REST y se trae todos los bancos\r\n            const respuesta = await fetch(url); \r\n            bancos = await respuesta.json(); \r\n            console.log(bancos);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaBancos = ($('#tablaBancos') as any).DataTable(configdatatables);\r\n\r\n    crearBanco.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalBanco')!.textContent = \"Crear banco\";\r\n        (document.querySelector('#btnEditarCrearBanco') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoBanco.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaBancos')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarBanco\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarBanco\"))editarBanco(e);\r\n      if(target?.classList.contains(\"eliminarBanco\")||target.parentElement?.classList.contains(\"eliminarBanco\"))eliminarBanco(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar banco  //////////////////////\r\n    function editarBanco(e:Event){\r\n      let idbanco = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idbanco = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalBanco')!.textContent = \"Actualizar banco\";\r\n      (document.querySelector('#btnEditarCrearBanco') as HTMLInputElement)!.value = \"Actualizar\";\r\n      \r\n      unbanco = bancos.find(x => x.id==idbanco); //me trae a la banco seleccionada\r\n      (document.querySelector('#nombreBanco')as HTMLInputElement).value = unbanco?.nombre!;\r\n      (document.querySelector('#numeroCuenta')as HTMLInputElement).value = unbanco?.numerocuenta!;\r\n      \r\n      indiceFila = (tablaBancos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoBanco.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar banco  //////////////////////\r\n    document.querySelector('#formCrearUpdateBanco')?.addEventListener('submit', e=>{\r\n      let urlApi = \"crearBanco\";\r\n      if(control)urlApi = \"actualizarBanco\";\r\n\r\n        e.preventDefault();\r\n        var info = (tablaBancos as any).page.info();\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unbanco?.id?unbanco?.id:'');\r\n          datos.append('nombre', $('#nombreBanco').val()as string);\r\n          datos.append('numerocuenta', $('#numeroCuenta').val()as string);\r\n          try {\r\n              const url = \"/admin/api/\"+urlApi;\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                miDialogoBanco.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                if(!control){ //si es crear registro\r\n                  /// actualizar el arregle de la banco ///\r\n                  bancos = [...bancos, resultado.banco];\r\n                  (tablaBancos as any).row.add([\r\n                      (tablaBancos as any).rows().count() + 1,\r\n                      resultado.banco.nombre,\r\n                      resultado.banco.numerocuenta,\r\n                      resultado.banco.created_at,\r\n                      `<div class=\"acciones-btns\" id=\"${resultado.banco.id}\" data-banco=\"${resultado.banco.nombre}\">\r\n                          <button class=\"btn-md btn-turquoise editarBanco\"><i class=\"fa-solid fa-pen-to-square\"></i></button>\r\n                          <button class=\"btn-md btn-red eliminarBanco\"><i class=\"fa-solid fa-trash-can\"></i></button>\r\n                      </div>`\r\n                  ]).draw(false); // draw(false) evita recargar toda la tabla\r\n                }else{ //si es actualizar\r\n                  /// actualizar el arregle de bancos ///\r\n                  bancos.forEach(a=>{if(a.id == unbanco?.id)a = Object.assign(a, resultado.banco[0]);});\r\n                  const datosActuales = (tablaBancos as any).row(indiceFila+=info.start).data();\r\n                  /*BANCO*/      datosActuales[1] = resultado.banco[0].nombre;\r\n                  /*NUM CUENTA*/ datosActuales[2] = resultado.banco[0].numerocuenta;\r\n                  (tablaBancos as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaBancos as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar banco  //////////////////////\r\n    function eliminarBanco(e:Event){\r\n      let idbanco = (e.target as HTMLElement).parentElement!.id, info = (tablaBancos as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idbanco = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaBancos as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar la banco?',\r\n          text: \"La banco sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idbanco);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarBanco\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaBancos as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaBancos as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoBanco || (event.target as HTMLInputElement).value === 'Salir') {\r\n          miDialogoBanco.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          /*if((event.target as HTMLElement).closest('.finCerrarbanco')){  //Cuando se hace el cierre de banco\r\n            confirmarcierre();\r\n          }*/\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateBanco') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.gestioncajas')){\r\n    const crearCaja = document.querySelector('#crearCaja') as HTMLButtonElement;\r\n    const miDialogoCaja = document.querySelector('#miDialogoCaja') as any;\r\n\r\n    let indiceFila=0, control=0, tablaCajas:HTMLElement;\r\n\r\n    type cajasapi = {\r\n        id:string,\r\n        idtipoconsecutivo: string,\r\n        nombre: string,\r\n        negocio: string\r\n      };\r\n  \r\n      let cajas:cajasapi[]=[], unacaja:cajasapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allcajas\"; //llamado a la API REST y se trae todos los productos\r\n            const respuesta = await fetch(url); \r\n            cajas = await respuesta.json(); \r\n            console.log(cajas);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaCajas = ($('#tablaCajas') as any).DataTable(configdatatables);\r\n\r\n    crearCaja.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalCaja')!.textContent = \"Crear caja\";\r\n        (document.querySelector('#btnEditarCrearCaja') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoCaja.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaCajas')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarCaja\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarCaja\"))editarCaja(e);\r\n      if(target?.classList.contains(\"eliminarCaja\")||target.parentElement?.classList.contains(\"eliminarCaja\"))eliminarCaja(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar caja  //////////////////////\r\n    function editarCaja(e:Event){\r\n      let idcaja = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idcaja = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalCaja')!.textContent = \"Actualizar caja\";\r\n      (document.querySelector('#btnEditarCrearCaja') as HTMLInputElement)!.value = \"Actualizar\";\r\n      \r\n      unacaja = cajas.find(x => x.id==idcaja); //me trae a la caja seleccionada\r\n      (document.querySelector('#nombrecaja')as HTMLInputElement).value = unacaja?.nombre!;\r\n      $('#idtipoconsecutivo').val(unacaja?.idtipoconsecutivo??'');\r\n      $('#negociogestioncaja').val(1);\r\n      \r\n      indiceFila = (tablaCajas as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoCaja.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar caja  //////////////////////\r\n    document.querySelector('#formCrearUpdateCaja')?.addEventListener('submit', e=>{\r\n      let urlApi = \"crearCaja\";\r\n      if(control)urlApi = \"actualizarCaja\";\r\n\r\n        e.preventDefault();\r\n        var info = (tablaCajas as any).page.info();\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unacaja?.id?unacaja?.id:'');\r\n          datos.append('idtipoconsecutivo', $('#idtipoconsecutivo').val()as string);\r\n          datos.append('nombre', $('#nombrecaja').val()as string);\r\n          datos.append('negocio', $('#negociogestioncaja').val()as string);\r\n          try {\r\n              const url = \"/admin/api/\"+urlApi;\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                miDialogoCaja.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                if(!control){ //si es crear registro\r\n                  /// actualizar el arregle de la caja ///\r\n                  cajas = [...cajas, resultado.caja];\r\n                  (tablaCajas as any).row.add([\r\n                      (tablaCajas as any).rows().count() + 1,\r\n                      resultado.caja.nombre,\r\n                      resultado.caja.nombreconsecutivo.nombre,\r\n                      resultado.caja.negocio,\r\n                      `<div class=\"acciones-btns\" id=\"${resultado.caja.id}\" data-caja=\"${resultado.caja.nombre}\">\r\n                          <button class=\"btn-md btn-turquoise editarCaja\"><i class=\"fa-solid fa-pen-to-square\"></i></button>\r\n                          <button class=\"btn-md btn-red eliminarCaja\"><i class=\"fa-solid fa-trash-can\"></i></button>\r\n                      </div>`\r\n                  ]).draw(false); // draw(false) evita recargar toda la tabla\r\n                }else{ //si es actualizar\r\n                  /// actualizar el arregle de cajas ///\r\n                  cajas.forEach(a=>{if(a.id == unacaja?.id)a = Object.assign(a, resultado.caja[0]);});\r\n                  const datosActuales = (tablaCajas as any).row(indiceFila+=info.start).data();\r\n                  /*CAJA*/      datosActuales[1] = resultado.caja[0].nombre;\r\n                  /*FACT AUTO*/ datosActuales[2] = $('#idtipoconsecutivo option:selected').text();\r\n                  /*NEGOCIO*/   datosActuales[3] = $('#negociogestioncaja option:selected').text();\r\n                  (tablaCajas as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaCajas as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar caja  //////////////////////\r\n    function eliminarCaja(e:Event){\r\n      let idcaja = (e.target as HTMLElement).parentElement!.id, info = (tablaCajas as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idcaja = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaCajas as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar la caja?',\r\n          text: \"La caja sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idcaja);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarCaja\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaCajas as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaCajas as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoCaja || (event.target as HTMLInputElement).value === 'Salir') {\r\n          miDialogoCaja.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          /*if((event.target as HTMLElement).closest('.finCerrarcaja')){  //Cuando se hace el cierre de caja\r\n            confirmarcierre();\r\n          }*/\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateCaja') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.gestionfacturadores')){\r\n\r\n    const crearCompañia = document.querySelector('#crearCompañia') as HTMLButtonElement;\r\n    const obtenerresolucion = document.querySelector('#obtenerresolucion') as HTMLButtonElement;\r\n    const setpruebas = document.querySelector('#setpruebas') as HTMLButtonElement;\r\n    const miDialogoCompañia = document.querySelector('#miDialogoCompañia') as any;\r\n    const miDialogoGetResolucion = document.querySelector('#miDialogoGetResolucion') as any;\r\n    const miDialogosetpruebas = document.querySelector('#miDialogosetpruebas') as any;\r\n    let indiceFila=0, control=0, tablaCompañias:HTMLElement;\r\n\r\n    crearCompañia.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalCompañia')!.textContent = \"Crear compañia\";\r\n        (document.querySelector('#btnEditarCrearCompañia') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoCompañia.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    obtenerresolucion.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        miDialogoGetResolucion.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    setpruebas.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        miDialogosetpruebas.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoCompañia || event.target === miDialogosetpruebas || event.target === miDialogoGetResolucion || (event.target as HTMLInputElement).value === 'Salir' || (event.target as HTMLInputElement).value === 'Cancelar') {\r\n          miDialogoCompañia.close();\r\n          miDialogoGetResolucion.close();\r\n          miDialogosetpruebas.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateCompañia') as HTMLFormElement)?.reset();\r\n    }\r\n\r\n  }\r\n\r\n})();","(():void=>{\r\n\r\n  if(document.querySelector('.gestionfacturadores')){\r\n    const crearFacturador = document.querySelector('#crearFacturador') as HTMLButtonElement;\r\n    const miDialogoFacturador = document.querySelector('#miDialogoFacturador') as any;\r\n\r\n    let indiceFila=0, control=0, tablaFacturadores:HTMLElement;\r\n\r\n    type facturadoresapi = {\r\n        id:string,\r\n        idtipofacturador: string,\r\n        idnegocio: string,\r\n        nombre: string\r\n        rangoinicial:string,\r\n        rangofinal: string,\r\n        siguientevalor: string,\r\n        fechainicio: string\r\n        fechafin:string,\r\n        resolucion: string,\r\n        consecutivoremplazo: string,\r\n        prefijo: string,\r\n        mostrarresolucion:string,\r\n        mostrarimpuestodiscriminado: string,\r\n        tokenfacturaelectronica: string,\r\n        estado: string\r\n      };\r\n  \r\n      let facturadores:facturadoresapi[]=[], unfacturador:facturadoresapi|undefined;\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/allfacturadores\"; //llamado a la API REST y se trae todos los productos\r\n            const respuesta = await fetch(url); \r\n            facturadores = await respuesta.json(); \r\n            console.log(facturadores);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n\r\n     //////////////////  TABLA //////////////////////\r\n    tablaFacturadores = ($('#tablaFacturadores') as any).DataTable(configdatatables);\r\n\r\n    crearFacturador.addEventListener('click', ()=>{\r\n        control = 0;\r\n        limpiarformdialog();\r\n        document.querySelector('#modalFacturador')!.textContent = \"Crear facturador\";\r\n        (document.querySelector('#btnEditarCrearFacturador') as HTMLInputElement).value = \"Crear\";\r\n        miDialogoFacturador.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    document.querySelector('#tablaFacturadores')?.addEventListener(\"click\", (e)=>{ //evento click sobre toda la tabla\r\n      const target = e.target as HTMLElement;\r\n      if((e.target as HTMLElement)?.classList.contains(\"editarFacturador\")||(e.target as HTMLElement).parentElement?.classList.contains(\"editarFacturador\"))editarFacturador(e);\r\n      if(target?.classList.contains(\"eliminarFacturador\")||target.parentElement?.classList.contains(\"eliminarFacturador\"))eliminarFacturador(e);\r\n    });\r\n\r\n    //////////////////// ventana modal al Actualizar/Editar facturador  //////////////////////\r\n    function editarFacturador(e:Event){\r\n      let idfacturador = (e.target as HTMLElement).parentElement?.id;\r\n      if((e.target as HTMLElement)?.tagName === 'I')idfacturador = (e.target as HTMLElement).parentElement?.parentElement?.id;\r\n      control = 1;\r\n      document.querySelector('#modalFacturador')!.textContent = \"Actualizar facturador\";\r\n      (document.querySelector('#btnEditarCrearFacturador') as HTMLInputElement)!.value = \"Actualizar\";\r\n      \r\n      unfacturador = facturadores.find(x => x.id==idfacturador); //me trae el facturador seleccionado\r\n      (document.querySelector('#nombrefacturador')as HTMLInputElement).value = unfacturador?.nombre!;\r\n      $('#idtipofacturador').val(unfacturador?.idtipofacturador??'');\r\n      $('#rangoinicial').val(unfacturador?.rangoinicial??'');\r\n      $('#rangofinal').val(unfacturador?.rangofinal??'');\r\n      $('#siguientevalor').val(unfacturador?.siguientevalor??'');\r\n      $('#fechainicio').val(unfacturador?.fechainicio??'');\r\n      $('#fechafin').val(unfacturador?.fechafin??'');\r\n      $('#resolucion').val(unfacturador?.resolucion??'');\r\n      $('#prefijo').val(unfacturador?.prefijo??'');\r\n      $('#negociofacturador').val(1);\r\n      \r\n      indiceFila = (tablaFacturadores as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      miDialogoFacturador.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n    ////////////////////  Actualizar/Editar facturador  //////////////////////\r\n    document.querySelector('#formCrearUpdateFacturador')?.addEventListener('submit', e=>{\r\n      let urlApi = \"crearFacturador\";\r\n      if(control)urlApi = \"actualizarFacturador\";\r\n\r\n        e.preventDefault();\r\n        var info = (tablaFacturadores as any).page.info();\r\n        \r\n        (async ()=>{ \r\n          const datos = new FormData();\r\n          datos.append('id', unfacturador?.id?unfacturador?.id:'');\r\n          datos.append('idtipoconsecutivo', $('#idtipoconsecutivo').val()as string);\r\n          datos.append('nombre', $('#nombrecaja').val()as string);\r\n          datos.append('negocio', $('#negociogestioncaja').val()as string);\r\n          try {\r\n              const url = \"/admin/api/\"+urlApi;\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();  \r\n              if(resultado.exito !== undefined){\r\n                miDialogoFacturador.close();\r\n                document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n                if(!control){ //si es crear registro\r\n                  /// actualizar el arregle del facturador///\r\n                  facturadores = [...facturadores, resultado.facturador];\r\n                  (tablaFacturadores as any).row.add([\r\n                      (tablaFacturadores as any).rows().count() + 1,\r\n                      resultado.facturador.nombre,\r\n                      resultado.facturador.nombreconsecutivo.nombre,\r\n                      resultado.facturador.negocio,\r\n                      `<div class=\"acciones-btns\" id=\"${resultado.facturador.id}\" data-facturador=\"${resultado.facturador.nombre}\">\r\n                          <button class=\"btn-md btn-turquoise editarFacturador\"><i class=\"fa-solid fa-pen-to-square\"></i></button>\r\n                          <button class=\"btn-md btn-red eliminarFacturador\"><i class=\"fa-solid fa-trash-can\"></i></button>\r\n                      </div>`\r\n                  ]).draw(false); // draw(false) evita recargar toda la tabla\r\n                }else{ //si es actualizar\r\n                  /// actualizar el arregle de facturadores ///\r\n                  facturadores.forEach(a=>{if(a.id == unfacturador?.id)a = Object.assign(a, resultado.facturador[0]);});\r\n                  const datosActuales = (tablaFacturadores as any).row(indiceFila+=info.start).data();\r\n                  /*xx*/      datosActuales[1] = resultado.facturador[0].nombre;\r\n                  /*x*/ datosActuales[2] = $('#idtipoconsecutivo option:selected').text();\r\n                  /*x*/   datosActuales[3] = $('#negociogestioncaja option:selected').text();\r\n                  (tablaFacturadores as any).row(indiceFila).data(datosActuales).draw();\r\n                  (tablaFacturadores as any).page(info.page).draw('page'); //me mantiene la pagina actual\r\n                }\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();//cierre de async()\r\n    });\r\n\r\n\r\n    ////////////////////  Eliminar facturador  //////////////////////\r\n    function eliminarFacturador(e:Event){\r\n      let idfacturador = (e.target as HTMLElement).parentElement!.id, info = (tablaFacturadores as any).page.info();\r\n      if((e.target as HTMLElement).tagName === 'I')idfacturador = (e.target as HTMLElement).parentElement!.parentElement!.id;\r\n      indiceFila = (tablaFacturadores as any).row((e.target as HTMLElement).closest('tr')).index();\r\n      Swal.fire({\r\n          customClass: {confirmButton: 'sweetbtnconfirm', cancelButton: 'sweetbtncancel'},\r\n          icon: 'question',\r\n          title: 'Desea eliminar el facturador?',\r\n          text: \"El facturador sera eliminado definitivamente.\",\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'No',\r\n      }).then((result:any) => {\r\n          if (result.isConfirmed) {\r\n              (async ()=>{ \r\n                  const datos = new FormData();\r\n                  datos.append('id', idfacturador);\r\n                  try {\r\n                      const url = \"/admin/api/eliminarFacturador\";\r\n                      const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n                      const resultado = await respuesta.json();  \r\n                      if(resultado.exito !== undefined){\r\n                        (tablaFacturadores as any).row(indiceFila+info.start).remove().draw(); \r\n                        (tablaFacturadores as any).page(info.page).draw('page'); \r\n                        Swal.fire(resultado.exito[0], '', 'success')\r\n                      }else{\r\n                          Swal.fire(resultado.error[0], '', 'error')\r\n                      }\r\n                  } catch (error) {\r\n                      console.log(error);\r\n                  }\r\n              })();//cierre de async()\r\n          }\r\n      });\r\n    }\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      if (event.target === miDialogoFacturador || (event.target as HTMLInputElement).value === 'Salir') {\r\n          miDialogoFacturador.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formCrearUpdateFacturador') as HTMLFormElement)?.reset();\r\n    }\r\n  }\r\n  \r\n})();","(()=>{\r\n    if(document.querySelector('.inventarioxproducto')){\r\n        let  tablaStockRapido:HTMLElement;\r\n        tablaStockRapido = ($('#tablaStockRapido') as any).DataTable(configdatatablesstockrapido);\r\n    }\r\n\r\n})();","(function(){\r\n  if(document.querySelector('.reportes')){\r\n    const graficaventa = document.querySelectorAll<HTMLButtonElement>('.graficaventa');\r\n    const chartventas = (document.getElementById('chartventas') as HTMLCanvasElement)?.getContext('2d');\r\n    const chartutilidad = (document.getElementById('chartutilidad') as HTMLCanvasElement)?.getContext('2d');\r\n\r\n    let chartVentasInstance: any | null = null;\r\n\r\n    /*new Chart(ctx, {\r\n      type: 'line',\r\n      data: {\r\n          labels: [1,2,3,4,5,6,7,8,9],//resultado.map(programa=>programa.nombre),\r\n          datasets: [{\r\n          label: '# of Votes',\r\n          data: [1,2,3,4,10,3,11,4,17],//resultado.map(programa=>programa.total),\r\n          borderColor: '#00c8c2',\r\n          //backgroundColor: ['#ea580c', '#84cc16', '#22d3ee', '#a855f7'],\r\n          backgroundColor: '#ea580c',\r\n          //tension: 0.3,\r\n          //stepped: 'middle',\r\n          }]\r\n      },\r\n      options: {\r\n          scales: {\r\n              y: {\r\n                  beginAtZero: true\r\n              }\r\n          },\r\n          plugins: {legend: {display: false } } //elimina el label del dataset\r\n      }\r\n    });*/\r\n\r\n\r\n    //graficaVentaMensual.addEventListener('click', ()=>{\r\n      //console.log(777);\r\n      /*(async ()=>{\r\n        try {\r\n          const url = \"https://apidianj2.com/api/getconfigcompanies\"; //llamado a la API REST Dianlaravel\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json();\r\n          console.log(resultado);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();*/\r\n      /*const idcli = 1;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/ventasGraficaMensual?id=\"+idcli; //llamado a la API REST en reportescontrolador.php\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json(); \r\n          console.log(resultado);\r\n          graficaVentas(resultado);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();*/\r\n    //});\r\n\r\n    callapiventasgrafica(\"/admin/api/ventasGraficaMensual\");\r\n\r\n    graficaventa.forEach((btngrafica, index) =>{\r\n      btngrafica.addEventListener('click', (e:Event)=>{\r\n        let url:string = \"/admin/api/ventasGraficaMensual\"; //llamado a la API REST en reportescontrolador.php\r\n        if(index == 1){  //grafico diario\r\n          url = \"/admin/api/ventasGraficaDiario\"; //llamado a la API REST en reportescontrolador.php\r\n        }\r\n        callapiventasgrafica(url);\r\n      })\r\n    });\r\n\r\n    async function callapiventasgrafica(url:string){\r\n      try {\r\n        const respuesta = await fetch(url); \r\n        const resultado = await respuesta.json(); \r\n        graficaVentas(resultado);\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n    }\r\n\r\n    function graficaVentas(resultado:{label:String[], datos:string[]}){\r\n      if (chartVentasInstance)chartVentasInstance.destroy();\r\n      chartVentasInstance = new Chart(chartventas, {\r\n        type: 'bar',\r\n        data: {\r\n          labels: resultado.label,\r\n          datasets: [{\r\n            label: 'Total Ventas',\r\n            data: resultado.datos,\r\n            borderWidth: 1\r\n          }]\r\n        },\r\n        options: {\r\n          scales: {\r\n            y: {\r\n              beginAtZero: true,\r\n              grid: {display: false} //ocultar regilla horizontal\r\n            },\r\n            x: {\r\n                grid: {display: false}, ////ocultar regilla vertical\r\n            }\r\n          },\r\n          responsive: true,\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n\r\n    ////////////////////////////  chartutilidad - grafica costo/utlidad //////////////////////////////////\r\n    (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/graficaValorInventario\"; //llamado a la API REST en reportescontrolador.php\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json();\r\n          new Chart(chartutilidad, {\r\n            type: 'doughnut',\r\n            data: {\r\n              labels: ['Ventas total:', 'Costo:', 'Utilidad:'],\r\n              datasets: [{\r\n                label: 'Total Ventas',\r\n                data: [Number(resultado.valorventa), Number(resultado.costoinv), (Number(resultado.valorventa) - Number(resultado.costoinv))],\r\n                backgroundColor: ['rgb(54, 162, 235)','rgb(255, 99, 132)', 'rgb(255, 205, 86)'],\r\n                //borderWidth: 1\r\n                hoverOffset: 4\r\n              }]\r\n            },\r\n            options: {\r\n              responsive: true,\r\n              plugins: {\r\n                legend: {\r\n                    labels: {\r\n                        generateLabels: (chart:any) => {\r\n                            const data = chart.data.datasets[0].data;\r\n                            const labels = chart.data.labels;\r\n                            return labels.map((label:any, i:any) => ({\r\n                                text: `${label}: ${data[i]}`,\r\n                                fillStyle: chart.data.datasets[0].backgroundColor[i],\r\n                                index: i\r\n                            }));\r\n                        }\r\n                    }\r\n                }\r\n              }\r\n            }\r\n          });\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    })();\r\n\r\n\r\n\r\n\r\n    ////////////////////////////////////////////////////////////////////    \r\n    \r\n\r\n    /* cerrarDialogoExterno(event:Event) {\r\n      if (event.target === modalFecha || (event.target as HTMLInputElement).value === 'cancelar' || (event.target as HTMLElement).closest('.finCerrarcaja')) {\r\n          modalFecha.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n          if((event.target as HTMLElement).closest('.finCerrarcaja'))console.log(45);//eliminarCita(event.target.closest('.terminarcita').id);\r\n      }\r\n    }*/\r\n\r\n  }\r\n})();","(()=>{\r\n  if(document.querySelector('.ventasxtransaccion')){\r\n\r\n    const btnmensual = document.querySelector('#btnmensual') as HTMLButtonElement;\r\n    const btndiario = document.querySelector('#btndiario') as HTMLButtonElement;\r\n    const miDialogoMes = document.querySelector('#miDialogoMes') as any;\r\n    const miDialogoDiario = document.querySelector('#miDialogoDiario') as any;\r\n    let tablaTransaccioneXVenta:HTMLTableElement;\r\n\r\n    interface transacciones {\r\n      fecha:string,\r\n      total_venta:string,\r\n      num_transacciones:string,\r\n      promedio_transaccion:string,\r\n      transaccion_mas_alta:string,\r\n      transaccion_mas_baja:string\r\n    }\r\n    let datatransacciones:transacciones[] = [];\r\n\r\n    btnmensual?.addEventListener('click', ()=>{\r\n        miDialogoMes.showModal(); //seleccionar año\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    btndiario?.addEventListener('click', ()=>{\r\n        miDialogoDiario.showModal();  //seleccionar mes\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    //seleccionar año, transacciones mes acumulado de un año\r\n    document.querySelector('#formMes')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      const inputselectaño = document.querySelector('#inputselectaño') as HTMLInputElement;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/ventasxtransaccionanual?x=\"+inputselectaño.value; //llamado a la API REST en reportescontrolador.php\r\n          const respuesta = await fetch(url);\r\n          const resultado = await respuesta.json();\r\n          datatransacciones = resultado;\r\n          console.log(resultado);\r\n          printTableTranscciones()\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      miDialogoMes.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    //seleccionar mes, transacciones acumuladas por dia durante un mes\r\n    document.querySelector('#formDiario')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      const inputselectmesyaño = document.querySelector('#inputselectmesyaño') as HTMLInputElement;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/ventasxtransaccionmes?x=\"+inputselectmesyaño.value; //llamado a la API REST en reportescontrolador.php\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json();\r\n          datatransacciones = resultado;\r\n          printTableTranscciones()\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      miDialogoDiario.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    printTableTranscciones();\r\n    function printTableTranscciones(){\r\n\r\n        tablaTransaccioneXVenta = ($('#tablaTransaccioneXVenta') as any).DataTable({\r\n            destroy: true, // importante si recargas la tabla\r\n            data: datatransacciones,\r\n            columns: [{title: 'Fecha', data: 'fecha'}, {title: 'Toal venta', data: 'total_venta', render: (data: number) => `$${data.toLocaleString()}`}, {title: 'Numero de transacciones', data: 'num_transacciones'}, {title: 'Promedio por transacción', data: 'promedio_transaccion'}, {title: 'Transacción mas alta', data: 'transaccion_mas_alta'}, {title: 'Transacción mas baja', data: 'transaccion_mas_baja'}],\r\n        });\r\n    }\r\n\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      const f = event.target;\r\n      if (f === miDialogoMes || f === miDialogoDiario || (f as HTMLInputElement).closest('.salir')) {\r\n        miDialogoMes.close();\r\n        miDialogoDiario.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n})();\r\n   ","(():void=>{\r\n\r\n  if(document.querySelector('.ventasxcliente')){\r\n\r\n    const consultarFechaPersonalizada = document.querySelector('#consultarFechaPersonalizada') as HTMLButtonElement;\r\n    const btnmesactual = document.querySelector('#btnmesactual') as HTMLButtonElement;\r\n    const btnmesanterior = document.querySelector('#btnmesanterior') as HTMLButtonElement;\r\n    const btnhoy = document.querySelector('#btnhoy') as HTMLButtonElement;\r\n    const btnayer = document.querySelector('#btnayer') as HTMLButtonElement;\r\n    let fechainicio:string = \"\", fechafin:string = \"\", tablaVentasXCliente:HTMLElement;\r\n\r\n    interface ventaxcliente {\r\n        id:string,\r\n        nombre:string,\r\n        cantidad_facturas:string,\r\n        total_ventas:string\r\n    } \r\n\r\n    let datosVentaXCliente:ventaxcliente[] = [];\r\n\r\n    //////////////////  TABLA //////////////////////\r\n    tablaVentasXCliente = ($('#tablaVentasXCliente') as any).DataTable(configdatatables);\r\n\r\n    // SELECTOR DE FECHAS DEL CALENDARIO\r\n    ($('input[name=\"datetimes\"]')as any).daterangepicker({\r\n      timePicker: true,\r\n      //startDate: moment().startOf('hour'),\r\n      //endDate: moment().startOf('hour').add(32, 'hour'),\r\n      startDate: moment().set({ hour: 0, minute: 0, second: 1 }),\r\n      endDate: moment().set({ hour: 23, minute: 59, second: 59 }),\r\n      locale: {\r\n        format: 'M/DD hh:mm A'\r\n      }\r\n    });\r\n\r\n    $('input[name=\"datetimes\"]').on('apply.daterangepicker', function(ev, picker) {\r\n        var startDate = picker.startDate.format('YYYY-MM-DD HH:mm:ss');\r\n        var endDate = picker.endDate.format('YYYY-MM-DD HH:mm:ss');\r\n        fechainicio = startDate;\r\n        fechafin = endDate;\r\n        //(document.querySelector('#fechainicio') as HTMLParagraphElement).textContent = fechainicio;\r\n        //(document.querySelector('#fechafin') as HTMLParagraphElement).textContent = fechafin;\r\n    });\r\n\r\n    btnmesactual.addEventListener('click', (e:Event)=>{\r\n        const hoy = new Date();\r\n        // Primer día del mes actual\r\n        const primerDia = new Date(hoy.getFullYear(), hoy.getMonth(), 1);\r\n        // Último día del mes actual\r\n        const ultimoDia = new Date(hoy.getFullYear(), hoy.getMonth() + 1, 0);\r\n        const fechainiciobtn:string = primerDia.toISOString().split('T')[0];\r\n        const fechafinbtn:string = ultimoDia.toISOString().split('T')[0];\r\n        callApiVentasXCliente(fechainiciobtn, fechafinbtn);\r\n    });\r\n\r\n\r\n    btnmesanterior.addEventListener('click', (e:Event)=>{\r\n        // Fecha actual\r\n        const hoy = new Date();\r\n        // Primer día del mes anterior\r\n        const primerDiaMesAnterior = new Date(hoy.getFullYear(), hoy.getMonth() - 1, 1);\r\n        // Último día del mes anterior\r\n        const ultimoDiaMesAnterior = new Date(hoy.getFullYear(), hoy.getMonth(), 0);\r\n        const fechainiciobtn:string = primerDiaMesAnterior.toISOString().split('T')[0];\r\n        const fechafinbtn:string = ultimoDiaMesAnterior.toISOString().split('T')[0];\r\n        callApiVentasXCliente(fechainiciobtn, fechafinbtn);\r\n    });\r\n\r\n    btnhoy.addEventListener('click', (e:Event)=>{\r\n        const hoy = new Date();\r\n        const inicioDia = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate(), 0, 0, 0);\r\n        const finDia = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate(), 23, 59, 59);\r\n        const fechainiciobtn:string = formatoFecha(inicioDia);\r\n        const fechafinbtn:string = formatoFecha(finDia);\r\n        callApiVentasXCliente(fechainiciobtn, fechafinbtn);\r\n    });\r\n\r\n    btnayer.addEventListener('click', (e:Event)=>{\r\n        // Fecha actual\r\n        const hoy = new Date();\r\n        // Día anterior\r\n        const ayer = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate() - 1);\r\n        // Inicio y fin del día anterior\r\n        const inicioAyer = new Date(ayer.getFullYear(), ayer.getMonth(), ayer.getDate(), 0, 0, 0);\r\n        const finAyer = new Date(ayer.getFullYear(), ayer.getMonth(), ayer.getDate(), 23, 59, 59);\r\n        const fechainiciobtn:string = formatoFecha(inicioAyer);\r\n        const fechafinbtn:string = formatoFecha(finAyer);\r\n        callApiVentasXCliente(fechainiciobtn, fechafinbtn);\r\n    });\r\n\r\n    function formatoFecha(fecha: Date): string {\r\n        const año = fecha.getFullYear();\r\n        const mes = String(fecha.getMonth() + 1).padStart(2, \"0\");\r\n        const dia = String(fecha.getDate()).padStart(2, \"0\");\r\n        const hora = String(fecha.getHours()).padStart(2, \"0\");\r\n        const minuto = String(fecha.getMinutes()).padStart(2, \"0\");\r\n        const segundo = String(fecha.getSeconds()).padStart(2, \"0\");\r\n        return `${año}-${mes}-${dia} ${hora}:${minuto}:${segundo}`;\r\n    }\r\n\r\n\r\n    ////// consulta por fecha personalizada\r\n    consultarFechaPersonalizada.addEventListener('click', ()=>{\r\n      if(fechainicio == '' || fechafin == ''){\r\n         msjalertToast('error', '¡Error!', \"Elegir fechas a consultar\");\r\n         return;\r\n      }\r\n      callApiVentasXCliente(fechainicio, fechafin);\r\n    });\r\n\r\n    async function callApiVentasXCliente(dateinicio:string, datefin:string){\r\n        console.log(dateinicio, datefin);\r\n        (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"grid\";\r\n        const datos = new FormData();\r\n        datos.append('fechainicio', dateinicio);\r\n        datos.append('fechafin', datefin);\r\n        try {\r\n            const url = \"/admin/api/ventasxcliente\"; //llama a la api que esta en reportescontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            datosVentaXCliente = resultado;\r\n            printTableVentasXCliente();\r\n           (document.querySelector('.content-spinner1') as HTMLElement).style.display = \"none\";\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n\r\n    printTableVentasXCliente();\r\n    function printTableVentasXCliente(){\r\n        tablaVentasXCliente = ($('#tablaVentasXCliente') as any).DataTable({\r\n            destroy: true, // importante si recargas la tabla\r\n            data: datosVentaXCliente,\r\n            columns: [{title: 'Nombre', data: 'nombre'}, {title: 'Cantidad_facturas', data: 'cantidad_facturas'}, {title: 'Total ventas', data: 'total_ventas'}],\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n})();","\r\n(()=>{\r\n    if(document.querySelector('.paginadorventas')){\r\n\r\n      const filtrocategorias = document.querySelectorAll('.filtrocategorias');  //los btns de las categorias\r\n\r\n      var options = {\r\n        valueNames: [ 'card-producto', { data: ['categoria', 'code'] }],\r\n        page: 18,\r\n        pagination: true,\r\n      };\r\n      var hackerList = new List('hacker-list', options);\r\n\r\n      filtrocategorias.forEach(element => {\r\n        element.addEventListener('click', (e)=>{\r\n          const categoria:string = (e.target as HTMLElement).dataset.categoria!;\r\n          hackerList.filter((item: any)=>{\r\n            if(categoria === 'Todos')return true;\r\n            return item.values().categoria === categoria}\r\n          );\r\n        });\r\n      });\r\n\r\n\r\n\r\n      const btnCarritoMovil = document.querySelector('#btnCarritoMovil') as HTMLButtonElement; //btn para abrir el modal del carrito de ventas en movil\r\n      const contenidocarrito = document.getElementById('contenidocarrito') as HTMLElement;\r\n      const contenedorDesktop = document.getElementById('contenedorDesktop') as HTMLDivElement;\r\n      const miDialogoCarritoMovil = document.getElementById('miDialogoCarritoMovil') as HTMLDialogElement;\r\n      const btnCerrarCarritoMovil = document.querySelector('#btnCerrarCarritoMovil') as HTMLButtonElement;\r\n      const screenWidth:number = window.innerWidth;\r\n\r\n      if(screenWidth<992)miDialogoCarritoMovil.appendChild(contenidocarrito);\r\n\r\n      window.addEventListener('resize', ()=>{\r\n        if (window.innerWidth >= 992) {\r\n          contenedorDesktop.appendChild(contenidocarrito);\r\n          miDialogoCarritoMovil.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        } else {\r\n          miDialogoCarritoMovil.appendChild(contenidocarrito);\r\n        }\r\n      });\r\n\r\n      // btn para abrir el carrito de ventas en movil\r\n      btnCarritoMovil?.addEventListener('click', (e)=>{\r\n        miDialogoCarritoMovil.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n\r\n      btnCerrarCarritoMovil.addEventListener('click', ()=>{\r\n        miDialogoCarritoMovil.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n      });\r\n\r\n      function cerrarDialogoExterno(event:Event) {\r\n        const f = event.target;\r\n        if (f === miDialogoCarritoMovil ) {\r\n          miDialogoCarritoMovil.close();\r\n          document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n\r\n})();","(()=>{\r\n  if(document.querySelector('.ventas')){\r\n    const btnAddCliente = document.querySelector('#addcliente') as HTMLElement;\r\n    const btnAddDir = document.querySelector('#adddir') as HTMLElement;\r\n    const selectCliente = document.querySelector('#selectCliente') as HTMLSelectElement;\r\n    const dirEntrega = document.querySelector('#direccionEntrega')! as HTMLSelectElement;\r\n    const facturarA = document.querySelector('#facturarA') as HTMLButtonElement;\r\n    const productos = document.querySelectorAll<HTMLElement>('#producto')!;\r\n    const contentproducts = document.querySelector('#productos');\r\n    const btnotros = document.querySelector('#btnotros') as HTMLButtonElement;  //btn de otros\r\n    const btndescuento = document.querySelector('#btndescuento') as HTMLButtonElement;\r\n    const btnEntrega = document.querySelector('#btnEntrega');\r\n    const modalidadEntrega = document.querySelector('#modalidadEntrega') as HTMLElement;\r\n    const totalunidades = document.querySelector('#totalunidades') as HTMLElement;\r\n    const tablaventa = document.querySelector('#tablaventa tbody');\r\n    const btnvaciar = document.querySelector('#btnvaciar');\r\n    const btnguardar = document.querySelector('#btnguardar');\r\n    const btnfacturar = document.querySelector('#btnfacturar');\r\n    const miDialogoAddCliente = document.querySelector('#miDialogoAddCliente') as any;\r\n    const miDialogoAddDir = document.querySelector('#miDialogoAddDir') as any;\r\n    const miDialogoOtrosProductos = document.querySelector('#miDialogoOtrosProductos') as any;\r\n    const miDialogoFacturarA = document.querySelector('#miDialogoFacturarA') as any;\r\n    const miDialogoDescuento = document.querySelector('#miDialogoDescuento') as any;\r\n    const miDialogoVaciar = document.querySelector('#miDialogoVaciar') as any;\r\n    const miDialogoGuardar = document.querySelector('#miDialogoGuardar') as any;\r\n    const miDialogoFacturar = document.querySelector('#miDialogoFacturar') as any;\r\n    const btnCaja = document.querySelector('#caja') as HTMLSelectElement; //select de la caja en el modal pagar\r\n    const btnTipoFacturador = document.querySelector('#facturador') as HTMLSelectElement; //select del consecutivo o facturador en el modal de pago\r\n    const mediospago = document.querySelectorAll('.mediopago');\r\n    const tipoDescts = document.querySelectorAll<HTMLInputElement>('input[name=\"tipodescuento\"]'); //radio buttom\r\n    const inputDescuento = document.querySelector('#inputDescuento') as HTMLInputElement;\r\n    \r\n    let carrito:{id:string, idproducto:string, tipoproducto:string, tipoproduccion:string, idcategoria: string, foto:string, nombreproducto: string, rendimientoestandar:string, valorunidad: string, cantidad: number, subtotal: number, base:number, impuesto:string, valorimp:number, descuento:number, total: number}[]=[];\r\n    const valorTotal = {subtotal: 0, base: 0, valorimpuestototal: 0, dctox100: 0, descuento: 0, idtarifa: 0, valortarifa: 0, total: 0}; //datos global de la venta\r\n    let tarifas:{id:string, idcliente:string, nombre:string, valor:string}[] = [];\r\n    let nombretarifa:string|undefined='', valorMax = 0;\r\n    \r\n    const constImp: {[key:string]: number} = {};\r\n    constImp['excluido'] = 0;\r\n    constImp['0'] = 0;  //exento de iva, tarifa 0%\r\n    constImp['5'] = 0.0476190476190476; //iva, tarifa al 5%,  Bienes/servicios al 5\r\n    constImp['8'] = 0.0740740740740741; //inc, tarifa al 8%,  impuesto nacional al consumo\r\n    constImp['16'] = 0.1379310344827586; //iva, tarifa al 16%,  contratos firmados con el estado antes de ley 1819\r\n    constImp['19'] = 0.1596638655462185; //iva, tarifa al 19%,  tarifa general\r\n\r\n    interface Item {\r\n      id_impuesto: number,\r\n      facturaid: number,\r\n      basegravable: number,\r\n      valorimpuesto: number\r\n    }\r\n    let factimpuestos:Item[] = [];\r\n\r\n    let otrosproductos:{id:number, nombre:string, cantidad:number, valorunidad:number, total:number}={\r\n      id: 0,\r\n      nombre: '',\r\n      cantidad: 0,\r\n      valorunidad: 0,\r\n      total: 0\r\n    }\r\n\r\n    type productsapi = {\r\n      id:string,\r\n      idcategoria: string,\r\n      idunidadmedida: string,\r\n      nombre: string,\r\n      foto: string,\r\n      impuesto: string,  //porcentaje(%) de impuesto\r\n      marca: string,\r\n      tipoproducto: string, // 0 = simple,  1 = compuesto\r\n      tipoproduccion: string, //0 = inmediato, 1 = construccion (aplica para productos compuestos)\r\n      codigo: string,\r\n      unidadmedida: string,\r\n      descripcion: string,\r\n      peso: string,\r\n      medidas: string,\r\n      color: string,\r\n      funcion: string,\r\n      uso:string,\r\n      fabricante: string,\r\n      garantia: string,\r\n      stock: string,\r\n      stockminimo: string,\r\n      categoria: string,\r\n      rendimientoestandar: string,\r\n      precio_compra: string,\r\n      precio_venta: string,\r\n      fecha_ingreso: string,\r\n      estado: string,\r\n      visible: string,\r\n      //idservicios:{idempleado:string, idservicio:string}[]\r\n    };\r\n    \r\n\r\n    let products:productsapi[]=[], unproducto:productsapi;\r\n    const mapMediospago = new Map();\r\n\r\n    (async ()=>{\r\n      try {\r\n          const url = \"/admin/api/allproducts\"; //llamado a la API REST\r\n          const respuesta = await fetch(url); \r\n          products = await respuesta.json(); \r\n          console.log(products);\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n    })();\r\n\r\n    /*productos.forEach(producto=>{\r\n      producto.addEventListener('click', (e)=>{\r\n        console.log(producto.dataset.id);\r\n      });\r\n    });*/\r\n\r\n    /////select 2 a btn selectCliente\r\n    //selectCliente.select2  multiple=\"multiple\" maximumSelectionLength: 1,\r\n    ($('#selectCliente') as any).select2();\r\n\r\n\r\n    /******** Obtener datos de factura guardada o cotizacion***********/\r\n    \r\n    \r\n\r\n\r\n                       /******** *********/\r\n\r\n    selectFacturadorSegunCaja(btnCaja);\r\n    \r\n    btnCaja.addEventListener('change', (e:Event)=>selectFacturadorSegunCaja(e.target as HTMLSelectElement));\r\n    \r\n    function selectFacturadorSegunCaja(z:HTMLSelectElement){\r\n      $('#facturador').val(z.options[z.selectedIndex].dataset.idfacturador??'1');\r\n    }\r\n\r\n    //////////// evento al boton añadir cliente nuevo //////////////\r\n    btnAddCliente?.addEventListener('click', (e)=>{\r\n      miDialogoAddCliente.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n    //////////// evento al boton añadir nueva direccion //////////////\r\n    btnAddDir?.addEventListener('click', (e)=>{\r\n      miDialogoAddDir.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n    //////////// evento al btn submit del formulario add nuevo cliente //////////////\r\n    document.querySelector('#formAddCliente')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      (async ()=>{\r\n        const datos = new FormData();\r\n        datos.append('nombre', (document.querySelector('#nombreclientenuevo') as HTMLInputElement).value);\r\n        datos.append('apellido', (document.querySelector('#clientenuevoapellido') as HTMLInputElement).value);\r\n        datos.append('tipodocumento', (document.querySelector('#tipodocumento') as HTMLInputElement).value);\r\n        datos.append('identificacion', (document.querySelector('#identificacion') as HTMLInputElement).value);\r\n        datos.append('telefono', (document.querySelector('#telefono') as HTMLInputElement).value);\r\n        datos.append('email', (document.querySelector('#clientenuevoemail') as HTMLInputElement).value);\r\n        datos.append('idtarifa', (document.querySelector('#clientenuevotarifa') as HTMLSelectElement).value);\r\n        datos.append('direccion', (document.querySelector('#clientenuevodireccion') as HTMLInputElement).value);\r\n        datos.append('departamento', (document.querySelector('#departamento') as HTMLInputElement).value);\r\n        datos.append('ciudad', (document.querySelector('#ciudad') as HTMLInputElement).value);\r\n        try {\r\n            const url = \"/admin/api/apiCrearCliente\";\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              addClienteSelect(resultado.nextID);\r\n              limpiarformdialog();\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      miDialogoAddCliente.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n    /////////////// añadir cliente al select despues de crearse ///////////////////\r\n    function addClienteSelect(clienteID:string): void{\r\n      const option = document.createElement('option');\r\n      option.textContent = (document.querySelector('#nombreclientenuevo') as HTMLInputElement).value + \" \" + (document.querySelector('#clientenuevoapellido') as HTMLInputElement).value;\r\n      option.value = clienteID;\r\n      option.dataset.tipodocumento = (document.querySelector('#tipodocumento') as HTMLInputElement).value;\r\n      option.dataset.identidad = (document.querySelector('#identificacion') as HTMLInputElement).value;\r\n      selectCliente?.appendChild(option);\r\n      $('#selectCliente').val(clienteID).trigger('change'); // seleccionar el cliente nuevo, en el select y dispara evento\r\n    }\r\n    //evento 'cambio' al selecionar cliente, tambien se ejecuta cuando se crea cliente nuevo//\r\n    $(\"#selectCliente\").on('change', (e)=>{\r\n      const idcli = (e.target as HTMLInputElement).value;\r\n      (async ()=>{\r\n        try {\r\n          const url = \"/admin/api/direccionesXcliente?id=\"+idcli; //llamado a la API REST y se trae las direcciones segun cliente elegido\r\n          const respuesta = await fetch(url); \r\n          const resultado = await respuesta.json(); \r\n          addDireccionSelect(resultado);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      const select = (e.target as HTMLSelectElement);\r\n      const x:string = select.options[select.selectedIndex].dataset.identidad||'';\r\n      (document.querySelector('#documento') as HTMLInputElement).value = x;\r\n    });\r\n    ////// añade direccion al select de direcciones, cuando se selecciona o se agrega un cliente o si se agrega un nueva direccion/////\r\n    function addDireccionSelect<T extends {id:string, idcliente:string, idtarifa:string, tarifa:{id:string, idcliente:string, nombre:string, valor:string}, direccion:string, ciudad:string}>(addrs: T[]):void{\r\n      while(dirEntrega?.firstChild)dirEntrega.removeChild(dirEntrega?.firstChild);\r\n      const setTarifas = new Set();\r\n      tarifas.length = 0;\r\n      console.log(addrs);\r\n      addrs.forEach(dir =>{\r\n        const option = document.createElement('option');\r\n        option.textContent = dir.direccion;\r\n        option.value = dir.id;\r\n        option.dataset.idcliente = dir.idcliente;\r\n        option.dataset.idtarifa = dir.idtarifa;\r\n        option.dataset.ciudad = dir.ciudad;\r\n        dirEntrega.appendChild(option);\r\n        dir.tarifa.idcliente = dir.idcliente;\r\n        if(!setTarifas.has(dir.tarifa.id)){\r\n          tarifas = [...tarifas, dir.tarifa];\r\n          setTarifas.add(dir.tarifa.id);\r\n        }\r\n      });\r\n      setTarifas.clear();\r\n      printTarifaEnvio();\r\n      valorCarritoTotal();\r\n      (document.querySelector('#ciudadEntrega') as HTMLInputElement).value = addrs[0]?.ciudad??'No especificado';\r\n    }\r\n    ///////// Evento al select de direcciones ////////////\r\n    dirEntrega?.addEventListener('change', (e)=>{\r\n      const select = (e.target as HTMLSelectElement);\r\n      const x:string = select.options[select.selectedIndex].dataset.ciudad||'';\r\n      (document.querySelector('#ciudadEntrega') as HTMLInputElement).value = x;\r\n      printTarifaEnvio();\r\n      valorCarritoTotal();\r\n    });\r\n\r\n    ////////////////// evento al btn submit del formulario add direccion //////////////////////\r\n    document.querySelector('#formAddDir')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      (async ()=>{\r\n        const datos = new FormData();\r\n        datos.append('idcliente', selectCliente.value);\r\n        datos.append('departamento', (document.querySelector('#adddepartamento') as HTMLInputElement).value);\r\n        datos.append('ciudad', (document.querySelector('#addciudad') as HTMLInputElement).value);\r\n        datos.append('direccion', (document.querySelector('#adddireccion') as HTMLInputElement).value);\r\n        datos.append('idtarifa', (document.querySelector('#tarifa') as HTMLSelectElement).value);\r\n        try {\r\n            const url = \"/admin/api/addDireccionCliente\";  //direccionescontrolador\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              addDireccionSelect(resultado.direcciones);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n      miDialogoAddDir.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n\r\n    //////////// evento al boton modalidad de entrega //////////////\r\n    btnEntrega?.addEventListener('click', (e:Event)=>{\r\n      modalidadEntrega.textContent == \": Presencial\"?modalidadEntrega.textContent = \": Domicilio\":modalidadEntrega.textContent=\": Presencial\";\r\n      printTarifaEnvio();\r\n      valorCarritoTotal();\r\n    });\r\n\r\n    ///////// funcion que imprime el valor de la tarifa segun direccion ///////////\r\n    function printTarifaEnvio():void{\r\n      const selectDir = dirEntrega.options[dirEntrega.selectedIndex];\r\n      if(modalidadEntrega.textContent == \": Presencial\" || dirEntrega.selectedIndex == -1){\r\n        valorTotal.valortarifa = 0;\r\n        nombretarifa = '';\r\n        return;\r\n      }\r\n      if(selectDir?.dataset.idtarifa && modalidadEntrega.textContent == \": Domicilio\"){\r\n        const objtarifa = tarifas.find(tarifa =>{\r\n          if(tarifa.idcliente == selectDir.dataset.idcliente && tarifa.id == selectDir.dataset.idtarifa)\r\n            return true;\r\n        });\r\n        valorTotal.valortarifa = Number(objtarifa?.valor);\r\n        valorTotal.idtarifa = Number(objtarifa?.id);\r\n        nombretarifa = objtarifa?.nombre;\r\n      }\r\n    }\r\n\r\n    ///////////////////// evento al btn facturar A /////////////////////\r\n    facturarA.addEventListener('click', (e:Event)=>{\r\n      miDialogoFacturarA.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    ///////////////////// Evento al btn Otros /////////////////////////\r\n    btnotros.addEventListener('click', (e:Event)=>{\r\n      miDialogoOtrosProductos.showModal();\r\n      document.addEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    /////////////////////Evento al formulario de agregar otros productos //////////////////////\r\n    document.querySelector('#formOtrosProductos')?.addEventListener('submit', (e:Event)=>{\r\n      e.preventDefault();\r\n      const formelements = (e.target as HTMLFormElement).elements;\r\n      const cantidadotros = Number((formelements.namedItem('cantidadotros') as HTMLInputElement).value);\r\n      const preciootros = Number((formelements.namedItem('preciootros') as HTMLInputElement).value);\r\n      \r\n      otrosproductos!.id += -1 ;\r\n      otrosproductos!.nombre = (formelements.namedItem('nombreotros') as HTMLInputElement).value;\r\n      otrosproductos!.cantidad = cantidadotros;\r\n      otrosproductos!.valorunidad = preciootros/cantidadotros;\r\n      otrosproductos!.total = preciootros;\r\n      \r\n      products = [...products, {\r\n        id: otrosproductos!.id+'', \r\n        idcategoria: '-1',\r\n        idunidadmedida: '1',\r\n        nombre: otrosproductos!.nombre,\r\n        foto: 'na',\r\n        impuesto: '0', //impuesto en %\r\n        marca: 'na',\r\n        tipoproducto: '-1', // 0 = simple,  1 = compuesto\r\n        tipoproduccion: '-1', //0 = inmediato, 1 = construccion\r\n        codigo: '-1',\r\n        unidadmedida: 'Unidad',\r\n        descripcion: 'na',\r\n        peso: 'na',\r\n        medidas: 'na',\r\n        color: 'na',\r\n        funcion: 'na',\r\n        uso: 'na',\r\n        fabricante: 'na',\r\n        garantia: 'na',\r\n        stock: '0',\r\n        stockminimo: '1',\r\n        categoria: 'na',\r\n        rendimientoestandar: '1',\r\n        precio_compra: 'na',\r\n        precio_venta: otrosproductos!.valorunidad+'',\r\n        fecha_ingreso: '',\r\n        estado: '1',\r\n        visible: '1'\r\n      }];\r\n\r\n      actualizarCarrito(otrosproductos.id+'', cantidadotros, false, false);\r\n      miDialogoOtrosProductos.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n    //////////// evento a toda el area de los productos a seleccionar //////////////\r\n    contentproducts?.addEventListener('click', (e:Event)=>{\r\n      const elementProduct = (e.target as HTMLElement)?.closest('.producto');\r\n      const count = carrito.find(x=>x.idproducto == (elementProduct as HTMLElement).dataset.id);\r\n\r\n      if(window.innerWidth < 992){\r\n        // Crear popup\r\n        const popup = document.createElement('div');\r\n        popup.className = `popup absolute z-40 right-8 top-1/3 opacity-0 translate-x-0 translate-y-0 transition-all duration-500 w-10 h-10 rounded-full text-center grid place-items-center bg-teal-400 text-white font-semibold text-lg`;\r\n        popup.innerHTML = `${(count?.cantidad??0)+1}`;\r\n        elementProduct!.appendChild(popup);\r\n        // Forzar reflow para activar transición\r\n        requestAnimationFrame(() => {\r\n          popup.classList.remove(\"opacity-0\", \"translate-y-0\", \"translate-x-0\");\r\n          popup.classList.add(\"opacity-100\", \"-translate-y-14\", \"translate-x-10\");\r\n        });\r\n        const popupx = document.querySelectorAll('.popup');\r\n        setTimeout(() => {popupx.forEach(t=>{t.remove();});}, 2500);\r\n      }\r\n\r\n      if(elementProduct)\r\n        actualizarCarrito((elementProduct as HTMLElement).dataset.id!, 1, true, true);\r\n    });\r\n\r\n    function printProduct(id:string){ //recibe el id del producto\r\n      const uncarrito = carrito.find(x=>x.idproducto==id)!;\r\n      const tr = document.createElement('TR');\r\n      tr.classList.add('productselect');\r\n      tr.dataset.id = `${id}`;\r\n      tr.insertAdjacentHTML('afterbegin', `<td class=\"!px-0 !py-2 text-xl text-gray-500 leading-5\">${uncarrito?.nombreproducto}</td> \r\n\r\n      <td class=\"!px-0 !py-2\">\r\n        <div class=\"flex items-center gap-2 px-4\">\r\n          <button type=\"button\" class=\"w-8 h-8 bg-indigo-700 text-white rounded-full flex items-center justify-center\">\r\n            <span class=\"menos material-symbols-outlined text-base\">remove</span>\r\n          </button>\r\n\r\n          <input type=\"text\" class=\"inputcantidad w-20 px-2 text-center\" value=\"${uncarrito.cantidad}\"\r\n            >\r\n\r\n          <button type=\"button\" class=\"w-8 h-8 bg-indigo-700 text-white rounded-full flex items-center justify-center\">\r\n            <span class=\"mas material-symbols-outlined text-base\">add</span>\r\n          </button>\r\n        </div>\r\n      </td>\r\n\r\n\r\n      <td class=\"!p-2 text-xl text-gray-500 leading-5\">$${Number(uncarrito?.valorunidad).toLocaleString()}</td>\r\n      <td class=\"!p-2 text-xl text-gray-500 leading-5\">$${Number(uncarrito?.total).toLocaleString()}</td>\r\n      <td class=\"accionestd\"><div class=\"acciones-btns\"><button class=\"btn-md btn-red eliminarProducto\"><i class=\"fa-solid fa-trash-can\"></i></button></div></td>`);\r\n      tablaventa?.appendChild(tr);\r\n    } //oninput=\"this.value = parseInt(this.value.replace(/[,.]/g, '')||1)\"\r\n\r\n\r\n    function actualizarCarrito(id:string, cantidad:number, control:boolean, stateinput:boolean){\r\n      const index = carrito.findIndex(x=>x.idproducto==id); //devuelve el index si el producto existe\r\n      \r\n      if(index>-1){\r\n        if(cantidad <= 0){\r\n          cantidad = 0;\r\n          carrito[index].total = 0;\r\n        }\r\n        if(control){ //cuando el producto se agrega desde la lista de productos\r\n          carrito[index].cantidad += cantidad;\r\n        }else{ //cuando el producto se agrega por cantidad\r\n          carrito[index].cantidad = cantidad;\r\n        }\r\n       \r\n        \r\n        carrito[index].subtotal = parseInt(carrito[index].valorunidad)*carrito[index].cantidad;\r\n        carrito[index].total = carrito[index].subtotal;\r\n        //calculo del impuesto y base por producto en el carrito deventas\r\n        carrito[index].valorimp = parseFloat((carrito[index].total*constImp[carrito[index].impuesto??0]).toFixed(3));\r\n        carrito[index].base = parseFloat((carrito[index].total-carrito[index].valorimp).toFixed(3));\r\n\r\n        valorCarritoTotal();\r\n        if(stateinput)\r\n        (tablaventa?.querySelector(`TR[data-id=\"${id}\"] .inputcantidad`) as HTMLInputElement).value = carrito[index].cantidad+'';\r\n        (tablaventa?.querySelector(`TR[data-id=\"${id}\"]`)?.children?.[3] as HTMLElement).textContent = \"$\"+carrito[index].total.toLocaleString();\r\n      }else{  //agregar a carrito si el producto no esta agregado en carrito, cuando se agrega por primera vez\r\n        const producto = products.find(x=>x.id==id)!; //products es el arreglo de todos los productos traido por api\r\n        \r\n        const productovalorimp = (Number(producto.precio_venta)*cantidad)*constImp[producto.impuesto??'0']; //si producto.impuesto es null toma el valor de cero\r\n        const productototal = Number(producto.precio_venta)*cantidad;\r\n        \r\n        var a:{id:string, idproducto:string, tipoproducto:string, tipoproduccion:string, idcategoria: string, nombreproducto: string, rendimientoestandar:string, foto:string, valorunidad: string, cantidad: number, subtotal: number, base:number, impuesto:string, valorimp:number, descuento:number, total:number} = {\r\n          id: '',\r\n          idproducto: producto?.id!,\r\n          tipoproducto: producto.tipoproducto,\r\n          tipoproduccion: producto.tipoproduccion,\r\n          idcategoria: producto.idcategoria,\r\n          nombreproducto: producto.nombre,\r\n          rendimientoestandar: producto.rendimientoestandar,\r\n          foto: producto.foto,\r\n          valorunidad: producto.precio_venta,\r\n          cantidad: cantidad,\r\n          subtotal: productototal, //este es el subtotal del producto\r\n          base: productototal-productovalorimp,\r\n          impuesto: producto.impuesto, //porcentaje de impuesto, es null si es excluido de iva\r\n          valorimp: productovalorimp,\r\n          descuento: 0,\r\n          total: productototal //valorunidad x cantidad\r\n        }\r\n        \r\n        carrito = [...carrito, a];\r\n        valorCarritoTotal();\r\n        printProduct(id);\r\n      }\r\n    }\r\n\r\n    ////////////////////// valores finales subtotal y total ////////////////////////\r\n    function valorCarritoTotal(){\r\n      //calcular el impuesto discriminado por tarifa\r\n     \r\n      const idimpuesto: Record<string, number> = {'0': 1, '5': 2, '16': 3, '19': 4, 'excluido': 5, '8': 6 };\r\n      const objbase:{'0':number, '5':number, '16':number, '19':number, 'excluido':number, '8':number} = {'0': 0, '5': 0, '16': 0, '19': 0, 'excluido':0, '8': 0};\r\n\r\n      const mapImpuesto = new Map();\r\n      carrito.forEach(x=>{\r\n        if(x.impuesto){\r\n          if(mapImpuesto.has(x.impuesto)){\r\n            const valor = mapImpuesto.get(x.impuesto) + x.total*constImp[x.impuesto];\r\n            mapImpuesto.set(x.impuesto, valor);\r\n          }else{\r\n            mapImpuesto.set(x.impuesto, x.total*constImp[x.impuesto]);\r\n          }\r\n        }\r\n        if(x.impuesto == null)x.impuesto = \"excluido\";\r\n          objbase[x.impuesto as keyof typeof objbase] += x.base;\r\n          const impValor = mapImpuesto.get(x.impuesto)??0;\r\n          const index = factimpuestos.findIndex(Obj=>Obj.id_impuesto == idimpuesto[x.impuesto]);\r\n          if(index!=-1){ //si existe remplazar obj\r\n            factimpuestos[index] = {id_impuesto:idimpuesto[x.impuesto], facturaid:0, basegravable:objbase[x.impuesto as keyof typeof objbase], valorimpuesto: impValor};\r\n          }else{\r\n            factimpuestos = [...factimpuestos, {id_impuesto:idimpuesto[x.impuesto], facturaid:0, basegravable:objbase[x.impuesto as keyof typeof objbase], valorimpuesto: impValor}];\r\n          }\r\n        \r\n      });\r\n\r\n     \r\n      //Valor del impuesto total de todos los productos, es decir de la factura;\r\n      let valorTotalImp:number = 0;\r\n      for(let valorImp of mapImpuesto.values())valorTotalImp += valorImp;\r\n      \r\n      valorTotal.valorimpuestototal = parseFloat(valorTotalImp.toFixed(3));  //valor del impuesto total factura de todos los productos\r\n\r\n      valorTotal.subtotal = carrito.reduce((total, x)=>x.total+total, 0);\r\n      valorTotal.base = valorTotal.subtotal - valorTotal.valorimpuestototal;  //valor de la base total factura de todos los productos\r\n      valorTotal.total = valorTotal.subtotal + valorTotal.valortarifa - valorTotal.descuento;\r\n      document.querySelector('#subTotal')!.textContent = '$'+valorTotal.subtotal.toLocaleString();\r\n       (document.querySelector('#impuesto') as HTMLElement).textContent = '$'+valorTotalImp.toLocaleString('es-CO', {minimumFractionDigits: 2, maximumFractionDigits: 2});\r\n      (document.querySelector('#valorTarifa') as HTMLElement).textContent = '$'+valorTotal.valortarifa.toLocaleString();\r\n      document.querySelector('#total')!.textContent = '$ '+valorTotal.total.toLocaleString();\r\n      // cantidad total de productos\r\n      totalunidades.textContent = carrito.reduce((total, producto)=>producto.cantidad+total, 0)+'';\r\n    }\r\n\r\n    //////////////////////////////////// evento a la tabla de productos de venta ///////////////////////////////////\r\n    tablaventa?.addEventListener('click', (e:Event)=>{\r\n      const elementProduct = (e.target as HTMLElement)?.closest('.productselect');\r\n      const idProduct = (elementProduct as HTMLElement).dataset.id!;\r\n      if((e.target as HTMLElement).classList.contains('menos')){\r\n        const productoCarrito = carrito.find(x=>x.idproducto==idProduct);\r\n        actualizarCarrito(idProduct, productoCarrito!.cantidad-1, false, true);\r\n      }\r\n      if((e.target as HTMLElement).classList.contains('inputcantidad')){\r\n        if((e.target as HTMLElement).dataset.event != \"eventInput\"){\r\n          e.target?.addEventListener('input', (e)=>{\r\n           \r\n            let val = (e.target as HTMLInputElement).value;\r\n            val = val.replace(/[^0-9.]/g, '');\r\n            const partes = val.split('.');\r\n            if(partes.length > 2)val = partes[0]+'.'+partes.slice(1).join('');\r\n            if (val.startsWith('.'))val = '1';\r\n            if (val === '' || isNaN(parseFloat(val))) val = '0';\r\n\r\n            (e.target as HTMLInputElement).value = val;\r\n            actualizarCarrito(idProduct, Number((e.target as HTMLInputElement).value), false, false);\r\n          });\r\n          (e.target as HTMLElement).dataset.event = \"eventInput\"; //se marca al input que ya tiene evento añadido\r\n        }\r\n      }\r\n      if((e.target as HTMLElement).classList.contains('mas')){\r\n        const productoCarrito = carrito.find(x=>x.idproducto==idProduct);\r\n        actualizarCarrito(idProduct, productoCarrito!.cantidad+1, false, true);\r\n      }\r\n      if((e.target as HTMLElement).classList.contains('eliminarProducto') || (e.target as HTMLElement).tagName == \"I\"){\r\n        carrito = carrito.filter(x=>x.idproducto != idProduct);\r\n        valorCarritoTotal();\r\n        tablaventa?.querySelector(`TR[data-id=\"${idProduct}\"]`)?.remove();\r\n      }\r\n    });\r\n\r\n    /////////////////btns descuento, vaciar, guardar y facturar /////////////////\r\n\r\n    btndescuento?.addEventListener('click', ()=>{\r\n      if(carrito.length){\r\n        valorMax = valorTotal.subtotal;\r\n        //validar que si al reducir los productos o aumentar recalcular el porcentaje\r\n        miDialogoDescuento.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    });\r\n\r\n    btnvaciar?.addEventListener('click', ()=>{\r\n      if(carrito.length){\r\n        miDialogoVaciar.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    });\r\n\r\n    btnguardar?.addEventListener('click', ()=>{\r\n      if(carrito.length){\r\n        miDialogoGuardar.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    });\r\n\r\n    btnfacturar?.addEventListener('click', ()=>{\r\n        if(modalidadEntrega.textContent === \": Domicilio\" && (selectCliente.value =='1' || selectCliente.value =='2' || !dirEntrega.value)){\r\n          msjAlert('error', 'Cliente o direccion no seleccionado', (document.querySelector('#divmsjalerta1') as HTMLElement));\r\n          return;\r\n        }\r\n      if(carrito.length){\r\n        subirModalPagar();\r\n        miDialogoFacturar.showModal();\r\n        document.addEventListener(\"click\", cerrarDialogoExterno);\r\n      }\r\n    });\r\n\r\n  /////////////////////  logica del descuento  //////////////////////////\r\n    tipoDescts.forEach(desc=>{ //evento a los radiobutton\r\n      desc.addEventListener('change', (e:Event)=>{\r\n        if((e.target as HTMLInputElement).value === \"porcentaje\"){\r\n          valorMax = 100;\r\n          inputDescuento.value = '';\r\n        }\r\n        if((e.target as HTMLInputElement).value === \"valor\"){\r\n          inputDescuento.value = '';\r\n          valorMax = valorTotal.subtotal;\r\n        }\r\n      });\r\n    });\r\n\r\n    inputDescuento?.addEventListener('input', (e)=>{\r\n      var valorInput:number = Number((e.target as HTMLInputElement).value);\r\n      if(valorInput > valorMax){\r\n        inputDescuento.value = valorMax+'';\r\n        valorInput = valorMax; \r\n      }\r\n    });\r\n\r\n    document.querySelector('#formDescuento')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      const valorInput:number = Number(inputDescuento.value);\r\n      if(tipoDescts[0].checked){  //tipo valor\r\n        valorTotal.dctox100 = Math.round((valorInput*100)/valorTotal.subtotal);  // valor en porcentaje\r\n        valorTotal.descuento = valorInput;  //valor del dcto\r\n      }\r\n      if(tipoDescts[1].checked){ //tipo porcentaje\r\n        valorTotal.descuento = (valorTotal.subtotal*valorInput)/100;  //valor descontado\r\n        valorTotal.dctox100 = valorInput;  //valor en porcentaje\r\n      }\r\n      valorTotal.total = valorTotal.subtotal - valorTotal.descuento + valorTotal.valortarifa;\r\n      document.querySelector('#total')!.textContent = '$ '+valorTotal.total.toLocaleString();\r\n      (document.querySelector('#descuento') as HTMLElement).textContent = '$'+valorTotal.descuento.toLocaleString();\r\n      miDialogoDescuento.close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    });\r\n\r\n  /////////////////////  logica del modal de pago  //////////////////////////\r\n    function subirModalPagar(){\r\n      document.querySelector('#totalPagar')!.textContent = `${valorTotal.total.toLocaleString()}`;\r\n      //como se puede cerrar el modal y aumentar los productos, hay calcular los inputs\r\n      let totalotrosmedios = 0;\r\n      mediospago.forEach((item, index)=>{\r\n        if(index>0)totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n      });\r\n\r\n      if(valorTotal.total<totalotrosmedios){\r\n        totalotrosmedios = 0;\r\n        mapMediospago.clear();\r\n        $('.mediopago').val(0);\r\n      }\r\n      (document.querySelector('.Efectivo')! as HTMLInputElement).value =  `${(valorTotal.total-totalotrosmedios).toLocaleString()}`;\r\n      mapMediospago.set('1', valorTotal.total-totalotrosmedios); //inicialmente el valor total se establece para efectivo\r\n      if(valorTotal.total-totalotrosmedios == 0 && mapMediospago.has('1'))mapMediospago.delete('1');\r\n      calcularCambio(document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n    }\r\n    \r\n    //eventos a los inputs medios de pago\r\n    mediospago.forEach(m=>{m.addEventListener('input', (e)=>{ calcularmediospago(e);});}); \r\n\r\n    function calcularmediospago(e:Event){\r\n      let totalotrosmedios = 0;\r\n      mediospago.forEach((item, index)=>{ //sumar todos los medios de pago menos el efectivo\r\n        if(index>0)totalotrosmedios += parseInt((item as HTMLInputElement).value.replace(/[,.]/g, ''));\r\n      });\r\n      if(totalotrosmedios<=valorTotal.total){\r\n        mapMediospago.set('1', valorTotal.total-totalotrosmedios);\r\n        if(valorTotal.total-totalotrosmedios == 0 && mapMediospago.has('1'))mapMediospago.delete('1'); //se elimina medio de pago efectivo\r\n        mapMediospago.set((e.target as HTMLInputElement).id, parseInt((e.target as HTMLInputElement).value.replace(/[,.]/g, '')));\r\n        if((e.target as HTMLInputElement).value == '0' && mapMediospago.has((e.target as HTMLInputElement).id))mapMediospago.delete((e.target as HTMLInputElement).id);\r\n      }else{ //si la suma de los medios de pago superan el valor total, toma el ultimo input digitado y lo reestablece a su ultimo valor\r\n        if(mapMediospago.has((e.target as HTMLInputElement).id)){\r\n          (e.target as HTMLInputElement).value = mapMediospago.get((e.target as HTMLInputElement).id).toLocaleString();\r\n        }else{\r\n          (e.target as HTMLInputElement).value = '0';\r\n        }\r\n      }\r\n      (mediospago[0] as HTMLInputElement).value = (mapMediospago.get('1')??0).toLocaleString();  //medio de pago en efectivo\r\n      calcularCambio(document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n    }\r\n\r\n    /////////////////////  evento al input recibido  //////////////////////////\r\n    document.querySelector<HTMLInputElement>('#recibio')?.addEventListener('input', (e)=>{\r\n      calcularCambio((e.target as HTMLInputElement).value);\r\n    });\r\n\r\n    function calcularCambio(recibido:string):void{\r\n      recibido = recibido.replace(/[,.]/g, '');\r\n      if(Number(recibido)>mapMediospago.get('1')){\r\n        (document.querySelector('#cambio') as HTMLElement).textContent = (Number(recibido)-mapMediospago.get('1')).toLocaleString()+'';\r\n        return;\r\n      }\r\n      (document.querySelector('#cambio') as HTMLElement).textContent = '0';\r\n    }\r\n\r\n\r\n    function cerrarDialogoExterno(event:Event) {\r\n      const f = event.target;\r\n      if (f === miDialogoDescuento || f === miDialogoVaciar || f === miDialogoGuardar || f === miDialogoFacturar || f === miDialogoAddCliente || f === miDialogoOtrosProductos || f === miDialogoFacturarA || f === miDialogoAddDir || (f as HTMLInputElement).closest('.salir') || (f as HTMLInputElement).closest('.novaciar') || (f as HTMLInputElement).closest('.sivaciar') || (f as HTMLInputElement).closest('.noguardar') || (f as HTMLInputElement).closest('.siguardar') || (f as HTMLButtonElement).value == \"Cancelar\" ) {\r\n        miDialogoDescuento.close();\r\n        miDialogoVaciar.close();\r\n        miDialogoGuardar.close();\r\n        miDialogoFacturar.close();\r\n        miDialogoAddCliente.close();\r\n        miDialogoAddDir.close();\r\n        miDialogoFacturarA.close();\r\n        miDialogoOtrosProductos.close();\r\n        document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n        if((f as HTMLInputElement).closest('.siguardar'))procesarpedido('Guardado', '1');\r\n        if((f as HTMLInputElement).closest('.sivaciar'))vaciarventa();\r\n      }\r\n    }\r\n\r\n    function vaciarventa():void\r\n    {\r\n      if(datosfactura?.id)datosfactura.id = '';\r\n      mapMediospago.clear();\r\n      $('.mediopago').val(0);\r\n      carrito.length = 0;\r\n      factimpuestos.length = 0;\r\n      history.replaceState({}, \"\", \"/admin/ventas\");\r\n      while(tablaventa?.firstChild)tablaventa.removeChild(tablaventa?.firstChild);\r\n      (document.querySelector('#npedido') as HTMLInputElement).value = '';\r\n      document.querySelector('#subTotal')!.textContent = '$'+0;\r\n      (document.querySelector('#descuento') as HTMLElement).textContent = '$'+0;\r\n      document.querySelector('#total')!.textContent = '$'+0;\r\n      $('#selectCliente').val(1).trigger('change');   //aqui tambien se reinicia la elemento del valor de la tarifa\r\n      for(const key in valorTotal)valorTotal[key as keyof typeof valorTotal] = 0; //reiniciar objeto\r\n      \r\n    }\r\n\r\n\r\n    ////////////////// evento al bton pagar del modal facturar //////////////////////\r\n    document.querySelector('#formfacturar')?.addEventListener('submit', e=>{\r\n      e.preventDefault();\r\n      if(valorTotal.total <= 0 || valorTotal.subtotal <= 0){\r\n        msjAlert('error', 'No se puede procesar pago con $0', (document.querySelector('#divmsjalerta2') as HTMLElement));\r\n        return;\r\n      }\r\n      procesarpedido('Paga', '0');\r\n    });\r\n\r\n    async function procesarpedido(estado:string, ctz:string){\r\n      const imprimir = document.querySelector('input[name=\"imprimir\"]:checked') as HTMLInputElement;\r\n      const datos = new FormData();\r\n      datos.append('id', datosfactura?.id??'');\r\n      datos.append('idcliente', (document.querySelector('#selectCliente') as HTMLSelectElement).value);\r\n      datos.append('idvendedor', (document.querySelector('#vendedor') as HTMLInputElement).dataset.idvendedor!);\r\n      datos.append('idcaja', btnCaja.value);\r\n      datos.append('idconsecutivo', btnTipoFacturador.value);\r\n      datos.append('iddireccion', dirEntrega.value);\r\n      datos.append('idtarifazona', valorTotal.idtarifa+'');\r\n      datos.append('cliente', selectCliente.value=='1'?'N/A':selectCliente.options[selectCliente.selectedIndex].textContent!);\r\n      datos.append('vendedor', (document.querySelector('#vendedor') as HTMLInputElement).value);\r\n      datos.append('caja', (document.querySelector('#caja option:checked') as HTMLSelectElement).textContent!);\r\n      datos.append('tipofacturador', btnTipoFacturador.options[btnTipoFacturador.selectedIndex].textContent!);\r\n      datos.append('direccion', dirEntrega.options[dirEntrega.selectedIndex]?.text??'');\r\n      datos.append('tarifazona', nombretarifa||'');\r\n      datos.append('carrito', JSON.stringify(carrito.filter(x=>x.cantidad>0)));  //envio de todos los productos con sus cantidades\r\n      datos.append('totalunidades', totalunidades.textContent!);\r\n      //datos.append('mediosPago', JSON.stringify(Object.fromEntries(mapMediospago)));\r\n      datos.append('mediosPago', JSON.stringify(Array.from(mapMediospago, ([idmediopago, valor])=>({idmediopago, id_factura:0, valor}))));\r\n      datos.append('factimpuestos', JSON.stringify(factimpuestos));\r\n      datos.append('recibido', document.querySelector<HTMLInputElement>('#recibio')!.value);\r\n      datos.append('transaccion', '');\r\n      datos.append('cotizacion', ctz);  //1= cotizacion, 0 = no cotizacion pagada.\r\n      datos.append('estado', estado);\r\n      datos.append('subtotal', valorTotal.subtotal+'');\r\n      datos.append('base', valorTotal.base.toFixed(3));\r\n      datos.append('valorimpuestototal', valorTotal.valorimpuestototal+''); //valor total del impuesto. \r\n      datos.append('dctox100',valorTotal.dctox100+'');\r\n      datos.append('descuento',valorTotal.descuento+'');\r\n      datos.append('total', valorTotal.total.toString());\r\n      datos.append('observacion', document.querySelector<HTMLTextAreaElement>('#observacion')!.value);\r\n      datos.append('departamento', '');\r\n      datos.append('ciudad', (document.querySelector('#ciudadEntrega') as HTMLInputElement).value);\r\n      datos.append('entrega', modalidadEntrega.textContent!.replace(': ', ''));\r\n      datos.append('valortarifa', valorTotal.valortarifa+'');\r\n      datos.append('opc1', '');\r\n      datos.append('opc2', '');\r\n      try {\r\n          const url = \"/admin/api/facturar\";  //va al controlador ventascontrolador\r\n          const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n          const resultado = await respuesta.json();\r\n          console.log(resultado);\r\n          if(resultado.exito !== undefined){\r\n            msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            /////// reinciar modulo de ventas\r\n            vaciarventa();\r\n            if(resultado.idfactura && imprimir.value === '1')printTicketPOS(resultado.idfactura);\r\n          }else{\r\n            msjalertToast('error', '¡Error!', resultado.error[0]);\r\n          }\r\n      } catch (error) {\r\n          console.log(error);\r\n      }\r\n      miDialogoFacturar.close();\r\n      (document.getElementById('miDialogoCarritoMovil') as HTMLDialogElement).close();\r\n      document.removeEventListener(\"click\", cerrarDialogoExterno);\r\n    }\r\n\r\n\r\n    function printTicketPOS(idfactura:string){\r\n      setTimeout(() => {\r\n        window.open(\"/admin/printPDFPOS?id=\" + idfactura, \"_blank\");\r\n      }, 1200);\r\n    }\r\n\r\n    \r\n    /////////////////////////obtener datos de cotizacion /////////////////////\r\n    const parametrosURL = new URLSearchParams(window.location.search);\r\n    const id = parametrosURL.get('id');\r\n    let datosfactura:{id:string, idcliente: string, idvendedor:string, idcaja:string, idconsecutivo:string, iddireccion:string, idtarifazona:string, idcierrecaja:string, num_orden:string, cliente:string, vendedor:string, caja:string, tipofacturador:string, direccion:string, tarifazona:string, totalunidades:string, recibido:string, transaccion:string, tipoventa:string,\r\n                      cotizacion:string, estado:string, cambioaventa:string, referencia:string, subtotal:string, base:string, valorimpuestototal:string, dctox100:string, descuento:string, total:string, observacion:string, departamento:string, ciudad:string, entrega:string, valortarifa:string, fechacreacion:string, fechapago:string, opc1:string, opc2:string};\r\n    if(id){\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/getcotizacion_venta?id=\"+id; //llamado a la API REST\r\n            const respuesta = await fetch(url); \r\n            const resultado = await respuesta.json();\r\n            datosfactura = resultado.factura;\r\n            carrito = resultado.productos;\r\n            console.log(carrito);\r\n            carrito.forEach(item =>printProduct(item.idproducto));\r\n            valorCarritoTotal(); //recalcula impuestos de la cotizacion y valores totales\r\n            (document.querySelector('#npedido') as HTMLInputElement).value = datosfactura.num_orden;\r\n            $('#selectCliente').val(datosfactura.idcliente).trigger('change');\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    }\r\n\r\n    function limpiarformdialog(){\r\n      (document.querySelector('#formAddCliente') as HTMLFormElement)?.reset();\r\n    }\r\n  }\r\n\r\n})();\r\n","(function(){\r\n  if(document.querySelector('.contenedorsetup')){\r\n\r\n    const radios = document.querySelectorAll<HTMLInputElement>('.contenedorsetup input[type=\"radio\"]');\r\n    const claves = document.querySelectorAll<HTMLInputElement>('.keyinput');\r\n    const porcentaje_de_impuesto = document.querySelector('#porcentaje_de_impuesto') as HTMLSelectElement;\r\n\r\n    radios.forEach(radio => {\r\n      radio.addEventListener('change', () => {\r\n        // Obtenemos el grupo (name) del radio\r\n        const grupo:string = radio.name;\r\n        // Obtenemos la opción seleccionada de ese grupo\r\n        const seleccionado = document.querySelector(`input[name=\"${grupo}\"]:checked`) as HTMLInputElement;\r\n\r\n        console.log(`${grupo}, Opción seleccionada: ${seleccionado.value}`);\r\n        cambiarparametro(grupo, seleccionado.value);\r\n      });\r\n    });\r\n\r\n    ////////////// inputs tipo radio  ////////////////\r\n    function cambiarparametro(clave:string, valor:string){\r\n      const datos = new FormData();\r\n      datos.append(clave, valor);\r\n      (async ()=>{\r\n        try {\r\n            const url = \"/admin/api/parametrosSistema\";  //api llamada en parametroscontrolador.php\r\n            const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n            const resultado = await respuesta.json();\r\n            if(resultado.exito !== undefined){\r\n              msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n            }else{\r\n              msjalertToast('error', '¡Error!', resultado.error[0]);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n      })();\r\n    }\r\n\r\n    //////////  CLAVES  ////////////\r\n    ///////////  eventos a los inputs de las claves, limite de descuento, cantidad de zeta diarios etc 'Campos de entrada' /////////////\r\n    claves.forEach(c=>{\r\n      c.addEventListener('input', (e)=>{  \r\n        const inputClave = (e.target as HTMLInputElement);\r\n        const valorClave = (e.target as HTMLInputElement).value;\r\n        \r\n        (async ()=>{\r\n          const datos = new FormData();\r\n          datos.append(inputClave.name, valorClave);\r\n          try {\r\n              const url = \"/admin/api/parametrosSistemaClaves\";  //api llamada en parametroscontrolador.php\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();\r\n              if(resultado.exito !== undefined){\r\n                inputClave.style.color = \"#02db02\";\r\n                inputClave.style.fontWeight = \"500\";\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n        })();\r\n      });\r\n    });\r\n\r\n\r\n\r\n    //////////////////   campo tipo de descuento   /////////////////////\r\n    porcentaje_de_impuesto?.addEventListener('input', (e)=>{\r\n      console.log((e.target as HTMLSelectElement).value);\r\n      (async ()=>{\r\n          const datos = new FormData();\r\n          datos.append('porcentaje_de_impuesto', (e.target as HTMLSelectElement).value);\r\n          try {\r\n              const url = \"/admin/api/parametrosSistemaPorcentajeImpuesto\";  //api llamada en parametroscontrolador.php\r\n              const respuesta = await fetch(url, {method: 'POST', body: datos}); \r\n              const resultado = await respuesta.json();\r\n              if(resultado.exito !== undefined){\r\n                msjalertToast('success', '¡Éxito!', resultado.exito[0]);\r\n              }else{\r\n                msjalertToast('error', '¡Error!', resultado.error[0]);\r\n              }\r\n          } catch (error) {\r\n              console.log(error);\r\n          }\r\n      })();\r\n\r\n    });\r\n\r\n    \r\n  }\r\n\r\n})();"]}
>>>>>>> 56e5e4139a44f6e66b0ba17a1e501f481c18e9e6
