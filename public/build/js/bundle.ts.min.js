"use strict";const mobilemenu=document.querySelector("#mobile-menu"),sidebar=document.querySelector(".sidebar"),btnmenux=document.querySelector("#mobile-menux"),barra=document.querySelector(".barra-mobile"),nametop=document.querySelector(".nametop");mobilemenu&&mobilemenu.addEventListener("click",(function(){sidebar&&barra&&(sidebar.classList.toggle("mostrar"),barra.classList.toggle("ocultarmenu"))})),btnmenux&&btnmenux.addEventListener("click",(function(){sidebar&&barra&&(sidebar.classList.toggle("mostrar"),barra.classList.toggle("ocultarmenu"))})),document.querySelector(".sidebartoggle").addEventListener("click",e=>{sidebar&&(null==sidebar||sidebar.classList.toggle("minsidebar")),nametop&&nametop.classList.toggle("noneElement"),$(".btnav").toggleClass("noneElement")});const configdatatables={paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,responsive:!0,deferRender:!0,retrieve:!0,processing:!0,language:{search:"Busqueda",emptyTable:"No Hay datos disponibles",zeroRecords:"No se encontraron registros coincidentes",lengthMenu:"_MENU_ Entradas por pagina",info:"Mostrando pagina _PAGE_ de _PAGES_",infoEmpty:"No hay entradas a mostrar",infoFiltered:" (filtrado desde _MAX_ registros)",paginate:{first:"<<",last:">>",next:">",previous:"<"}}};function msjAlert(e,t,a){a.insertAdjacentHTML("beforeend",`<div class="alerta alerta__${e}">\n      <p><i class="fa-solid fa-circle-exclamation"></i> ${t}</p></div>`)}function msjalertToast(e,t,a){Swal.fire({icon:e,title:t,text:a,toast:!0,position:"top-end",showConfirmButton:!1,timer:2700})}if(document.querySelectorAll(".count-charts").forEach(e=>{var t;e.textContent=(parseInt(e.dataset.num)-e.previousElementSibling.value.length).toString(),null===(t=e.previousElementSibling)||void 0===t||t.addEventListener("input",t=>{if(e.textContent=parseInt(e.dataset.num)-t.target.value.length+"",parseInt(e.dataset.num)-t.target.value.length<=0){let a=t.target.value.slice(0,parseInt(e.dataset.num));t.target.value=a,e.textContent="0"}})}),document.querySelector("#tabulacion")){const e=document.querySelector('#tabulacion input[type="radio"]:checked').nextElementSibling;document.querySelector("."+e.id).style.display="block";const t=document.querySelectorAll(".tabs span"),a=document.querySelectorAll(".paginas");t.forEach(e=>{e.addEventListener("click",e=>{const t=e.target;a.forEach(e=>e.style.display="none"),document.querySelector("."+t.id).style.display="block"})})}!function(){var e;if(document.querySelector(".inicio")){const t=null===(e=document.getElementById("chartventas"))||void 0===e?void 0:e.getContext("2d");new Chart(t,{type:"line",data:{labels:["25-8-2024","26-8-2024","27-8-2024","28-8-2024","29-8-2024","30-8-2024","31-8-2024","01-09-2024"],datasets:[{label:"# of Votes",data:[8,9,3,5,8,4,2,5],borderColor:"#7C3AED",backgroundColor:"#00c8c2",tension:.3}]},options:{scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})}}();var __awaiter=this&&this.__awaiter||function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))};!function(){var e,t,a;if(document.querySelector(".empleado")){const n=document.querySelector("#crearempleado"),r=document.getElementById("miDialogoEmpleado"),i=document.getElementById("miDialogoSkills"),l=document.querySelector("#upImage"),c=document.querySelector("#customUpImage"),d=document.querySelector("#imginputfile"),s=document.querySelector("#nombre"),u=document.querySelector("#apellido"),m=document.querySelector("#movil "),v=document.querySelector("#email"),p=document.querySelector("#departamento"),g=document.querySelector("#ciudad"),f=document.querySelector("#direccion"),y=document.querySelector("#perfil");let b,S,h=0,E=0,w=[];function o(e){e.target!==r&&e.target!==i&&"cancelar"!==e.target.value&&"Actualizar"!==e.target.value||(r.close(),null==i||i.close(),document.removeEventListener("click",o))}b=$("#tablaempleados").DataTable(configdatatables),n.addEventListener("click",e=>{E=0,function(){var e;d.src=" ",null===(e=document.querySelector("#formCrearUpdateEmpleado"))||void 0===e||e.reset()}(),document.querySelector("#modalEmpleado").textContent="Crear empleado",document.querySelector("#btnEditarCrearEmpleado").value="Crear",r.showModal(),document.addEventListener("click",o)}),c.addEventListener("click",()=>l.click()),l.addEventListener("change",(function(){var e;const t=null===(e=this.files)||void 0===e?void 0:e[0];if(t){const e=new FileReader;e.onload=function(){const t=e.result;"string"==typeof t&&(d.src=t)},e.readAsDataURL(t)}})),null===(e=document.querySelector("#tablaempleados"))||void 0===e||e.addEventListener("click",e=>{var t,a,n,l,c;const y=e.target;((null===(t=e.target)||void 0===t?void 0:t.classList.contains("editarEmpleado"))||(null===(a=e.target.parentElement)||void 0===a?void 0:a.classList.contains("editarEmpleado")))&&function(e){var t,a,n,i,l,c,y,q,x,C,L,k;let _=null===(t=e.target.parentElement)||void 0===t?void 0:t.id;"I"===(null===(a=e.target)||void 0===a?void 0:a.tagName)&&(_=null===(i=null===(n=e.target.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.id);E=1,document.querySelector("#modalEmpleado").textContent="Actualizar Empleado",document.querySelector("#btnEditarCrearEmpleado").value="Actualizar",S=w.find(e=>e.id==_),d.src="/build/img/"+(null==S?void 0:S.img),s.value=null!==(l=null==S?void 0:S.nombre)&&void 0!==l?l:"",u.value=null!==(c=null==S?void 0:S.apellido)&&void 0!==c?c:"",m.value=null!==(y=null==S?void 0:S.movil)&&void 0!==y?y:"",v.value=null!==(q=null==S?void 0:S.email)&&void 0!==q?q:"",p.value=null!==(x=null==S?void 0:S.departamento)&&void 0!==x?x:"",g.value=null!==(C=null==S?void 0:S.ciudad)&&void 0!==C?C:"",f.value=null!==(L=null==S?void 0:S.direccion)&&void 0!==L?L:"",$("#perfil").val(null!==(k=null==S?void 0:S.perfil)&&void 0!==k?k:""),h=b.row(e.target.closest("tr")).index(),r.showModal(),document.addEventListener("click",o)}(e),((null===(n=e.target)||void 0===n?void 0:n.classList.contains("empleadoSkills"))||(null===(l=e.target.parentElement)||void 0===l?void 0:l.classList.contains("empleadoSkills")))&&function(e){var t,a,n;let r=null===(t=e.target.parentElement)||void 0===t?void 0:t.id;"I"===e.target.tagName&&(r=null===(n=null===(a=e.target.parentElement)||void 0===a?void 0:a.parentElement)||void 0===n?void 0:n.id);document.querySelectorAll('.inputskills input[type="checkbox"]').forEach(e=>{e.checked=!1}),S=w.find(e=>e.id==r);var l=null==S?void 0:S.idservicios;null==l||l.forEach(e=>{document.querySelector(`input[data-skillid="${e.idservicio}"]`).checked=!0}),null==i||i.showModal(),document.addEventListener("click",o)}(e),((null==y?void 0:y.classList.contains("eliminarEmpleado"))||(null===(c=y.parentElement)||void 0===c?void 0:c.classList.contains("eliminarEmpleado")))&&function(e){let t=e.target.parentElement.id,a=b.page.info();"I"===e.target.tagName&&(t=e.target.parentElement.parentElement.id);h=b.row(e.target.closest("tr")).index(),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},icon:"question",title:"Desea eliminar el empleado?",text:"El empleado sera eliminado definitivamente.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(()=>{__awaiter(this,void 0,void 0,(function*(){const e=new FormData;e.append("id",t);try{const t="/admin/api/eliminarEmpleado",o=yield fetch(t,{method:"POST",body:e}),n=yield o.json();void 0!==n.exito?(Swal.fire(n.exito[0],"","success")(b).row(h+a.start).remove().draw(),b.page(a.page).draw("page")):Swal.fire(n.error[0],"","error")}catch(e){console.log(e)}}))})()})}(e)}),null===(t=document.querySelector("#formCrearUpdateEmpleado"))||void 0===t||t.addEventListener("submit",e=>{var t;if(E){e.preventDefault();var a,o=b.page.info();if(a=S.img,!d.src.includes(S.img)&&(a=null===(t=e.target.elements.namedItem("upImage").files)||void 0===t?void 0:t[0])){if("image/png"!==a.type&&"image/jpeg"!==a.type)return void msjAlert("error","No es un formato valido para la foto",document.querySelector("#divmsjalerta1"));if(a.size>55e4)return void msjAlert("error","La imagen no debe superar los 500KB",document.querySelector("#divmsjalerta1"))}(()=>{__awaiter(this,void 0,void 0,(function*(){const e=new FormData;e.append("idempleado",S.id),e.append("img",a),e.append("nombre",s.value),e.append("apellido",u.value),e.append("movil",m.value),e.append("email",v.value),e.append("departamento",p.value),e.append("ciudad",g.value),e.append("direccion",f.value),e.append("perfil",y.value);try{const t="/admin/api/actualizarEmpleado",a=yield fetch(t,{method:"POST",body:e}),n=yield a.json();if(void 0!==n.exito){msjalertToast("success","¡Éxito!",n.exito[0]);const e=b.row(h+=o.start).data();e[1]=s.value+" "+u.value,e[2]=`<div class="text-center"><img style="width: 40px;" src="/build/img/${n.rutaimg[0]}" alt=""></div>`,e[3]=m.value,e[4]=v.value,e[5]=" ",e[6]="1"===y.value?"Empleado":"2"==y.value?"Admin":"Propietario",b.row(h).data(e).draw(),b.page(o.page).draw("page")}else msjalertToast("error","¡Error!",n.exito[0])}catch(e){console.log(e)}}))})()}}),null===(a=document.querySelector("#formSkills"))||void 0===a||a.addEventListener("submit",e=>{e.preventDefault();var t=[];document.querySelectorAll('.inputskills input[type="checkbox"]').forEach(e=>{e.checked&&(t=[...t,e.value])}),(()=>{__awaiter(this,void 0,void 0,(function*(){const e=new FormData;e.append("idempleado",S.id),e.append("idservicio",t.toString());try{const a="/admin/api/actualizarSkillsEmpleado",o=yield fetch(a,{method:"POST",body:e}),n=yield o.json();void 0!==n.exito?(msjalertToast("success","¡Éxito!",n.exito[0]),w.forEach(e=>{if(e.id==S.id)for(let a=0;a<t.length;a++)e.idservicios=[...e.idservicios,{idempleado:S.id,idservicio:t[a]}]})):msjalertToast("error","¡Error!",n.exito[0])}catch(e){console.log(e)}}))})()})}}();__awaiter=this&&this.__awaiter||function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))};(()=>{document.querySelectorAll("#producto");const e=document.querySelector("#productos"),t=document.querySelector("#tablaventa tbody"),a=document.querySelector("#btnvaciar"),o=document.querySelector("#miDialogoVaciar");let n=[];const r={subtotal:0,impuesto:0,descuento:0,total:0};let i=[];function l(e,a,o){var r,l;const d=n.findIndex(t=>t.id==e);if(d>-1){if(0==a)return void(n[d].cantidad=1);o?n[d].cantidad+=a:n[d].cantidad=a,n[d].total=parseInt(n[d].precio_venta)*n[d].cantidad,c(),(null==t?void 0:t.querySelector(`TR[data-id="${e}"] .inputcantidad`)).value=n[d].cantidad+"",(null===(l=null===(r=null==t?void 0:t.querySelector(`TR[data-id="${e}"]`))||void 0===r?void 0:r.children)||void 0===l?void 0:l[3]).textContent="$"+n[d].total.toLocaleString()}else{const a=i.find(t=>t.id==e),o={id:null==a?void 0:a.id,idcategoria:a.idcategoria,nombre:a.nombre,precio_venta:a.precio_venta,cantidad:1,total:Number(a.precio_venta)};n=[...n,o],c(),function(e){const a=i.find(t=>t.id==e),o=document.createElement("TR");o.classList.add("productselect"),o.dataset.id=""+e,o.insertAdjacentHTML("afterbegin",`<td class="!px-0 !py-2 text-xl text-gray-500 leading-5">${null==a?void 0:a.nombre}</td> \n    <td class="!px-0 !py-2"><div class="flex"><button><span class="menos material-symbols-outlined">remove</span></button><input type="text" class="inputcantidad w-20 px-2 text-center" value="1" oninput="this.value = parseInt(this.value.replace(/[,.]/g, '')||1)"><button><span class="mas material-symbols-outlined">add</span></button></div></td>\n    <td class="!p-2 text-xl text-gray-500 leading-5">$${Number(null==a?void 0:a.precio_venta).toLocaleString()}</td>\n    <td class="!p-2 text-xl text-gray-500 leading-5">$${Number(null==a?void 0:a.precio_venta).toLocaleString()}</td>\n    <td class="accionestd"><div class="acciones-btns"><button class="btn-md btn-red eliminarEmpleado"><i class="fa-solid fa-trash-can"></i></button></div></td>`),null==t||t.appendChild(o)}(e)}}function c(){r.subtotal=n.reduce((e,t)=>t.total+e,0),r.total=r.subtotal,document.querySelector("#subTotal").textContent="$"+r.subtotal.toLocaleString(),document.querySelector("#total").textContent="$"+r.total.toLocaleString()}__awaiter(void 0,void 0,void 0,(function*(){try{const e="/admin/api/allproducts",t=yield fetch(e);i=yield t.json(),console.log(i)}catch(e){console.log(e)}})),null==e||e.addEventListener("click",e=>{var t;const a=null===(t=e.target)||void 0===t?void 0:t.closest(".producto");a&&l(a.dataset.id,1,!0)}),null==t||t.addEventListener("click",e=>{var a,o,r;const i=(null===(a=e.target)||void 0===a?void 0:a.closest(".productselect")).dataset.id;if(e.target.classList.contains("menos")){const e=n.find(e=>e.id==i);l(i,e.cantidad-1,!1)}if(e.target.classList.contains("inputcantidad")&&"eventInput"!=e.target.dataset.event&&(null===(o=e.target)||void 0===o||o.addEventListener("input",e=>{l(i,Number(e.target.value),!1)}),e.target.dataset.event="eventInput"),e.target.classList.contains("mas")){const e=n.find(e=>e.id==i);l(i,e.cantidad+1,!1)}(e.target.classList.contains("eliminarEmpleado")||"I"==e.target.tagName)&&(n=n.filter(e=>e.id!=i),c(),null===(r=null==t?void 0:t.querySelector(`TR[data-id="${i}"]`))||void 0===r||r.remove())}),null==a||a.addEventListener("click",()=>{n.length&&o.showModal()})})();__awaiter=this&&this.__awaiter||function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))};(()=>{var e,t;if(document.querySelector(".categorias")){const o=document.querySelector("#crearCategoria"),n=document.querySelector("#miDialogoCategoria");let r,i=0,l=0;function a(e){e.target!==n&&"Salir"!==e.target.value&&"Actualizar"!==e.target.value||(n.close(),document.removeEventListener("click",a))}r=$("#tablaCategorias").DataTable(configdatatables),null==o||o.addEventListener("click",e=>{l=0,function(){var e;null===(e=document.querySelector("#formCrearUpdateCategoria"))||void 0===e||e.reset(),document.querySelector("#formCrearUpdateCategoria").action="/admin/almacen/crear_categoria",document.querySelector("#idcategoria").value="0"}(),document.querySelector("#modalCategoria").textContent="Crear categoria",document.querySelector("#btnEditarCrearCategoria").value="Crear",n.showModal(),document.addEventListener("click",a)}),null===(e=document.querySelector("#tablaCategorias"))||void 0===e||e.addEventListener("click",e=>{var t,o,c;const d=e.target;((null===(t=e.target)||void 0===t?void 0:t.classList.contains("editarCategoria"))||(null===(o=e.target.parentElement)||void 0===o?void 0:o.classList.contains("editarCategoria")))&&function(e){var t,o,c,d,s;l=1;let u=null===(t=e.target.parentElement)||void 0===t?void 0:t.id;"I"===(null===(o=e.target)||void 0===o?void 0:o.tagName)&&(u=null===(d=null===(c=e.target.parentElement)||void 0===c?void 0:c.parentElement)||void 0===d?void 0:d.id);document.querySelector("#modalCategoria").textContent="Actualizar categoria",document.querySelector("#btnEditarCrearCategoria").value="Actualizar",document.querySelector("#idcategoria").value=u,document.querySelector("#categoria").value=null===(s=e.target.closest(".acciones-btns"))||void 0===s?void 0:s.dataset.categoria,i=r.row(e.target.closest("tr")).index(),n.showModal(),document.addEventListener("click",a)}(e),((null==d?void 0:d.classList.contains("eliminarCategoria"))||(null===(c=d.parentElement)||void 0===c?void 0:c.classList.contains("eliminarCategoria")))&&function(e){let t=e.target.parentElement.id,a=r.page.info();"I"===e.target.tagName&&(t=e.target.parentElement.parentElement.id);i=r.row(e.target.closest("tr")).index(),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},icon:"question",title:"Desea eliminar la categoria?",text:"La categoria sera eliminado definitivamente.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(()=>{__awaiter(this,void 0,void 0,(function*(){const e=new FormData;e.append("id",t);try{const t="/admin/api/eliminarCategoria",o=yield fetch(t,{method:"POST",body:e}),n=yield o.json();n.length||void 0!==n.exito?(r.row(i+a.start).remove().draw(),r.page(a.page).draw("page"),Swal.fire(n.exito[0],"","success")):Swal.fire(n.error[0],"","error")}catch(e){console.log(e)}}))})()})}(e)}),null===(t=document.querySelector("#formCrearUpdateCategoria"))||void 0===t||t.addEventListener("submit",e=>{if(l){e.preventDefault();var t=r.page.info();__awaiter(void 0,void 0,void 0,(function*(){const e=new FormData;e.append("id",$("#idcategoria").val()),e.append("nombre",$("#categoria").val());try{const o="/admin/api/actualizar_categoria",n=yield fetch(o,{method:"POST",body:e}),l=yield n.json();if(console.log(l),void 0!==l.exito){msjalertToast("success","¡Éxito!",l.exito[0]);const e=r.row(i+=t.start).data();e[1]=$("#categoria").val(),e[3]=`<div class="acciones-btns" id="${$("#idcategoria").val()}" data-categoria="${$("#categoria").val()}"><button class="btn-md btn-turquoise editarCategoria"><i class="fa-solid fa-pen-to-square"></i></button><button class="btn-md btn-red eliminarCategoria"><i class="fa-solid fa-trash-can"></i></button></div>`,r.row(i).data(e).draw(),r.page(t.page).draw("page")}else msjalertToast("error","¡Error!",l.error[0]);document.addEventListener("click",a)}catch(e){console.log(e)}}))}})}})();__awaiter=this&&this.__awaiter||function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))};(()=>{var e,t;if(document.querySelector(".productos")){const o=document.querySelector("#crearProducto"),n=document.querySelector("#miDialogoProducto"),r=document.querySelector("#upImage"),i=document.querySelector("#customUpImage"),l=document.querySelector("#imginputfile");let c,d,s=0,u=0,m=[];function a(e){e.target!==n&&"salir"!==e.target.value&&"Actualizar"!==e.target.value||(n.close(),document.removeEventListener("click",a))}__awaiter(void 0,void 0,void 0,(function*(){try{const e="/admin/api/allproducts",t=yield fetch(e);m=yield t.json(),console.log(m)}catch(e){console.log(e)}})),c=$("#tablaProductos").DataTable(configdatatables),null==o||o.addEventListener("click",e=>{u=0,function(){var e;null===(e=document.querySelector("#formCrearUpdateProducto"))||void 0===e||e.reset(),document.querySelector("#formCrearUpdateProducto").action="/admin/almacen/crear_producto"}(),document.querySelector("#modalProducto").textContent="Crear producto",document.querySelector("#btnEditarCrearProducto").value="Crear",n.showModal(),document.addEventListener("click",a)}),null===(e=document.querySelector("#tablaProductos"))||void 0===e||e.addEventListener("click",e=>{var t,o,r;const i=e.target;((null===(t=e.target)||void 0===t?void 0:t.classList.contains("editarProductos"))||(null===(o=e.target.parentElement)||void 0===o?void 0:o.classList.contains("editarProductos")))&&function(e){var t,o,r,i,v,p,g,f;let y=null===(t=e.target.parentElement)||void 0===t?void 0:t.id;"I"===(null===(o=e.target)||void 0===o?void 0:o.tagName)&&(y=null===(i=null===(r=e.target.parentElement)||void 0===r?void 0:r.parentElement)||void 0===i?void 0:i.id);u=1,document.querySelector("#modalProducto").textContent="Actualizar producto",document.querySelector("#btnEditarCrearProducto").value="Actualizar",d=m.find(e=>e.id===y),$("#categoria").val(null!==(v=null==d?void 0:d.idcategoria)&&void 0!==v?v:""),document.querySelector("#nombre").value=null==d?void 0:d.nombre,document.querySelector("#preciocompra").value=null!==(p=null==d?void 0:d.precio_compra)&&void 0!==p?p:"",document.querySelector("#precioventa").value=null!==(g=null==d?void 0:d.precio_venta)&&void 0!==g?g:"",document.querySelector("#sku").value=null!==(f=null==d?void 0:d.codigo)&&void 0!==f?f:"",l.src="/build/img/"+(null==d?void 0:d.foto),s=c.row(e.target.closest("tr")).index(),n.showModal(),document.addEventListener("click",a)}(e),((null==i?void 0:i.classList.contains("eliminarProductos"))||(null===(r=i.parentElement)||void 0===r?void 0:r.classList.contains("eliminarProductos")))&&function(e){let t=e.target.parentElement.id,a=c.page.info();"I"===e.target.tagName&&(t=e.target.parentElement.parentElement.id);s=c.row(e.target.closest("tr")).index(),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},icon:"question",title:"Desea eliminar el prducto?",text:"El prducto sera eliminado definitivamente.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(()=>{__awaiter(this,void 0,void 0,(function*(){const e=new FormData;e.append("id",t);try{const t="/admin/api/eliminarProducto",o=yield fetch(t,{method:"POST",body:e}),n=yield o.json();void 0!==n.exito?(c.row(s+a.start).remove().draw(),c.page(a.page).draw("page"),Swal.fire(n.exito[0],"","success")):Swal.fire(n.error[0],"","error")}catch(e){console.log(e)}}))})()})}(e)}),null===(t=document.querySelector("#formCrearUpdateProducto"))||void 0===t||t.addEventListener("submit",e=>{var t;if(u){e.preventDefault();var o,n=c.page.info();if(o=d.foto,!l.src.includes(d.foto)&&(o=null===(t=e.target.elements.namedItem("upImage").files)||void 0===t?void 0:t[0])){if("image/png"!==o.type&&"image/jpeg"!==o.type)return void msjAlert("error","No es un formato valido para la foto",document.querySelector("#divmsjalerta1"));if(o.size>55e4)return void msjAlert("error","La imagen no debe superar los 500KB",document.querySelector("#divmsjalerta1"))}__awaiter(void 0,void 0,void 0,(function*(){const e=new FormData;e.append("id",d.id),e.append("idcategoria",$("#categoria").val()),e.append("nombre",$("#nombre").val()),e.append("foto",o),e.append("precio_compra",$("#preciocompra").val()),e.append("precio_venta",$("#precioventa").val()),e.append("codigo",$("#sku").val());try{const t="/admin/api/actualizarproducto",o=yield fetch(t,{method:"POST",body:e}),r=yield o.json();if(console.log(r),void 0!==r.exito){msjalertToast("success","¡Éxito!",r.exito[0]),m.forEach(e=>{e.id==d.id&&(e=Object.assign(e,r.producto[0]))});const e=c.row(s+=n.start).data();e[1]=`<div class="text-center"><img class="inline" style="width: 50px;" src="/build/img/${r.producto[0].foto}" alt=""></div>`,e[2]='<div class="w-80 whitespace-normal">'+$("#nombre").val()+"</div>",e[3]=$("#categoria option:selected").text(),e[4]="",e[5]=$("#sku").val(),e[6]=$("#precioventa").val(),c.row(s).data(e).draw(),c.page(n.page).draw("page")}else msjalertToast("error","¡Error!",r.error[0]);document.addEventListener("click",a)}catch(e){console.log(e)}}))}}),null==i||i.addEventListener("click",()=>null==r?void 0:r.click()),null==r||r.addEventListener("change",(function(){var e;const t=null===(e=this.files)||void 0===e?void 0:e[0];if(t){const e=new FileReader;e.onload=function(){const t=e.result;"string"==typeof t&&(l.src=t)},e.readAsDataURL(t)}}))}})(),(()=>{if(document.querySelector(".caja")){const t=document.querySelector("#gastosIngresos"),a=document.querySelector("#btnGastosingresos"),o=document.querySelector("#operacion");function e(a){a.target!==t&&"cancelar"!==a.target.value&&"Aplicar"!==a.target.value||(t.close(),document.removeEventListener("click",e))}null==a||a.addEventListener("click",()=>{t.showModal(),document.addEventListener("click",e)}),null==o||o.addEventListener("change",e=>{const t=e.target,a=document.querySelector(".tipodegasto");"2"==t.value?a.style.display="flex":a.style.display="none"})}})(),(()=>{if(document.querySelector(".cerrarcaja")){const t=document.querySelector("#modalArqueocaja"),a=document.querySelector("#Modalcerrarcaja"),o=document.querySelector("#btnArqueocaja"),n=document.querySelector("#btnCerrarcaja");function e(o){(o.target===t||o.target===a||"cancelar"===o.target.value||"Aplicar"===o.target.value||o.target.closest(".salircerrarcaja")||o.target.closest(".finCerrarcaja"))&&(t.close(),a.close(),document.removeEventListener("click",e),o.target.closest(".finCerrarcaja")&&console.log(45))}null==o||o.addEventListener("click",()=>{t.showModal(),document.addEventListener("click",e)}),null==n||n.addEventListener("click",()=>{a.showModal(),document.addEventListener("click",e)})}})(),function(){var e,t;if(document.querySelector(".reportes")){const o=null===(e=document.getElementById("chartventas"))||void 0===e?void 0:e.getContext("2d"),n=null===(t=document.getElementById("chartutilidad"))||void 0===t?void 0:t.getContext("2d"),r=document.querySelector("#ventasgenerales"),i=document.querySelector("#cierrescaja"),l=(document.querySelector("#modalFecha"),{inicio:"",fin:""});function a(e){Swal.fire({title:"<strong>Seleccionar <u>Fecha</u></strong>",html:'\n        <div class="campodaterange">\n          <label class="formulario__label" for="fechapersonalizada">Fecha personalizada</label>\n          <input type="text" name="daterange" class="formulario__input" id="fechapersonalizada" /></div>\n        ',showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,width:"auto"}).then(t=>{t.isConfirmed&&""!=l.inicio&&""!=l.fin&&(window.location.href=`/admin/reportes/${e}?inicio=${l.inicio}&fin=${l.fin}`)})}new Chart(o,{type:"bar",data:{labels:["Red","Blue","Yellow","Green","Purple","Orange","Red","Blue","Yellow","Green","Purple","Orange","Red","Blue","Yellow","Green","Purple","Orange","Red","Blue","Yellow","Green","Purple","Orange","Red","Blue","Yellow","Green","Purple","Orange"],datasets:[{label:"Total Ventas",data:[12,19,3,5,2,3],borderWidth:1}]},options:{scales:{y:{beginAtZero:!0,grid:{display:!1}},x:{grid:{display:!1}}},responsive:!0}}),new Chart(n,{type:"doughnut",data:{labels:["Ventas total:","Costo:","Utilidad:"],datasets:[{label:"Total Ventas",data:[19,7,12],backgroundColor:["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 205, 86)"],hoverOffset:4}]},options:{responsive:!0}}),$('input[name="daterange"]').daterangepicker({opens:"right",alwaysShowCalendars:!0}),null==r||r.addEventListener("click",()=>{l.inicio="",l.fin="",a("ventasgenerales"),$('input[name="daterange"]').daterangepicker({opens:"right",alwaysShowCalendars:!0}),$('input[name="daterange"]').on("apply.daterangepicker",(function(e,t){var a=t.startDate.format("YYYY-MM-DD"),o=t.endDate.format("YYYY-MM-DD");l.inicio=a,l.fin=o}))}),i.addEventListener("click",()=>{l.inicio="",l.fin="",a("cierrescaja"),$('input[name="daterange"]').daterangepicker(),$('input[name="daterange"]').on("apply.daterangepicker",(function(e,t){l.inicio=t.startDate.format("YYYY-MM-DD"),l.fin=t.endDate.format("YYYY-MM-DD")}))})}}();
//# sourceMappingURL=bundle.ts.js.map
